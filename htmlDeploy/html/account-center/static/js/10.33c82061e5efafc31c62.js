webpackJsonp([10],{PNRG:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("pcot"),i=e("ryJa"),l=e.n(i),r={data:function(){return{allTableData:[],filterTableData:[],pagination:{page:1,sizes:20,total:0},table:{search:{date:[],keyword:"",keywordOfName:"",startTime:"",endTime:"",timeout:null,dataList:[],userNameList:[]},dataList:[]}}},mounted:function(){this.getLogDataList()},methods:{dateFormat:function(t,a){var e=t[a.property];return void 0===e?"":l()(e).format("YYYY-MM-DD HH:ss:mm")},dateFrm:function(t){return l()(t).format("YYYY-MM-DD HH:ss:mm")},getLogDataList:function(t){var a=this;1===t&&(this.pagination.page=1),Object(s.j)({page:this.pagination.page,size:this.pagination.sizes,keyword:this.table.search.keywordOfName?this.table.search.keywordOfName:this.table.search.keyword,start:this.table.search.startTime,end:this.table.search.endTime}).then(function(t){t.data.code===a.$global.successCode?(a.allTableData=t.data.data.list,a.pagination.total=t.data.data.total,a.filterTableData=a.allTableData):a.$message({message:"数据请求失败!",type:"error"})})},handleCurrentChange:function(t){this.pagination.page=t,this.getLogDataList()},handleSizeChange:function(t){this.pagination.sizes=t,this.getLogDataList()},getTimeDate:function(){var t=this;this.table.search.date?(this.table.search.date.forEach(function(a,e){t.table.dataList[e]=l()(a).valueOf()}),this.table.search.startTime=this.table.dataList[0],this.table.search.endTime=this.table.dataList[1],this.getLogDataList(1)):(this.table.search.startTime="",this.table.search.endTime="",this.getLogDataList(1))}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main"},[e("div",{staticClass:"crumb_box"},[e("div",{staticClass:"search_box"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[t._v("首页")]),t._v(" "),e("el-breadcrumb-item",[t._v("登入日志")])],1)],1)]),t._v(" "),e("div",{staticClass:"clear"}),t._v(" "),e("div",{staticClass:"application_item",staticStyle:{height:"calc(100vh - 198px)"}},[e("div",{staticClass:"btn_box"},[e("div",{staticClass:"common-transverse-operation"},[e("div",{staticClass:"search-date"},[e("el-date-picker",{attrs:{clearable:"",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.getTimeDate},model:{value:t.table.search.date,callback:function(a){t.$set(t.table.search,"date",a)},expression:"table.search.date"}})],1),t._v(" "),e("div",{staticClass:"search-input"},[e("el-input",{attrs:{placeholder:"用户名称、所属机构、设备类型、ip/系统","suffix-icon":"el-icon-search"},on:{change:function(a){return t.getLogDataList(1)}},model:{value:t.table.search.keyword,callback:function(a){t.$set(t.table.search,"keyword",a)},expression:"table.search.keyword"}})],1)]),t._v(" "),e("div",{staticClass:"clear"}),t._v(" "),e("div",{staticClass:"table_item"},[e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.allTableData,"tooltip-effect":"dark",height:"calc(100vh - 245px)"}},[e("el-table-column",{attrs:{prop:"logId",label:"日志编号",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{prop:"userId",label:"用户代码",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"userName",label:"用户名称",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{prop:"orgName",label:"所属机构",width:"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"deviceType",label:"设备类型"}}),t._v(" "),e("el-table-column",{attrs:{prop:"loginVersion",label:"IP地址或系统"}}),t._v(" "),e("el-table-column",{attrs:{prop:"loginDevice",label:"MAC地址或机型"}}),t._v(" "),e("el-table-column",{attrs:{label:"登录时间",width:"165"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{domProps:{textContent:t._s(t.dateFrm(a.row.loginTime))}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"退出时间",width:"165"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{domProps:{textContent:t._s(t.dateFrm(a.row.exitTime))}})]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"domainId",label:"在线时长"}})],1)],1),t._v(" "),e("div",{staticClass:"pagination"},[e("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":t.pagination.sizes,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total,"current-page":t.pagination.page},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])])])},staticRenderFns:[]};var o=e("C7Lr")(r,n,!1,function(t){e("ZweP")},"data-v-20af7f21",null);a.default=o.exports},ZweP:function(t,a){}});
//# sourceMappingURL=10.33c82061e5efafc31c62.js.map