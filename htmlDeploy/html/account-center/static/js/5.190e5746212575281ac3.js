webpackJsonp([5],{JbES:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("pcot"),i=a("ryJa"),s=a.n(i),n={name:"GroupList",data:function(){return{visible:{joinGroupList:!1,addGroupList:!1},search:{keyword:""},tableConfig:{loading:!1,overflow:!0},radio:0,addGroupForm:{companyName:""},dataList:[],pagination:{page:1,sizes:20,total:0},groupLists:[],users:{},paginations:{page_index:1,total:0,page_size:5,page_sizes:[5,10,15],layout:"total, sizes, prev, pager, next, jumper"}}},created:function(){this.getGroupLists(),this.getUser()},methods:{getUser:function(){this.users=JSON.parse(localStorage.getItem("user-center-token"))},stepadd:function(){this.addGroupForm.companyName="",this.visible.joinGroupList=!1,this.visible.addGroupList=!0},dateFormat:function(t,e){var a=t[e.property];return void 0===a?"":s()(a).format("YYYY-MM-DD")},dateFrm:function(t){return s()(t).format("YYYY-MM-DD")},getGroupLists:function(){var t=this;Object(o.g)().then(function(e){e.data.code===t.$global.successCode&&(t.groupLists=e.data.data)},function(t){console.log("请求团队列表信息数据失败",t)})},getallGroupLists:function(){var t=this;Object(o.l)({query:this.search.keyword}).then(function(e){e.data.code===t.$global.successCode&&(t.allTableData=e.data.data,t.setPaginations())},function(t){console.log("请求数据失败",t)})},handleCurrentChange:function(t){var e=this,a=this.paginations.page_size*(t-1),o=this.allTableData.filter(function(t,e){return e>=a});this.dataList=o.filter(function(t,a){return a<e.paginations.page_size})},handleSizeChange:function(t){this.paginations.page_index=1,this.paginations.page_size=t,this.dataList=this.allTableData.filter(function(e,a){return a<t})},setPaginations:function(){var t=this;this.paginations.total=this.allTableData.length,this.paginations.page_index=1,this.paginations.page_size=5,this.dataList=this.allTableData.filter(function(e,a){return a<t.paginations.page_size})},quitCompanys:function(t){var e=this;this.$confirm("是否确定退出该团队？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.t)({dbcOneId:t}).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"退出该团队成功！",type:"success"}),e.getGroupLists())},function(t){console.log("退出该团队失败",t)})}).catch(function(){})},workAdd:function(){this.$message({message:"暂未实现该功能！",type:"warning"})},addGroupSubmit:function(){var t=this,e=this.addGroupForm;this.$refs.addGroupForm_rules.validate(function(a){a&&(Object(o.c)(e).then(function(e){e.data.code===t.$global.successCode&&(t.$message({message:"添加组织成功！",type:"success"}),t.getGroupLists())},function(t){console.log("添加组织失败",t)}),t.visible.addGroupList=!1)})},joinGroupSubmit:function(t){var e=this;this.$confirm("是否确定加入该组织？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.r)({companyID:t}).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"加入该组织成功！",type:"success"}),e.getGroupLists())},function(t){console.log("加入该组织失败",t)})}).catch(function(){})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"crumb_box"},[a("div",{staticClass:"search_box"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("组织列表")])],1)],1)]),t._v(" "),a("div",{staticClass:"clear"}),t._v(" "),a("div",{staticClass:"application_item"},[a("div",{staticClass:"btn_box"},[a("el-button",{attrs:{type:"primary"},on:{click:t.stepadd}},[t._v("创建组织")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:function(e){t.visible.joinGroupList=!0}}},[t._v("加入组织")]),t._v(" "),t._m(0)],1),t._v(" "),a("div",{staticClass:"clear"}),t._v(" "),a("div",{staticClass:"table_item"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","border-bottom":"none"},attrs:{stripe:"",data:t.groupLists,"tooltip-effect":"dark",height:"calc(100vh - 205px)"}},[a("el-table-column",{attrs:{type:"index",width:"55",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"company",label:"组织名称",width:"200","show-overflow-tooltip":t.tableConfig.overflow}}),t._v(" "),a("el-table-column",{attrs:{label:"申请日期",width:"130","show-overflow-tooltip":t.tableConfig.overflow},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:null!=e.row.applyDate,expression:"scope.row.applyDate != null"}]},[t._v(t._s(t.dateFrm(e.row.applyDate)))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:null==e.row.applyDate,expression:"scope.row.applyDate == null"}],staticStyle:{color:"#999"}},[t._v("暂无")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:"55","show-overflow-tooltip":t.tableConfig.overflow},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.row.applyStatus,expression:"scope.row.applyStatus == 1"}]},[t._v("离职")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.row.applyStatus,expression:"scope.row.applyStatus == 0"}]},[t._v("在职")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:null==e.row.applyStatus,expression:"scope.row.applyStatus == null"}],staticStyle:{color:"#999"}},[t._v("暂无")])]}}])}),t._v(" "),a("el-table-column"),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.quitCompanys(e.row.dbcOneId)}}},[t._v("退出组织")]),a("b",[t._v("|")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.workAdd}},[t._v("工作交接")])]}}])})],1)],1)]),t._v(" "),a("el-dialog",{staticClass:"private-pop",attrs:{title:"加入组织",visible:t.visible.joinGroupList,width:"600px"},on:{"update:visible":function(e){return t.$set(t.visible,"joinGroupList",e)}}},[a("div",{staticStyle:{"margin-bottom":"50px"}},[a("el-input",{staticStyle:{float:"left",width:"100%"},attrs:{placeholder:"搜索两个字以上的组织关键字...","suffix-icon":"el-icon-search"},on:{change:t.getallGroupLists},model:{value:t.search.keyword,callback:function(e){t.$set(t.search,"keyword",e)},expression:"search.keyword"}})],1),t._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%","border-bottom":"none"},attrs:{data:t.dataList,height:"289"}},[a("el-table-column",{attrs:{type:"index",width:"55",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"company",label:"组织名称",width:"200","show-overflow-tooltip":t.tableConfig.overflow}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"组织联系人",width:"100","show-overflow-tooltip":t.tableConfig.overflow}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.joinGroupSubmit(e.row.dbcId)}}},[t._v("申请加入")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination",staticStyle:{"padding-bottom":"20px"}},[t.paginations.total>0?a("el-pagination",{attrs:{"page-sizes":t.paginations.page_sizes,"page-size":t.paginations.page_size,layout:t.paginations.layout,total:t.paginations.total,"current-page":t.paginations.page_index},on:{"update:currentPage":function(e){return t.$set(t.paginations,"page_index",e)},"update:current-page":function(e){return t.$set(t.paginations,"page_index",e)},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}}):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticStyle:{padding:"5px 0px",height:"36px"}},[a("i",{staticClass:"icon iconfont icontishi",staticStyle:{float:"left",color:"#f4a100",display:"inline-block"}}),t._v(" \n          "),a("span",{staticStyle:{float:"right",display:"inline-block",width:"540px","text-align":"left"}},[t._v("提示：以上是与您搜索相类似的组织，您可以输入更接近的关键字，也可以申请加入组织、\n            "),a("span",{staticStyle:{color:"#00aaee",cursor:"pointer"},on:{click:t.stepadd}},[t._v("创建组织")])])])])]),t._v(" "),a("el-dialog",{staticClass:"uploadadress",attrs:{title:"创建组织",visible:t.visible.addGroupList,width:"600px"},on:{"update:visible":function(e){return t.$set(t.visible,"addGroupList",e)}}},[a("el-form",{ref:"addGroupForm_rules",staticClass:"demo-ruleForm",attrs:{model:t.addGroupForm,"label-width":"93px"}},[a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{attrs:{disabled:""},model:{value:t.users.mobile,callback:function(e){t.$set(t.users,"mobile",e)},expression:"users.mobile"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"组织名称：",prop:"companyName",rules:[{required:!0,message:"组织名称为空",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入组织名称"},model:{value:t.addGroupForm.companyName,callback:function(e){t.$set(t.addGroupForm,"companyName",e)},expression:"addGroupForm.companyName"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addGroupSubmit}},[t._v("创 建")]),t._v(" "),a("el-button",{on:{click:function(e){t.visible.addGroupList=!1}}},[t._v("取 消")])],1),t._v(" "),a("div",{staticClass:"clear"})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticStyle:{"margin-left":"10px"}},[e("i",{staticClass:"icon iconfont icontishi",staticStyle:{color:"#f4a100"}}),this._v(" 您可以申请加入其他组织或者创建新组织，实现跨团队协作！")])}]};var r=a("C7Lr")(n,l,!1,function(t){a("NUlR")},"data-v-be001f22",null);e.default=r.exports},NUlR:function(t,e){}});
//# sourceMappingURL=5.190e5746212575281ac3.js.map