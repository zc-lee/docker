webpackJsonp([8],{GcZa:function(e,t){},SgTj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("pcot"),n=a("ryJa"),r=a.n(n),i={name:"AgentSetup",data:function(){return{tableConfig:{loading:!1,overflow:!0},restaurants1:[],restaurants:[],workrestaurants1:[],workrestaurants:[],multipleSelection:[],allTableData:[],radio:0,totalTableData:[],currentPage:4,pagination:{page:1,sizes:20,total:0},isShow:!1,btnStyle:"icon-arrowdown",editAgentFormVisible:!1,addAgentFormVisible:!1,agentAddForm:{userName:"",beuserName:"",beginDate:new Date,endDate:new Date,workflowId:"",userId:"",beUserId:"",workflowcontent:""},agentEditForm:{userName:"",beuserName:"",beginDate:new Date,endDate:new Date,workflowId:"",userId:"",beUserId:"",workflowcontent:""},agentAddForm1:{beginDate:new Date,endDate:new Date,workflowId:"",userId:"",beUserId:""},proxyIdForm:{proxyIds:[]},tableAgentsList:[],timeout:null}},created:function(){this.getProxyLists()},methods:{dateFormat:function(e,t){var a=e[t.property];return void 0===a?"":r()(a).format("YYYY-MM-DD")},dateFrm:function(e){return r()(e).format("YYYY-MM-DD")},getProxyLists:function(){var e=this;Object(o.m)({page:this.pagination.page,size:this.pagination.sizes}).then(function(t){t.data.code===e.$global.successCode&&(e.tableAgentsList=t.data.data.list,e.pagination.total=t.data.data.total)},function(e){console.log("请求数据失败",e)})},handleCurrentChange:function(e){this.pagination.page=e,this.getProxyLists()},handleSizeChange:function(e){this.pagination.sizes=e,this.getProxyLists()},onSubmitAddAgent:function(){var e=this;this.agentAddForm.endDate=new Date(this.agentAddForm.endDate).getTime(),this.agentAddForm.beginDate=new Date(this.agentAddForm.beginDate).getTime();var t=this.agentAddForm;Object(o.b)(t).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"添加代理成功！",type:"success"}),e.getProxyLists())},function(e){console.log("添加代理失败",e)}),this.addAgentFormVisible=!1},editProxy:function(e){this.agentEditForm=[],this.editAgentFormVisible=!0,this.agentEditForm=e,this.agentEditForm.workflowcontent=e.workflowName},onSubmitEidtProxy:function(){var e=this;this.agentEditForm.endDate=new Date(this.agentEditForm.endDate).getTime(),this.agentEditForm.beginDate=new Date(this.agentEditForm.beginDate).getTime();var t=this.agentEditForm;Object(o.A)(t).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"修改代理成功！",type:"success"}),e.getProxyLists())},function(e){console.log("修改代理失败",e)}),this.editAgentFormVisible=!1},handleSelectionChange:function(e){var t=this;this.proxyIdForm.proxyIds=[],this.multipleSelection=e,this.multipleSelection.forEach(function(e){t.proxyIdForm.proxyIds.push(e.proxyId)})},deleteAgent:function(){var e=this;0!=this.multipleSelection.length?this.$confirm("是否确定取消该代理？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.proxyIdForm;Object(o.f)(t).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"取消代理成功！",type:"success"}),e.getProxyLists())},function(e){console.log("取消代理失败",e)})}).catch(function(){}):this.$message({message:"请选择需要取消的代理人！",type:"warning"})},querySearch:function(e,t){var a=this;Object(o.n)({query:e}).then(function(o){if(o.data.code===a.$global.successCode){a.restaurants=[],a.restaurants1=o.data.data,a.restaurants=a.restaurants1.map(function(e){return{value:e.label,usersId:e.value}});var n=a.restaurants,r=e?n.filter(a.createFilter(e)):n;t(r)}},function(e){console.log("请求用户数据失败",e)})},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleAgentFormSelect:function(e){this.agentAddForm.userId=e.usersId,this.agentAddForm.userName=e.value},edithandleAgentFormSelect:function(e){this.agentEditForm.userId=e.usersId,this.agentEditForm.userName=e.value},queryWorkflowSearch:function(e,t){var a=this;Object(o.q)({query:e}).then(function(e){e.data.code===a.$global.successCode&&(a.workrestaurants=[],a.workrestaurants1=e.data.data,a.workrestaurants=a.workrestaurants1.map(function(e){return{value:e.label,workflowId:e.value}}),t(a.workrestaurants))},function(e){console.log("请求工作流数据失败",e)})},handleWorkflowFormSelect:function(e){this.agentAddForm.workflowId=e.workflowId,this.agentAddForm.workflowcontent=e.value},edithandleWorkflowFormSelect:function(e){this.agentEditForm.workflowId=e.workflowId,this.agentEditForm.workflowcontent=e.value}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"crumb_box"},[a("div",{staticClass:"search_box"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",[e._v("代理人设置")])],1)],1)]),e._v(" "),a("div",{staticClass:"clear"}),e._v(" "),a("div",{staticClass:"application_item"},[a("div",{staticClass:"btn_box"},[a("div",{staticClass:"btn_box_1"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addAgentFormVisible=!0}}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"btn_box_2"},[a("el-button",{attrs:{type:"text"},on:{click:e.deleteAgent}},[e._v("取消代理")])],1)]),e._v(" "),a("div",{staticClass:"clear"}),e._v(" "),a("div",{staticClass:"table_item"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableAgentsList,"tooltip-effect":"dark",height:"calc(100vh - 245px)"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"代理人",width:"100","show-overflow-tooltip":e.tableConfig.overflow}}),e._v(" "),a("el-table-column",{attrs:{prop:"beUserName",label:"被代理人",width:"100","show-overflow-tooltip":e.tableConfig.overflow}}),e._v(" "),a("el-table-column",{attrs:{prop:"beginDate",label:"开始日期",formatter:e.dateFormat,width:"130","show-overflow-tooltip":e.tableConfig.overflow}}),e._v(" "),a("el-table-column",{attrs:{prop:"endDate",label:"结束日期",formatter:e.dateFormat,width:"130","show-overflow-tooltip":e.tableConfig.overflow}}),e._v(" "),a("el-table-column",{attrs:{label:"代理类型",width:"100","show-overflow-tooltip":e.tableConfig.overflow},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:1==t.row.proxyType,expression:"scope.row.proxyType == 1"}]},[e._v("企业")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==t.row.proxyType,expression:"scope.row.proxyType == 0"}]},[e._v("个人")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"workflowName",label:"代理内容",width:"130","show-overflow-tooltip":e.tableConfig.overflow}}),e._v(" "),a("el-table-column"),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"renewbtn",attrs:{type:"text"},on:{click:function(a){return e.editProxy(t.row)}}},[e._v("修改")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":e.pagination.sizes,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total,"current-page":e.pagination.page},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)]),e._v(" "),a("el-dialog",{staticClass:"uploadadress",attrs:{title:"新建代理",visible:e.addAgentFormVisible,width:"600px"},on:{"update:visible":function(t){e.addAgentFormVisible=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.agentAddForm,"status-icon":"","label-width":"92px"}},[a("el-form-item",{attrs:{label:"代理人："}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入代理人姓名","trigger-on-focus":!1},on:{select:e.handleAgentFormSelect},model:{value:e.agentAddForm.userName,callback:function(t){e.$set(e.agentAddForm,"userName",t)},expression:"agentAddForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理期限："}},[a("el-date-picker",{staticStyle:{width:"217.5px"},attrs:{type:"date",placeholder:"选择开始日期"},model:{value:e.agentAddForm.beginDate,callback:function(t){e.$set(e.agentAddForm,"beginDate",t)},expression:"agentAddForm.beginDate"}}),e._v("   -   \n        "),a("el-date-picker",{staticStyle:{width:"217.5px"},attrs:{type:"date",placeholder:"选择结束日期"},model:{value:e.agentAddForm.endDate,callback:function(t){e.$set(e.agentAddForm,"endDate",t)},expression:"agentAddForm.endDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理内容："}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.queryWorkflowSearch,placeholder:"请输入代理内容","trigger-on-focus":!1},on:{select:e.handleWorkflowFormSelect},model:{value:e.agentAddForm.workflowcontent,callback:function(t){e.$set(e.agentAddForm,"workflowcontent",t)},expression:"agentAddForm.workflowcontent"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitAddAgent}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.addAgentFormVisible=!1}}},[e._v("取 消")])],1),e._v(" "),a("div",{staticClass:"clear"})],1),e._v(" "),a("el-dialog",{staticClass:"uploadadress",attrs:{title:"修改代理",visible:e.editAgentFormVisible,width:"600px"},on:{"update:visible":function(t){e.editAgentFormVisible=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.agentEditForm,"status-icon":"","label-width":"92px"}},[a("el-form-item",{attrs:{label:"代理人："}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch,placeholder:"请输入代理人姓名","trigger-on-focus":!1},on:{select:e.edithandleAgentFormSelect},model:{value:e.agentEditForm.userName,callback:function(t){e.$set(e.agentEditForm,"userName",t)},expression:"agentEditForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理期限："}},[a("el-date-picker",{staticStyle:{width:"217.5px"},attrs:{type:"date",placeholder:"选择开始日期"},model:{value:e.agentEditForm.beginDate,callback:function(t){e.$set(e.agentEditForm,"beginDate",t)},expression:"agentEditForm.beginDate"}}),e._v("   -   \n        "),a("el-date-picker",{staticStyle:{width:"217.5px"},attrs:{type:"date",placeholder:"选择结束日期"},model:{value:e.agentEditForm.endDate,callback:function(t){e.$set(e.agentEditForm,"endDate",t)},expression:"agentEditForm.endDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代理内容："}},[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.queryWorkflowSearch,placeholder:"请输入代理内容","trigger-on-focus":!1},on:{select:e.edithandleWorkflowFormSelect},model:{value:e.agentEditForm.workflowcontent,callback:function(t){e.$set(e.agentEditForm,"workflowcontent",t)},expression:"agentEditForm.workflowcontent"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitEidtProxy}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.editAgentFormVisible=!1}}},[e._v("取 消")])],1),e._v(" "),a("div",{staticClass:"clear"})],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(i,s,!1,function(e){a("GcZa")},"data-v-222bea48",null);t.default=l.exports}});
//# sourceMappingURL=8.29d5e46e4b0672c61670.js.map