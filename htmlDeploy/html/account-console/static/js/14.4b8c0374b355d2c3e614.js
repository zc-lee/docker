webpackJsonp([14],{jj89:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("6WVe"),n=a("ryJa"),o=a.n(n),s={name:"InvoiceList",data:function(){return{radio:0,filterTableData:[],excelData:[],totalTableData:[],excelTableData:[],totalTableData2:[],NewTableData:[],allTableData:[],currentPage:4,paginations:{page_index:1,total:0,page_size:10,page_sizes:[10,15,20],layout:"total, sizes, prev, pager, next, jumper"},isShow:!1,btnStyle:"icon-arrowdown",ruleForm2:{},search_data:{keyword:"",startTime:"",endTime:""},multipleSelection:[],tableInvoiceList:[{applyType:0,cirId:0,createTime:0,invoiceAmount:0,invoiceTitle:"",invoiceType:0,nature:0,orderList:[],registration:"",state:0,taxation:"",userName:"",zipCode:""}]}},created:function(){this.getInvoiceLists()},methods:{dateFormat:function(t,e){var a=t[e.property];return void 0===a?"":o()(a).format("YYYY-MM-DD")},dateFrm:function(t){return o()(t).format("YYYY-MM-DD")},getInvoiceLists:function(){var t=this;Object(i.m)().then(function(e){e.data.code===t.$global.successCode&&(t.allTableData=e.data.data.list,t.filterTableData=e.data.data.list,t.excelTableData=e.data.data.list,t.setPaginations())},function(t){console.log("请求发票列表信息数据失败",t)})},clearonScreeoutDate:function(){this.search_data.startTime="",this.search_data.endTime="",this.radio=null,this.getInvoiceLists()},onScreeoutDate:function(){var t=this;if(this.allTableData=[],this.totalTableData=[],this.totalTableData2=[],this.search_data.startTime&&this.search_data.endTime){var e=this.search_data.startTime.getTime(),a=this.search_data.endTime.getTime();this.totalTableData=this.filterTableData.filter(function(t){var i=new Date(t.createTime).getTime();return i>=e&&i<=a}),this.totalTableData.forEach(function(e){e.state==t.radio&&t.totalTableData2.push(e)}),this.allTableData=this.totalTableData2,this.setPaginations()}else this.$message({type:"warning",message:"请选择时间区间"})},handleSelectionChange:function(t){this.multipleSelection=t},handleCurrentChange:function(t){var e=this,a=this.paginations.page_size*(t-1),i=this.allTableData.filter(function(t,e){return e>=a});this.tableInvoiceList=i.filter(function(t,a){return a<e.paginations.page_size})},handleSizeChange:function(t){this.paginations.page_index=1,this.paginations.page_size=t,this.tableInvoiceList=this.allTableData.filter(function(e,a){return a<t})},setPaginations:function(){var t=this;this.paginations.total=this.allTableData.length,this.paginations.page_index=1,this.paginations.page_size=10,this.tableInvoiceList=this.allTableData.filter(function(e,a){return a<t.paginations.page_size})},cancellationInvoice:function(t,e){var a=this;this.$confirm("是否确定作废该发票","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={cirId:t,state:-1};Object(i.f)(e).then(function(t){t.data.code===a.$global.successCode&&a.getInvoiceLists()},function(t){console.log("请求应用数据失败",t)})}).catch(function(){})},downloadExcel:function(t){var e=this;this.excelData=[],this.$confirm("确定下载列表文件?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.excelTableData.forEach(function(a){a.cirId==t&&e.excelData.push(a)}),e.export2Excel()}).catch(function(){})},export2Excel:function(){var t=this;a.e(63).then(function(){var e=a("TCVE").export_json_to_excel,i=t.excelData;e(["申请日期","发票抬头","发票抬头类型","发票金额","发票性质","发票类型","发票状态"],t.formatJson(["createTime","invoiceTitle","applyType","invoiceAmount","nature","invoiceType","state"],i),"发票数据excel")}.bind(null,a)).catch(a.oe)},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[t._m(0),t._v(" "),a("div",{staticClass:"clear"}),t._v(" "),a("div",{staticClass:"btn_box"},[a("el-form",{ref:"search_data",attrs:{inline:!0,model:t.search_data}},[a("el-form-item",{attrs:{label:"申请时间："}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择开始日期"},model:{value:t.search_data.startTime,callback:function(e){t.$set(t.search_data,"startTime",e)},expression:"search_data.startTime"}}),t._v(" --\n        "),a("el-date-picker",{attrs:{type:"date",placeholder:"选择结束日期"},model:{value:t.search_data.endTime,callback:function(e){t.$set(t.search_data,"endTime",e)},expression:"search_data.endTime"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"发票状态："}},[a("el-radio",{attrs:{label:"0"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("可用")]),t._v(" "),a("el-radio",{attrs:{label:"-1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("不可用")])],1),t._v(" "),a("div",{staticClass:"clear"}),t._v(" "),a("el-form-item",{staticClass:"el-form-item1"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onScreeoutDate}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:t.clearonScreeoutDate}},[t._v("清空")])],1)],1)],1),t._v(" "),a("div",{staticClass:"clear morebtn_box"}),t._v(" "),a("div",{staticClass:"application_item2"},[a("div",{staticClass:"table_item"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tableInvoiceList,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"createTime",label:"申请日期",formatter:t.dateFormat,width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"invoiceTitle",label:"发票抬头",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"overflowdiv",staticStyle:{width:"130px"},attrs:{title:e.row.invoiceTitle}},[t._v(t._s(e.row.invoiceTitle))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"抬头类型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.row.applyType,expression:"scope.row.applyType == 1"}]},[t._v("企业")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.row.applyType,expression:"scope.row.applyType == 0"}]},[t._v("个人")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"invoiceAmount",label:"发票金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"发票性质",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.row.nature,expression:"scope.row.nature == 1"}],staticStyle:{color:"#ee7528"}},[t._v("其他")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.row.nature,expression:"scope.row.nature == 0"}]},[t._v("纸质")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发票类型",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.row.invoiceType,expression:"scope.row.invoiceType == 0"}],staticClass:"overflowdiv",staticStyle:{width:"130px"},attrs:{title:"企业增值税普通发票"}},[t._v("企业增值税普通发票")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.row.invoiceType,expression:"scope.row.invoiceType == 1"}],staticClass:"overflowdiv",staticStyle:{width:"130px"},attrs:{title:"增值税专用发票"}},[t._v("增值税专用发票")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:2==e.row.invoiceType,expression:"scope.row.invoiceType == 2"}],staticClass:"overflowdiv",staticStyle:{width:"130px"},attrs:{title:"组织（非企业）增值税普通发票"}},[t._v("组织（非企业）增值税普通发票")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"发票状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:-1==e.row.state,expression:"scope.row.state == -1"}],staticStyle:{color:"#ee7528"}},[t._v("不可用")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.row.state,expression:"scope.row.state == 0"}]},[t._v("可用")])]}}])}),t._v(" "),a("el-table-column"),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.cancellationInvoice(e.row.cirId,e.row.state)}}},[t._v("作废")]),a("b",[t._v("|")]),t._v(" "),a("el-button",{attrs:{type:"text"}},[a("router-link",{attrs:{to:"/invoice/invoice-info/"+e.row.cirId}},[t._v("详情")])],1),a("b",[t._v("|")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.downloadExcel(e.row.cirId)}}},[t._v("导出详情")])]}}])})],1)],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title_warp"},[e("h2",{staticClass:"title2"},[e("span",[this._v("财务管理")]),this._v(" > 发票列表")])])}]};var r=a("C7Lr")(s,l,!1,function(t){a("lQkt")},"data-v-fb7da9be",null);e.default=r.exports},lQkt:function(t,e){}});