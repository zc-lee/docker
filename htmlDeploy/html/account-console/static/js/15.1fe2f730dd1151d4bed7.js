webpackJsonp([15],{Ayr5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("hRKE"),l=a.n(o),i=a("Ln58"),s={props:["sapId","externalDataSourseName"],data:function(){return{addRoleForm:{},editRoleForm:{},table:{search:{keyword:""},pageObject:{page:1,sizes:20,total:100},dataList:[],dataListmodel:[]},visible:{editRoleVisible:!1,addRoleVisible:!1},cursapId:0}},methods:{tabOperation:function(e,t,a){this.$emit("taboperation",{roleId:e,externalDataSourseName:t,type:a})},getSapRoleLists:function(e){var t=this,a=Number(this.sapId);this.cursapId=Number(this.sapId),1===e&&(this.table.pageObject.page=1),Object(i.o)({sap_id:a,page:this.table.pageObject.page,size:this.table.pageObject.sizes,keyword:this.table.search.keyword}).then(function(e){e.data.code===t.$global.successCode&&(t.table.dataList=e.data.data.list,t.table.pageObject.total=e.data.data.total)})},addDicbtn:function(){this.addRoleForm.sapDataId=this.cursapId,this.visible.addRoleVisible=!0},addRoleSubmit:function(){var e=this;this.$refs.addRoleForm.validate(function(t){if(!t)return!1;Object(i.a)(e.addRoleForm).then(function(t){t.data.code===e.$global.successCode&&e.$message({message:"添加角色成功",type:"success"}),e.visible.addRoleVisible=!1,e.getSapRoleLists()})})},editRole:function(e){this.editRoleForm=e,this.editRoleForm.sapDataId=this.cursapId,this.visible.editRoleVisible=!0},editRoleSubmit:function(){var e=this;this.$refs.editRoleForm.validate(function(t){if(!t)return!1;Object(i.u)(e.editRoleForm).then(function(t){t.data.code===e.$global.successCode&&e.$message({message:"编辑角色成功",type:"success"}),e.visible.editRoleVisible=!1,e.getSapRoleLists()})})},deleteRole:function(e){var t=this;console.log(void 0===e?"undefined":l()(e)),this.$confirm("是否确定删除该角色","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.f)({id:e}).then(function(e){e.data.code===t.$global.successCode&&t.$message({message:"删除角色成功",type:"success"}),t.getSapRoleLists()})}).catch(function(){})},changePage:function(e){this.table.pageObject.page=e,this.getSapRoleLists()},changePageSize:function(e){this.table.pageObject.sizes=e,this.getSapRoleLists()}},created:function(){this.getSapRoleLists()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"application_item",staticStyle:{height:"calc(100vh - 153px)",padding:"0px"}},[a("div",{staticClass:"common-setting-tab-content"},[a("div",{staticClass:"common-transverse-operation"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addDicbtn}},[e._v("添加角色")]),e._v(" "),a("div",{staticClass:"search-input",staticStyle:{"margin-top":"-4px"}},[a("el-input",{attrs:{placeholder:"搜索 角色...","suffix-icon":"el-icon-search"},on:{change:function(t){return e.getSapRoleLists(1)}},model:{value:e.table.search.keyword,callback:function(t){e.$set(e.table.search,"keyword",t)},expression:"table.search.keyword"}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加角色",visible:e.visible.addRoleVisible,width:"600px"},on:{"update:visible":function(t){return e.$set(e.visible,"addRoleVisible",t)}}},[a("el-form",{ref:"addRoleForm",attrs:{model:e.addRoleForm,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"SAP数据源ID"}},[a("el-input",{attrs:{size:"medium",disabled:""},model:{value:e.addRoleForm.sapDataId,callback:function(t){e.$set(e.addRoleForm,"sapDataId",t)},expression:"addRoleForm.sapDataId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色名称",prop:"roleName",rules:[{required:!0,message:"请输入角色名称",trigger:"blur"}]}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入角色名称"},model:{value:e.addRoleForm.roleName,callback:function(t){e.$set(e.addRoleForm,"roleName",t)},expression:"addRoleForm.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色编码",prop:"roleCode",rules:[{required:!0,message:"请输入角色编码",trigger:"blur"}]}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入角色编码"},model:{value:e.addRoleForm.roleCode,callback:function(t){e.$set(e.addRoleForm,"roleCode",t)},expression:"addRoleForm.roleCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"字典描述"}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入字典描述"},model:{value:e.addRoleForm.roleRemark,callback:function(t){e.$set(e.addRoleForm,"roleRemark",t)},expression:"addRoleForm.roleRemark"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addRoleSubmit}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.visible.addRoleVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑角色",visible:e.visible.editRoleVisible,width:"600px"},on:{"update:visible":function(t){return e.$set(e.visible,"editRoleVisible",t)}}},[a("el-form",{ref:"editRoleForm",attrs:{model:e.editRoleForm,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"SAP数据源ID"}},[a("el-input",{attrs:{size:"medium",disabled:""},model:{value:e.editRoleForm.sapDataId,callback:function(t){e.$set(e.editRoleForm,"sapDataId",t)},expression:"editRoleForm.sapDataId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色名称",prop:"roleName",rules:[{required:!0,message:"请输入角色名称",trigger:"blur"}]}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入角色名称"},model:{value:e.editRoleForm.roleName,callback:function(t){e.$set(e.editRoleForm,"roleName",t)},expression:"editRoleForm.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色编码",prop:"roleCode",rules:[{required:!0,message:"请输入角色编码",trigger:"blur"}]}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入角色编码"},model:{value:e.editRoleForm.roleCode,callback:function(t){e.$set(e.editRoleForm,"roleCode",t)},expression:"editRoleForm.roleCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色描述"}},[a("el-input",{attrs:{size:"medium",placeholder:"请输入字典描述"},model:{value:e.editRoleForm.roleRemark,callback:function(t){e.$set(e.editRoleForm,"roleRemark",t)},expression:"editRoleForm.roleRemark"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.editRoleSubmit}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.visible.editRoleVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("div",{staticClass:"common-table"},[a("el-table",{ref:"postsTable",attrs:{data:e.table.dataList,height:"100%"}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#00aaee",cursor:"pointer"},on:{click:function(a){return e.editRole(t.row)}}},[e._v(e._s(t.row.roleName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"roleCode",label:"角色编码",width:"220"}}),e._v(" "),a("el-table-column"),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.tabOperation(t.row.roleId,t.row.roleId,2)}}},[e._v("用户管理")]),e._v(" "),a("b",[e._v("|")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.deleteRole(t.row.roleId)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"common-paging-content"},[a("el-pagination",{attrs:{"current-page":e.table.pageObject.page,"page-sizes":[10,20,50,100],"page-size":e.table.pageObject.sizes,layout:"total, sizes, prev, pager, next, jumper",total:e.table.pageObject.total},on:{"size-change":e.changePageSize,"current-change":e.changePage}})],1)],1)])},staticRenderFns:[]};var d=a("C7Lr")(s,r,!1,function(e){a("WbsK")},"data-v-fa590184",null);t.default=d.exports},WbsK:function(e,t){}});