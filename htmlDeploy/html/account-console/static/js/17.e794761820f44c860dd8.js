webpackJsonp([17],{"9RMr":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("L+8a"),o={data:function(){return{codeFormAdd:{},codeFormEdit:{code:"",description:"",maxValue:"",minValue:""},allTableData:[],tablePostList:[],filterTableData:[],pagination:{page:1,sizes:20,total:0,corId:9},setTree:[],tree:{props:{id:"id",label:"name",children:"children"},click:{organizeId:"",organizeName:"",idPath:"",type:0},data:[]},rules:{code:[{required:!0,message:"请输入编码",trigger:"blur"},{min:1,max:8,message:"长度在 1 到 8 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入描述",trigger:"blur"}],minValue:[{required:!0,message:"请输入最小值",trigger:"blur"}],maxValue:[{required:!0,message:"请输入最大值",trigger:"blur"}]},visible:{maxTypeAdd:!1,maxTypeEdit:!1},table:{search:{keyword:""}}}},mounted:function(){this.getMenuTrees(),this.getCodeLists(9)},methods:{setTrees:function(){for(var e=this.setTree,t=[],i=0;i<e.length;i++)if("9"==e[i].id){var a=e[i];a.label=e[i].name,a.children=[],t.push(a),e.splice(i,1),i--}!function t(i){if(0!=e.length)for(var a=0;a<i.length;a++){for(var o=0;o<e.length;o++)if(e[o].parentId==i[a].id){var s=e[o];s.label=e[o].name,s.children=[],i[a].children.push(s),e.splice(o,1),o--}t(i[a].children)}}(t),this.tree.data=t},clickTreeData:function(e){this.pagination.corId=e.id,this.getCodeLists(e.id),this.codeFormAdd={}},getMenuTrees:function(){var e=this;Object(a.D)().then(function(t){t.data.code===e.$global.successCode&&(e.setTree=t.data.data,e.setTrees())},function(e){console.log("数据请求失败",e)})},getCodeLists:function(){var e=this;Object(a.x)({menu_id:this.pagination.corId,page:this.pagination.page,size:this.pagination.sizes,keyword:this.table.search.keyword}).then(function(t){t.data.code===e.$global.successCode&&(e.allTableData=t.data.data.list,e.pagination.total=t.data.data.total)},function(e){console.log("请求数据失败",e)})},handleCurrentChange:function(e){this.pagination.page=e,this.getCodeLists()},handleSizeChange:function(e){this.pagination.sizes=e,this.getCodeLists()},addCodeSubmit:function(){var e=this;this.codeFormAdd.menuId=this.pagination.corId,this.$refs.codeForm.validate(function(t){if(!t)return!1;var i=e.codeFormAdd.menuId;e.codeFormAdd.maxValue=Number(e.codeFormAdd.maxValue),e.codeFormAdd.minValue=Number(e.codeFormAdd.minValue);var o=e.codeFormAdd;Object(a.a)(o).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"添加编码成功!",type:"success"}),e.getCodeLists(i),e.visible.maxTypeAdd=!1)},function(e){console.log("添加编码失败",e)})})},editCodes:function(e){this.codeFormEdit.code=e.code,this.codeFormEdit.description=e.description,this.codeFormEdit.maxValue=e.maxValue,this.codeFormEdit.minValue=e.minValue,this.codeFormEdit.menuId=this.pagination.corId,this.visible.maxTypeEdit=!0},updateCodeSubmit:function(){var e=this;this.$refs.codeForm1.validate(function(t){if(!t)return!1;var i=e.pagination.corId;e.codeFormEdit.maxValue=Number(e.codeFormEdit.maxValue),e.codeFormEdit.minValue=Number(e.codeFormEdit.minValue);var o=e.codeFormEdit;Object(a.Y)(o).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"编辑编码成功!",type:"success"}),e.getCodeLists(i),e.visible.maxTypeEdit=!1)},function(e){console.log("编辑编码失败",e)})})},deleteCodes:function(e){var t=this,i=this.pagination.corId;this.$confirm("是否确定删除该编码 "+this.tree.click.organizeName,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.j)({id:e}).then(function(e){e.data.code===t.$global.successCode&&(t.$message({message:"删除岗位成功!",type:"success"}),t.getCodeLists(i))})}).catch(function(){t.$message({message:"已取消!",type:"warning"})})}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main"},[e._m(0),e._v(" "),i("div",{staticClass:"clear"}),e._v(" "),i("div",{staticClass:"application_item",staticStyle:{height:"calc(100vh - 130px)",padding:"0"}},[i("div",{staticClass:"common-setting-tab-content"},[i("el-row",[i("el-col",{staticClass:"common-tab-content-left",attrs:{span:6}},[i("el-tree",{attrs:{data:e.tree.data,props:e.tree.props,"highlight-current":!0,"node-key":"id","default-expanded-keys":[9]},on:{"node-click":e.clickTreeData}})],1),e._v(" "),i("el-dialog",{attrs:{title:"添加编码",visible:e.visible.maxTypeAdd,width:"600px"},on:{"update:visible":function(t){return e.$set(e.visible,"maxTypeAdd",t)}}},[i("el-form",{ref:"codeForm",attrs:{model:e.codeFormAdd,"label-width":"70px",rules:e.rules}},[i("el-form-item",{attrs:{label:"编码",prop:"code"}},[i("el-input",{attrs:{size:"medium",placeholder:"请输入编码编号"},model:{value:e.codeFormAdd.code,callback:function(t){e.$set(e.codeFormAdd,"code",t)},expression:"codeFormAdd.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"description"}},[i("el-input",{attrs:{size:"medium",placeholder:"请输入编码名称"},model:{value:e.codeFormAdd.description,callback:function(t){e.$set(e.codeFormAdd,"description",t)},expression:"codeFormAdd.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最小值",prop:"minValue"}},[i("el-input",{attrs:{size:"medium",placeholder:"请输入最小值"},model:{value:e.codeFormAdd.minValue,callback:function(t){e.$set(e.codeFormAdd,"minValue",t)},expression:"codeFormAdd.minValue"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最大值",prop:"maxValue"}},[i("el-input",{attrs:{size:"medium",placeholder:"请输入最大值"},model:{value:e.codeFormAdd.maxValue,callback:function(t){e.$set(e.codeFormAdd,"maxValue",t)},expression:"codeFormAdd.maxValue"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addCodeSubmit}},[e._v("确 定")]),e._v(" "),i("el-button",{attrs:{size:"medium"},on:{click:function(t){e.visible.maxTypeAdd=!1}}},[e._v("取 消")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"编辑编码",visible:e.visible.maxTypeEdit,width:"600px"},on:{"update:visible":function(t){return e.$set(e.visible,"maxTypeEdit",t)}}},[i("el-form",{ref:"codeForm1",attrs:{model:e.codeFormEdit,"label-width":"70px",rules:e.rules}},[i("el-form-item",{attrs:{label:"编码",prop:"code"}},[i("el-input",{attrs:{size:"medium",disabled:!0},model:{value:e.codeFormEdit.code,callback:function(t){e.$set(e.codeFormEdit,"code",t)},expression:"codeFormEdit.code"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"description"}},[i("el-input",{attrs:{size:"medium",placeholder:"请输入编码名称"},model:{value:e.codeFormEdit.description,callback:function(t){e.$set(e.codeFormEdit,"description",t)},expression:"codeFormEdit.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最小值",prop:"minValue"}},[i("el-input",{attrs:{size:"medium",placeholder:"请输入最小值"},model:{value:e.codeFormEdit.minValue,callback:function(t){e.$set(e.codeFormEdit,"minValue",t)},expression:"codeFormEdit.minValue"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"最大值",prop:"maxValue"}},[i("el-input",{attrs:{size:"medium",placeholder:"请输入最大值"},model:{value:e.codeFormEdit.maxValue,callback:function(t){e.$set(e.codeFormEdit,"maxValue",t)},expression:"codeFormEdit.maxValue"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.updateCodeSubmit}},[e._v("确 定")]),e._v(" "),i("el-button",{attrs:{size:"medium"},on:{click:function(t){e.visible.maxTypeEdit=!1}}},[e._v("取 消")])],1)],1),e._v(" "),i("el-col",{staticClass:"common-tab-content-right",attrs:{span:18}},[i("div",{staticClass:"common-operation"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.visible.maxTypeAdd=!0}}},[e._v("添加编码")]),e._v(" "),i("div",{staticClass:"search-input"},[i("el-input",{attrs:{placeholder:"搜索编码名称","suffix-icon":"el-icon-search"},on:{change:e.getCodeLists},model:{value:e.table.search.keyword,callback:function(t){e.$set(e.table.search,"keyword",t)},expression:"table.search.keyword"}})],1)],1),e._v(" "),i("div",{staticClass:"common-table"},[i("el-table",{ref:"codeTable",attrs:{data:e.allTableData,height:"100%"}},[i("el-table-column",{attrs:{type:"index"}}),e._v(" "),i("el-table-column",{attrs:{prop:"code",label:"编码编号","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"description",label:"编码名称","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"minValue",label:"最小值","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"maxValue",label:"最大值","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column"),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.editCodes(t.row)}}},[e._v("编辑编码")]),e._v(" "),i("b",[e._v("|")]),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.deleteCodes(t.row.code)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":e.pagination.sizes,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total,"current-page":e.pagination.page},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)])],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_warp"},[t("h2",{staticClass:"title2"},[t("span",[this._v("系统设置")]),this._v(" > 编码管理\n    ")])])}]};var l=i("C7Lr")(o,s,!1,function(e){i("9bfu")},"data-v-f06ccb1e",null);t.default=l.exports},"9bfu":function(e,t){}});