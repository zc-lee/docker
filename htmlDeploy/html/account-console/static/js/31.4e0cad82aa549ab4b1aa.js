webpackJsonp([31],{T5Qn:function(t,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=o("GqZ+"),n=o("KNHM"),a=(o("uAC3"),{name:"ApplicationOpen",data:function(){return{test:"444466666666666",visiblediscount1:!1,visiblediscount3:!1,visiblediscount12:!1,visiblediscount24:!1,visiblediscount36:!1,visiblediscount60:!1,Discount1:0,Discount3:0,Discount12:0,Discount36:0,Discount24:0,Discount60:0,Month1:1,Month3:3,Month12:12,Month36:36,Month24:24,Month60:60,totalMoney:0,totalMoneyShow:0,curtab:0,imageFrontUrl:"",imageLicenseUrl:"",allTableData:[],allTotalData:[],tableApplications:{},applicationForm:{appId:0,buyNumber:0,totalAmount:0,useMonth:0},applicationReturnForm:{appName:"",cprId:0,totalAmount:0,useMonth:0},LabelArray:[],userOrigin:""}},created:function(){this.getApplications()},beforeDestroy:function(){},methods:{getApplications:function(){var t=this,i=JSON.parse(localStorage.getItem("console-user-token"));this.userOrigin=i.origin;var o=this.$route.params.appId;Object(s.e)(o).then(function(i){i.data.code===t.$global.successCode&&(t.tableApplications=i.data.data,t.fetchApplicationForm(),t.fetchdiscount())},function(t){console.log("请求应用数据失败",t)})},fetchApplicationForm:function(){var t=this;this.$route.params.appId;this.applicationForm.appId=this.tableApplications.appId,null!=this.tableApplications.discount&&this.tableApplications.discount.forEach(function(i){var o=i.month;o==t.Month1&&(t.Discount1=i.discount/10),o==t.Month3&&(t.Discount3=i.discount/10),o==t.Month12&&(t.Discount12=i.discount/10),o==t.Month24&&(t.Discount24=i.discount/10),o==t.Month36&&(t.Discount36=i.discount/10),o==t.Month60&&(t.Discount60=i.discount/10)})},handleChange:function(t){this.applicationForm.buyNumber=t,0==this.curtab&&this.onTotalMoney1(0,1),1==this.curtab&&this.onTotalMoney2(1,3),2==this.curtab&&this.onTotalMoney3(2,12),3==this.curtab&&this.onTotalMoney4(3,24),4==this.curtab&&this.onTotalMoney5(4,36),5==this.curtab&&this.onTotalMoney6(5,60)},fetchdiscount:function(){var t=this.Discount1,i=this.Discount3,o=this.Discount12,s=this.Discount24,n=this.Discount36,a=this.Discount60;0!=t&&(0==i&&(this.Discount3=this.Discount1,this.visiblediscount3=!0),0==o&&(this.Discount12=this.Discount1,this.visiblediscount12=!0),0==s&&(this.Discount24=this.Discount1,this.visiblediscount36=!0),0==n&&(this.Discount36=this.Discount1,this.visiblediscount36=!0),0==a&&(this.Discount60=this.Discount1,this.visiblediscount60=!0),this.visiblediscount1=!0),0!=i&&(0==o&&(this.Discount12=this.Discount3,this.visiblediscount12=!0),0==s&&(this.Discount24=this.Discount3,this.visiblediscount36=!0),0==n&&(this.Discount36=this.Discount3,this.visiblediscount36=!0),0==a&&(this.Discount60=this.Discount3,this.visiblediscount60=!0),this.visiblediscount3=!0),0!=o&&(0==s&&(this.Discount24=this.Discount12,this.visiblediscount24=!0),0==n&&(this.Discount36=this.Discount12,this.visiblediscount36=!0),0==a&&(this.Discount60=this.Discount12,this.visiblediscount60=!0),this.visiblediscount12=!0),0!=s&&(0==n&&(this.Discount36=this.Discount24,this.visiblediscount36=!0),0==a&&(this.Discount60=this.Discount24,this.visiblediscount60=!0),this.visiblediscount24=!0),0!=n&&(0==a&&(this.Discount60=this.Discount24,this.visiblediscount60=!0),this.visiblediscount36=!0),0!=a&&(this.visiblediscount60=!0)},onTotalMoney1:function(t,i){this.curtab=t,null!=this.tableApplications.discount&&0!=this.Discount1?this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),Object(n.b)(this.applicationForm.buyNumber,this.Discount1/10)):this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),this.applicationForm.buyNumber),this.applicationForm.useMonth=i,this.applicationForm.totalAmount=this.totalMoney},onTotalMoney2:function(t,i){this.curtab=t,null!=this.tableApplications.discount&&0!=this.Discount3?this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),Object(n.b)(this.applicationForm.buyNumber,this.Discount3/10)):this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),this.applicationForm.buyNumber),this.applicationForm.useMonth=i,this.applicationForm.totalAmount=this.totalMoney},onTotalMoney3:function(t,i){this.curtab=t,null!=this.tableApplications.discount&&0!=this.Discount12?this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),Object(n.b)(this.applicationForm.buyNumber,this.Discount12/10)):this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),this.applicationForm.buyNumber),this.applicationForm.useMonth=i,this.applicationForm.totalAmount=this.totalMoney},onTotalMoney4:function(t,i){this.curtab=t,null!=this.tableApplications.discount&&0!=this.Discount24?this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),Object(n.b)(this.applicationForm.buyNumber,this.Discount24/10)):this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),this.applicationForm.buyNumber),this.applicationForm.useMonth=i,this.applicationForm.totalAmount=this.totalMoney},onTotalMoney5:function(t,i){this.curtab=t,null!=this.tableApplications.discount&&0!=this.Discount36?this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),Object(n.b)(this.applicationForm.buyNumber,this.Discount36/10)):this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),this.applicationForm.buyNumber),this.applicationForm.useMonth=i,this.applicationForm.totalAmount=this.totalMoney},onTotalMoney6:function(t,i){this.curtab=t,null!=this.tableApplications.discount&&0!=this.Discount60?this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),Object(n.b)(this.applicationForm.buyNumber,this.Discount60/10)):this.totalMoney=Object(n.b)(Object(n.b)(i,this.tableApplications.money),this.applicationForm.buyNumber),this.applicationForm.useMonth=i,this.applicationForm.totalAmount=this.totalMoney},buySubmitForm:function(){var t=this,i=[];i.push(this.applicationForm);var o=this.tableApplications.money,n=this.applicationForm.buyNumber,a=this.applicationForm.totalAmount,e=this.applicationForm.useMonth;null!=o&&null!=n&&null!=a&&null!=e?Object(s.c)(i).then(function(i){if(i.data.code===t.$global.successCode){t.applicationReturnForm=i.data;var o=i.data.data.payInfoNo;t.$router.push({path:"/invoice/invoice-buyList/"+o})}else console.log("提交购买数据失败",i)}).catch(function(t){console.log("提交购买数据失败",t)}):this.$message({message:"数据不完整或者应用的单价为0，无法提交购买请求!",type:"warning"})}}}),e={render:function(){var t=this,i=t.$createElement,o=t._self._c||i;return o("div",{staticClass:"main"},[o("div",{staticClass:"title_warp"},[o("h2",{staticClass:"title2"},[o("span",[t._v("应用管理>")]),"EDIAUTH"==this.userOrigin?o("span",{staticClass:"purchaseTitle"},[t._v("应用购买")]):o("span",{staticClass:"purchaseTitle"},[t._v("应用续费")])])]),t._v(" "),o("div",{staticClass:"clear"}),t._v(" "),o("div",{staticClass:"application_item main_content2"},[o("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.applicationForm,"status-icon":"","label-width":"100px"}},[o("el-form-item",{attrs:{label:"产品："}},[o("div",{staticClass:"tiapblock tiapblock2",attrs:{data:t.tableApplications}},[o("div",{staticClass:"img"},[o("img",{attrs:{src:t.tableApplications.appLogo,alt:""}})]),t._v(" "),o("div",{staticClass:"txt"},[o("h4",{staticStyle:{"line-height":"30px"}},[t._v(t._s(t.tableApplications.appName))]),t._v(" "),o("div",{staticClass:"clear"}),t._v(" "),o("p",{staticStyle:{"line-height":"20px","margin-top":"-10px",float:"left"}},[t._v(t._s(t.tableApplications.appContent))]),t._v(" "),o("div",{staticClass:"clear"})]),t._v(" "),o("i")])]),t._v(" "),o("el-form-item",{attrs:{label:"购买数量："}},[o("el-input-number",{attrs:{min:0,max:10,label:"描述文字"},on:{change:t.handleChange},model:{value:t.applicationForm.buyNumber,callback:function(i){t.$set(t.applicationForm,"buyNumber",i)},expression:"applicationForm.buyNumber"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"购买时长："},model:{value:t.applicationForm.useMonth,callback:function(i){t.$set(t.applicationForm,"useMonth",i)},expression:"applicationForm.useMonth"}},[o("ul",{staticClass:"buytime"},[o("li",{class:{active:0==t.curtab},on:{click:function(i){return t.onTotalMoney1(0,1)}}},[o("div",{model:{value:t.Month1,callback:function(i){t.Month1=i},expression:"Month1"}},[t._v("1个月")]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.visiblediscount1,expression:"visiblediscount1"}]},[t._v(t._s(t.Discount1)+"折")])]),t._v(" "),o("li",{class:{active:1==t.curtab},on:{click:function(i){return t.onTotalMoney2(1,3)}}},[o("div",{model:{value:t.Month3,callback:function(i){t.Month3=i},expression:"Month3"}},[t._v("3个月")]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.visiblediscount3,expression:"visiblediscount3"}]},[t._v(t._s(t.Discount3)+"折")])]),t._v(" "),o("li",{class:{active:2==t.curtab},on:{click:function(i){return t.onTotalMoney3(2,12)}}},[o("div",{model:{value:t.Month12,callback:function(i){t.Month12=i},expression:"Month12"}},[t._v("1年")]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.visiblediscount12,expression:"visiblediscount12"}]},[t._v(t._s(t.Discount12)+"折")])]),t._v(" "),o("li",{class:{active:3==t.curtab},on:{click:function(i){return t.onTotalMoney4(3,24)}}},[o("div",{model:{value:t.Month24,callback:function(i){t.Month24=i},expression:"Month24"}},[t._v("2年")]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.visiblediscount24,expression:"visiblediscount24"}]},[t._v(t._s(t.Discount24)+"折")])]),t._v(" "),o("li",{class:{active:4==t.curtab},on:{click:function(i){return t.onTotalMoney5(4,36)}}},[o("div",{model:{value:t.Month36,callback:function(i){t.Month36=i},expression:"Month36"}},[t._v("3年")]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.visiblediscount36,expression:"visiblediscount36"}]},[t._v(t._s(t.Discount36)+"折")])]),t._v(" "),o("li",{class:{active:5==t.curtab},on:{click:function(i){return t.onTotalMoney6(5,60)}}},[o("div",{model:{value:t.Month60,callback:function(i){t.Month60=i},expression:"Month60"}},[t._v("5年")]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.visiblediscount60,expression:"visiblediscount60"}]},[t._v(t._s(t.Discount60)+"折")])])])]),t._v(" "),o("el-form-item",{attrs:{label:"费用："}},[o("p",{staticClass:"moneytxt"},[o("b",{model:{value:t.applicationForm.totalAmount,callback:function(i){t.$set(t.applicationForm,"totalAmount",i)},expression:"applicationForm.totalAmount"}},[t._v(t._s(t.totalMoney))]),t._v("元")])]),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.buySubmitForm}},[t._v("立即购买")])],1)],1)],1)])},staticRenderFns:[]};var c=o("C7Lr")(a,e,!1,function(t){o("l+AV")},"data-v-8b01bd40",null);i.default=c.exports},"l+AV":function(t,i){}});