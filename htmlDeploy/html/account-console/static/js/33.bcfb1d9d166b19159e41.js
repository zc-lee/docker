webpackJsonp([33],{"8zkj":function(t,e){},sEMf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("6WVe"),i=(a("GqZ+"),a("ryJa")),r=a.n(i),n={name:"OrderList",data:function(){return{applicationTime:0,applicationName:"",allTableData:[],totalTableData:[],totalTableData2:[],NewTableData:[],buyTableData:[],buyTableData2:[],curtab:0,applicationReturnForm:{appName:"",cprId:0,totalAmount:0,useMonth:0},tableOrderList:[],finalOrder:[],pagination:{page:1,sizes:20,total:0,corId:9},isShow:!1,btnStyle:"icon-arrowdown",ruleForm2:{},currentPage:1,users:{},Tab_State:100}},created:function(){this.getUser(),this.getOrderLists(),this.getApplication()},methods:{getUser:function(){this.users=JSON.parse(localStorage.getItem("console-user-token"))},dateFormat:function(t,e){var a=t[e.property];return void 0===a?"":r()(a).format("YYYY-MM-DD")},dateFrm:function(t){return r()(t).format("YYYY-MM-DD")},getApplication:function(){},getOrderLists:function(t){var e=this;Object(s.o)({page:this.pagination.page,size:this.pagination.sizes,state:t}).then(function(t){t.data.code===e.$global.successCode&&(e.tableOrderList=t.data.data.list,e.pagination.total=t.data.data.total,e.finalOrder=t.data.data.list)},function(t){console.log("请求数据失败",t)})},getTablelist:function(){var t=this;!function(e,a){var s,i=[],r=[];(e=e.sort(function(t,e){return t[a]<e[a]?-1:1})).length&&(s=e[0][a]);for(var n in e)e[n][a]===s&&null!==e[n][a]?r.push(e[n]):(s=e[n][a],i.push(r),r=[e[n]]);i.push(r);var o=[];i.forEach(function(t,e){t.length&&o.push(t)}),t.finalOrder=o}(this.tableOrderList,"payInfoNo")},handleCurrentChange:function(t){this.pagination.page=t,100==this.Tab_State?this.getOrderLists():this.getOrderLists(this.Tab_State)},handleSizeChange:function(t){this.pagination.sizes=t,100==this.Tab_State?this.getOrderLists():this.getOrderLists(this.Tab_State)},onScreeoutState:function(t,e){1!==e&&0!==e&&-1!==e&&2!==e||(this.pagination.page=1),this.curtab=t,this.Tab_State=e,100==e?this.getOrderLists():this.getOrderLists(e)},handleSelectionChange:function(t){this.multipleSelection=t},onSubmitPay:function(t){var e=this;this.$confirm("是否确定提交该订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$router.push("/application/application-pay/"+t)}).catch(function(){})},onSubmitOrder:function(t){this.$router.push({path:"/invoice/invoice-buyList/"+t})},onSubmitCancel:function(t){var e=this;this.$confirm("是否确定取消该订单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.e)({payInfoNo:t}).then(function(t){t.data.code===e.$global.successCode&&e.getOrderLists()},function(t){console.log("取消订单信息数据失败",t)})}).catch(function(){})},orderNum:function(t){this.$router.push({path:"/capital/order-info/"+t})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main",staticStyle:{height:"calc(100vh - 198px)"}},[t._m(0),t._v(" "),a("div",{staticClass:"clear"}),t._v(" "),a("div",{staticClass:"application_item order-component",staticStyle:{height:"calc(100vh - 328px)"}},[a("div",{staticClass:"orderlistwarp"},[a("div",{staticClass:"application_data"},[a("el-form",{staticClass:"demo-ruleForm",attrs:{"status-icon":"","label-width":"100px"}},[a("ul",{staticClass:"buytime"},[a("li",{class:{active:0==t.curtab},on:{click:function(e){return t.onScreeoutState(0,100)}}},[a("div",[t._v("全部订单")])]),t._v(" "),a("li",{class:{active:2==t.curtab},on:{click:function(e){return t.onScreeoutState(2,1)}}},[a("div",[t._v("待付款")])]),t._v(" "),a("li",{class:{active:3==t.curtab},on:{click:function(e){return t.onScreeoutState(3,2)}}},[a("div",[t._v("已完成")])]),t._v(" "),a("li",{class:{active:4==t.curtab},on:{click:function(e){return t.onScreeoutState(4,-1)}}},[a("div",[t._v("已取消")])])])])],1),t._v(" "),a("div",{staticClass:"flex-list"},[t._m(1),t._v(" "),a("div",{staticClass:"orderlist-content",staticStyle:{height:"calc(100vh - 410px)",overflow:"auto","padding-bottom":"20px"}},[a("div",t._l(t.finalOrder,function(e){return a("div",{key:e.index,staticClass:"flex-list-item"},[1==e.items.length?a("div",[a("div",{staticClass:"flex-row head"},[a("div",{staticClass:"time"},[t._v(t._s(t.dateFrm(e.createTime)))]),t._v(" "),a("div",{staticClass:"order-id"},[t._v("交易号:"),a("router-link",{attrs:{to:"/capital/order-info/"+e.payInfoNo}},[t._v(t._s(e.payInfoNo))])],1),t._v(" "),a("div",{staticClass:"agent-name",staticStyle:{"padding-left":"200px"}},[a("a",{staticClass:"link",attrs:{href:"",target:"_blank"}},[a("span",{attrs:{title:""}},[t._v(t._s(e.userName))])])])]),t._v(" "),t._l(e.items,function(s){return a("div",{key:s.index},[a("div",{staticClass:"flex-row content",staticStyle:{position:"relative"}},[a("div",{staticClass:"order-id",staticStyle:{position:"absolute",top:"-33px",left:"350px"}},[t._v("购买时长："+t._s(s.useMonth)+" 个月")]),t._v(" "),a("div",{staticStyle:{position:"absolute",top:"-33px",left:"650px"}},[t._v(" 购买数量："+t._s(s.buyNumber)+" \n                 "),a("span",{directives:[{name:"show",rawName:"v-show",value:s.unit,expression:"item.unit"}]},[t._v("( "+t._s(s.unit)+" )")])]),t._v(" "),a("div",{staticClass:"flex-cell first cover Topborder"},[a("div",{staticClass:"title"},[a("span",{attrs:{title:""}},[t._v(t._s(s.appName))]),t._v(" "),a("div",{staticClass:"sub"},[a("span",{attrs:{title:""}},[t._v(t._s(s.appDesc))])])])]),t._v(" "),a("div",{staticClass:"flex-cell price"},[t._v("¥"+t._s(s.totalAmount))]),t._v(" "),a("div",{staticClass:"flex-cell wording"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.orderState,expression:"orderList.orderState == 1"}],staticClass:"black"},[t._v("待付款")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.orderState,expression:"orderList.orderState == 2"}],staticClass:"black"},[t._v("已完成")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:-1==e.orderState,expression:"orderList.orderState == -1"}],staticClass:"black"},[t._v("已取消")])]),t._v(" "),a("div",{staticClass:"flex-cell operating"},[a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.orderState,expression:"orderList.orderState == 0"}],staticClass:"link operating-btn btn1",on:{click:function(a){return t.onSubmitPay(e[0].payInfoNo)}}},[t._v("提交订单")]),t._v(" "),a("div",{staticClass:"clear"}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.orderState||1==e.orderState,expression:"orderList.orderState == 0 || orderList.orderState == 1 "}],staticClass:"link operating-btn cancelBtntop ",on:{click:function(a){return t.onSubmitOrder(e.payInfoNo)}}},[t._v("支付订单")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.orderState||1==e.orderState,expression:"orderList.orderState == 0 || orderList.orderState == 1 "}],staticClass:"link operating-btn cancelBtn",on:{click:function(a){return t.onSubmitCancel(e.payInfoNo)}}},[t._v("取消订单")])])])])})],2):a("div",{staticStyle:{position:"relative"}},[a("div",{staticClass:"doubleOrder"},[a("span",{staticClass:"time"},[t._v(t._s(t.dateFrm(e.createTime)))]),t._v(" "),a("span",{staticClass:"orderNum"},[t._v("交易号: "),a("span",{staticClass:"Num",on:{click:function(a){return t.orderNum(e.payInfoNo)}}},[t._v(t._s(e.payInfoNo))])]),t._v(" "),a("span",{staticClass:"agent-name",staticStyle:{"padding-left":"50px"}},[a("a",{staticClass:"link",attrs:{href:"",target:"_blank"}},[a("span",{attrs:{title:""}},[t._v(t._s(e.userName))])])]),t._v(" "),a("span",{staticClass:"agent-name",staticStyle:{"padding-left":"60px"}},[a("a",{staticClass:"link",attrs:{href:"",target:"_blank"}},[a("span",{attrs:{title:""}},[t._v("总价：￥"+t._s(e.totalAmount))])])]),t._v(" "),a("i",{staticClass:"whiteBorder"})]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.orderState||1==e.orderState,expression:"orderList.orderState == 0 || orderList.orderState == 1 "}],staticClass:"link operating-btn cancelBtnDoubleTop ",on:{click:function(a){return t.onSubmitOrder(e.payInfoNo)}}},[t._v("支付订单")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.orderState||1==e.orderState,expression:"orderList.orderState == 0 || orderList.orderState == 1 "}],staticClass:"link operating-btn cancelBtn",on:{click:function(a){return t.onSubmitCancel(e.payInfoNo)}}},[t._v("取消订单")]),t._v(" "),t._l(e.items,function(s){return a("div",{key:s.index},[a("div",{staticClass:"flex-row head"}),t._v(" "),a("div",{staticClass:"flex-row content"},[a("div",{staticClass:"flex-cell first cover",attrs:{id:"orderHead"}},[a("div",{staticClass:"title",staticStyle:{width:"200px"}},[a("span",{attrs:{title:""}},[t._v(t._s(s.appName))]),t._v(" "),a("div",{staticClass:"sub"},[a("span",{attrs:{title:""}},[t._v(t._s(s.appDesc))])])]),t._v(" "),a("div",{staticClass:"order-id purchaseOrder"},[t._v("订单号:"+t._s(s.orderNo))]),t._v(" "),a("div",{staticClass:"order-id purchaseTime"},[t._v("购买时长："+t._s(s.useMonth)+" 个月")]),t._v(" "),a("div",{staticClass:"order-id purchaseNub"},[t._v("购买数量："+t._s(s.buyNumber)+" \n                         "),a("span",{directives:[{name:"show",rawName:"v-show",value:s.unit,expression:"item.unit"}]},[t._v("( "+t._s(s.unit)+" )")])])]),t._v(" "),a("div",{staticClass:"flex-cell price",staticStyle:{"border-top":"1px solid #e4e7ed"}},[t._v("¥"+t._s(s.totalAmount))]),t._v(" "),a("div",{staticClass:"flex-cell wording",staticStyle:{"border-top":"1px solid #e4e7ed"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.orderState,expression:"orderList.orderState == 0"}],staticClass:"black"},[t._v("待提交")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.orderState,expression:"orderList.orderState == 1"}],staticClass:"black"},[t._v("待付款")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==e.orderState,expression:"orderList.orderState == 2"}],staticClass:"black"},[t._v("已完成")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:-1==e.orderState,expression:"orderList.orderState == -1"}],staticClass:"black"},[t._v("已取消")])]),t._v(" "),a("div",{staticClass:"flex-cell operating"})])])})],2)])}),0)])])]),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":t.pagination.sizes,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total,"current-page":t.pagination.page},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title_warp"},[e("h2",{staticClass:"title2"},[e("span",[this._v("财务管理")]),this._v(" > 订单管理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex-list-header"},[e("div",{staticClass:"flex-row"},[e("div",{staticClass:"flex-cell first"},[this._v("订单名称")]),this._v(" "),e("div",{staticClass:"flex-cell"},[this._v("价格")]),this._v(" "),e("div",{staticClass:"flex-cell"},[this._v("状态")]),this._v(" "),e("div",{staticClass:"flex-cell"},[this._v("操作")])])])}]};var l=a("C7Lr")(n,o,!1,function(t){a("8zkj")},"data-v-70ba53fa",null);e.default=l.exports}});