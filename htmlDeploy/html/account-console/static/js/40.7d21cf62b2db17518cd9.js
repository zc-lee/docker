webpackJsonp([40],{AwVf:function(t,e){},pVSs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("pcot"),i=a("ryJa"),s=a.n(i),o={name:"innerMsg",data:function(){return{curtab:0,innerMsgList:[{}],pagination:{page:1,sizes:20,total:0,corId:9},isShow:!1,btnStyle:"icon-arrowdown",ruleForm2:{},currentPage:1,allTableData:[],totalTableData:[],totalTableData2:[],multipleSelection:[],camIdForm:{camIds:[]}}},created:function(){this.getMsgLists()},methods:{dateFormat:function(t,e){var a=t[e.property];return void 0===a?"":s()(a).format("YYYY-MM-DD HH:mm:ss")},dateFrm:function(t){return s()(t).format("YYYY-MM-DD HH:mm:ss")},getMsgLists:function(t){var e=this;1!==t&&0!==t&&-1!==t||(this.pagination.page=1),Object(n.j)({page:this.pagination.page,size:this.pagination.sizes,state:t}).then(function(t){t.data.code===e.$global.successCode&&(e.innerMsgList=t.data.data.list,e.pagination.total=t.data.data.total)},function(t){console.log("请求数据失败",t)})},handleCurrentChange:function(t){this.pagination.page=t,this.getMsgLists()},handleSizeChange:function(t){this.pagination.sizes=t,this.getMsgLists()},onScreeoutState:function(t,e){this.totalTableData2=[],this.curtab=t,100==e?this.getMsgLists():this.getMsgLists(e)},handleSelectionChange:function(t){var e=this;this.camIdForm.camIds=[],this.multipleSelection=t,this.multipleSelection.forEach(function(t){e.camIdForm.camIds.push(t.camId)})},onSubmitDelete:function(){var t=this;this.$confirm("是否确定删除消息","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.camIdForm;Object(n.d)(e).then(function(e){e.data.code===t.$global.successCode&&t.getMsgLists()},function(t){console.log("删除消息失败",t)})}).catch(function(){})},onSubmitRead:function(){var t=this;this.$confirm("是否确定标为已读？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.camIdForm;Object(n.q)(e).then(function(e){e.data.code===t.$global.successCode&&t.getMsgLists()},function(t){console.log("消息修改失败",t)})}).catch(function(){})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[t._m(0),t._v(" "),a("div",{staticClass:"clear"}),t._v(" "),a("div",{staticClass:"application_item order-component"},[a("div",{staticClass:"orderlistwarp"},[a("div",{staticClass:"application_data"},[a("el-form",{staticClass:"demo-ruleForm",attrs:{"status-icon":"","label-width":"100px"}},[a("ul",{staticClass:"buytime"},[a("li",{class:{active:0==t.curtab},on:{click:function(e){return t.onScreeoutState(0,100)}}},[a("div",[t._v("全部消息")])]),t._v(" "),a("li",{class:{active:1==t.curtab},on:{click:function(e){return t.onScreeoutState(1,0)}}},[a("div",[t._v("未读消息")])]),t._v(" "),a("li",{class:{active:2==t.curtab},on:{click:function(e){return t.onScreeoutState(2,1)}}},[a("div",[t._v("已读消息")])])])])],1),t._v(" "),a("div",{staticClass:"table_item"},[a("el-table",{ref:"multipleTable",staticClass:"msgtable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.innerMsgList,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"消息标题",align:"left"}}),t._v(" "),a("el-table-column",{attrs:{prop:"content",label:"消息内容"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"时间",formatter:t.dateFormat}}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.row.state,expression:"scope.row.state == 1"}]},[t._v("已读")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.row.state,expression:"scope.row.state == 0"}]},[t._v("未读")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"}},[a("router-link",{attrs:{to:"/inner-messageinfo/"+e.row.camId}},[t._v("详情")])],1)]}}])})],1),t._v(" "),a("div",{staticClass:"clear"}),t._v(" "),a("div",{staticClass:"invoice_alert2 invoice_alert2_2"},[a("el-button",{attrs:{type:"info",size:"mini",plain:""},on:{click:t.onSubmitRead}},[t._v("标为已读")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini",plain:""},on:{click:t.onSubmitDelete}},[t._v("批量删除")])],1)],1)]),t._v(" "),a("div",{staticClass:"clear"}),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-sizes":[10,20,50,100],"page-size":t.pagination.sizes,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total,"current-page":t.pagination.page},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title_warp"},[e("h2",{staticClass:"title1"},[this._v("消息管理")])])}]};var l=a("C7Lr")(o,c,!1,function(t){a("AwVf")},"data-v-4be1b3c2",null);e.default=l.exports}});