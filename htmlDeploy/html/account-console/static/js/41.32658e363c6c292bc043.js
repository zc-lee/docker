webpackJsonp([41],{YJhC:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=t("hRKE"),r=t.n(s),o=t("6WVe"),c=t("84iU"),a=t.n(c),n={name:"InvoiceAddress",data:function(){var e=function(e,i,t){if(""!==i){/^1[3456789]\d{9}$/.test(i)||t(new Error("请输入有效的手机号码"))}t()};return{province2:"",shi12:[],qu12:[],city2:"",block2:"",checked2:!1,mapJson:"./static/json/map.json",province:"",shi1:[],qu1:[],city:"",block:"",addAddressFormVisible:!1,editinvoiceAddressVisible:!1,tableInvoiceAddressList:[],invoiceAddressForm:{area:"",ciaId:0,city:"",mark:0,mobile:"",province:"",street:"",userName:"",zipCode:""},invoiceEidtAddressForm:{area:"",ciaId:0,city:"",mark:0,mobile:"",province:"",street:"",userName:"",zipCode:""},rules:{userName:[{required:!0,message:"收件人姓名不能为空",trigger:"blur"}],street:[{required:!0,message:"收件地址不能为空",trigger:"blur"}],zipCode:[{required:!0,message:"邮政编码不能为空",trigger:"blur"}],mobile:[{required:!0,message:"手机不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]},rules3:{userName:[{required:!0,message:"收件人姓名不能为空",trigger:"blur"}],street:[{required:!0,message:"收件地址不能为空",trigger:"blur"}],zipCode:[{required:!0,message:"邮政编码不能为空",trigger:"blur"}],mobile:[{required:!0,message:"手机不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]},checked:!1,multipleSelection:[],allTableData:[],allTableData3:[]}},created:function(){this.getInvoiceAddressLists()},methods:{getInvoiceAddressLists:function(){var e=this;Object(o.k)().then(function(i){i.data.code===e.$global.successCode&&(e.tableInvoiceAddressList=i.data.data,e.allTableData=i.data.data,e.allTableData3=i.data.data)},function(e){console.log("请求邮寄地址数据失败",e)})},handleSelectionChange:function(e){this.multipleSelection=e},openModal:function(){this.getCityData(),this.addAddressFormVisible=!0},onSubmitInvoiceAddress:function(){var e=this;this.$refs.invoiceAddressForm.validate(function(i){if(i){e.checked&&(e.invoiceAddressForm.mark=1);var t=e.invoiceAddressForm;Object(o.b)(t).then(function(i){i.data.code===e.$global.successCode&&(e.$message({message:"添加邮寄地址成功！",type:"success"}),e.getInvoiceAddressLists(),e.addAddressFormVisible=!1)},function(e){console.log("添加邮寄地址失败",e)})}})},deleteInvoiceAddress:function(e){var i=this;this.$confirm("是否确定删除该邮寄地址？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(o.i)({ciaId:e}).then(function(e){e.data.code===i.$global.successCode&&i.getInvoiceAddressLists()},function(e){console.log("删除开票信息数据失败",e)})}).catch(function(){})},changeAddressMark:function(e,i){var t=this;this.$confirm("是否确定设置为默认地址？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i={ciaId:e,mark:1};Object(o.g)(i).then(function(e){e.data.code===t.$global.successCode&&t.getInvoiceAddressLists()},function(e){console.log("修改默认地址失败",e)})}).catch(function(){})},getCityData:function(){var e=this;a.a.get(this.mapJson).then(function(i){if(200==i.status){var t=i.data;for(var s in e.province=[],e.city=[],e.block=[],t)s.match(/0000$/)?e.province.push({id:s,value:t[s],children:[]}):s.match(/00$/)?e.city.push({id:s,value:t[s],children:[]}):e.block.push({id:s,value:t[s]});for(var r in e.province)for(var o in e.city)e.province[r].id.slice(0,2)===e.city[o].id.slice(0,2)&&e.province[r].children.push(e.city[o]);for(var c in e.city)for(var a in e.block)e.block[a].id.slice(0,4)===e.city[c].id.slice(0,4)&&e.city[c].children.push(e.block[a])}}).catch(function(e){console.log(r()(+e))})},choseProvince:function(e){for(var i in this.province)e===this.province[i].id&&(this.shi1=this.province[i].children,this.invoiceAddressForm.province=this.province[i].value,this.invoiceAddressForm.city=this.province[i].children[0].value,this.qu1=this.province[i].children[0].children,this.invoiceAddressForm.area=this.province[i].children[0].children[0].value,this.E=this.qu1[0].id)},choseCity:function(e){for(var i in this.city)e===this.city[i].id&&(this.qu1=this.city[i].children,this.invoiceAddressForm.area=this.city[i].children[0].value,this.E=this.qu1[0].id)},choseBlock:function(e){this.E=e},addressedit:function(e){var i=this;this.getCityData2(),this.checked2=!1,this.invoiceEidtAddressForm=[],this.editinvoiceAddressVisible=!0,this.invoiceEidtAddressForm.ciaId=Number(e),this.allTableData3.forEach(function(t){var s=t.ciaId;e==s&&(1==t.mark&&(i.checked2=!0),i.invoiceEidtAddressForm=t)})},onSubmitEidtInvoiceAddress:function(){var e=this;this.$refs.invoiceEidtAddressForm.validate(function(i){if(i){e.checked2&&(e.invoiceEidtAddressForm.mark=1);var t=e.invoiceEidtAddressForm;Object(o.s)(t).then(function(i){i.data.code===e.$global.successCode&&(e.$message({message:"编辑邮寄地址信息数据成功！",type:"success"}),e.getInvoiceAddressLists(),e.editinvoiceAddressVisible=!1)},function(e){this.invoiceAddressVisible=!0,console.log("编辑邮寄地址信息数据失败",e)})}})},getCityData2:function(){var e=this;a.a.get(this.mapJson).then(function(i){if(200==i.status){var t=i.data;for(var s in e.province2=[],e.city2=[],e.block2=[],t)s.match(/0000$/)?e.province2.push({id:s,value:t[s],children:[]}):s.match(/00$/)?e.city2.push({id:s,value:t[s],children:[]}):e.block2.push({id:s,value:t[s]});for(var r in e.province2)for(var o in e.city2)e.province2[r].id.slice(0,2)===e.city2[o].id.slice(0,2)&&e.province2[r].children.push(e.city2[o]);for(var c in e.city2)for(var a in e.block2)e.block2[a].id.slice(0,4)===e.city2[c].id.slice(0,4)&&e.city2[c].children.push(e.block2[a])}}).catch(function(e){console.log(r()(+e))})},choseProvince2:function(e){for(var i in this.province2)e===this.province2[i].id&&(this.shi12=this.province2[i].children,this.invoiceEidtAddressForm.province=this.province2[i].value,this.invoiceEidtAddressForm.city=this.province2[i].children[0].value,this.qu12=this.province2[i].children[0].children,this.invoiceEidtAddressForm.area=this.province2[i].children[0].children[0].value,this.E=this.qu12[0].id)},choseCity2:function(e){for(var i in this.city2)e===this.city2[i].id&&(this.qu12=this.city2[i].children,this.invoiceEidtAddressForm.area=this.city2[i].children[0].value,this.E=this.qu12[0].id)},choseBlock2:function(e){this.E=e}}},l={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"main"},[e._m(0),e._v(" "),t("div",{staticClass:"clear"}),e._v(" "),t("div",{staticClass:"application_item"},[t("div",{staticClass:"table_item table_item2",staticStyle:{width:"96%","margin-left":"2%"}},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableInvoiceAddressList,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{prop:"userName",label:"收件人姓名",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{prop:"mobile",label:"电话号码",width:"150"}}),e._v(" "),t("el-table-column",{attrs:{prop:"zipCode",label:"邮编",width:"80"}}),e._v(" "),t("el-table-column",{attrs:{label:"地址",width:"300"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticClass:"overflowdiv",staticStyle:{width:"300px"},attrs:{title:i.row.province+i.row.city+i.row.area+i.row.street}},[e._v("\n              "+e._s(i.row.province)+e._s(i.row.city)+e._s(i.row.area)+e._s(i.row.street)+"\n            ")])]}}])}),e._v(" "),t("el-table-column"),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",{directives:[{name:"show",rawName:"v-show",value:1==i.row.mark,expression:"scope.row.mark == 1"}],staticClass:"defaultaddrss"},[e._v("默认地址")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:0==i.row.mark,expression:"scope.row.mark == 0"}],attrs:{type:"text"},on:{click:function(t){return e.changeAddressMark(i.row.ciaId,i.row.mark)}}},[e._v("设为默认")]),e._v(" "),t("b",[e._v("|")]),t("el-button",{staticClass:"renewbtn",attrs:{type:"text"},on:{click:function(t){return e.addressedit(i.row.ciaId)}}},[e._v("修改")]),t("b",[e._v("|")]),e._v(" "),t("el-button",{staticClass:"renewbtn",attrs:{type:"text"},on:{click:function(t){return e.deleteInvoiceAddress(i.row.ciaId)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),t("div",{staticClass:"clear"}),e._v(" "),t("div",{staticClass:"invoice_alert2 invoice_alert2_1",staticStyle:{width:"94%","margin-left":"2%"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.openModal}},[e._v("新增邮寄地址")])],1)]),e._v(" "),t("el-dialog",{staticClass:"uploadadress",attrs:{title:"新增发票邮寄地址",visible:e.addAddressFormVisible,width:"600px"},on:{"update:visible":function(i){e.addAddressFormVisible=i}}},[t("el-form",{ref:"invoiceAddressForm",staticClass:"demo-ruleForm",attrs:{model:e.invoiceAddressForm,rules:e.rules,"status-icon":"","label-width":"107px"}},[t("el-form-item",{attrs:{label:"收件人姓名：",prop:"userName"}},[t("el-input",{attrs:{placeholder:"请输入收件人姓名"},model:{value:e.invoiceAddressForm.userName,callback:function(i){e.$set(e.invoiceAddressForm,"userName",i)},expression:"invoiceAddressForm.userName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"区域：",prop:"street"}},[t("el-select",{staticStyle:{width:"148px"},attrs:{placeholder:"省级地区"},on:{change:e.choseProvince},model:{value:e.invoiceAddressForm.province,callback:function(i){e.$set(e.invoiceAddressForm,"province",i)},expression:"invoiceAddressForm.province"}},e._l(e.province,function(e){return t("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1),e._v(" "),t("el-select",{staticStyle:{width:"148px"},attrs:{placeholder:"市级地区"},on:{change:e.choseCity},model:{value:e.invoiceAddressForm.city,callback:function(i){e.$set(e.invoiceAddressForm,"city",i)},expression:"invoiceAddressForm.city"}},e._l(e.shi1,function(e){return t("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1),e._v(" "),t("el-select",{staticStyle:{width:"148px"},attrs:{placeholder:"区级地区"},on:{change:e.choseBlock},model:{value:e.invoiceAddressForm.area,callback:function(i){e.$set(e.invoiceAddressForm,"area",i)},expression:"invoiceAddressForm.area"}},e._l(e.qu1,function(e){return t("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"详细地址：",prop:"street"}},[t("el-input",{staticClass:"inputtxt",attrs:{placeholder:"请输入具体地址"},model:{value:e.invoiceAddressForm.street,callback:function(i){e.$set(e.invoiceAddressForm,"street",i)},expression:"invoiceAddressForm.street"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮政编码：",prop:"zipCode"}},[t("el-input",{attrs:{placeholder:"请输入邮政编码"},model:{value:e.invoiceAddressForm.zipCode,callback:function(i){e.$set(e.invoiceAddressForm,"zipCode",i)},expression:"invoiceAddressForm.zipCode"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号码：",prop:"mobile"}},[t("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.invoiceAddressForm.mobile,callback:function(i){e.$set(e.invoiceAddressForm,"mobile",i)},expression:"invoiceAddressForm.mobile"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-top":"-10px","margin-bottom":"15px"}},[t("el-checkbox",{model:{value:e.checked,callback:function(i){e.checked=i},expression:"checked"}},[e._v("设为默认地址")])],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitInvoiceAddress}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(i){e.addAddressFormVisible=!1}}},[e._v("取 消")])],1),e._v(" "),t("div",{staticClass:"clear"})],1),e._v(" "),t("el-dialog",{staticClass:"uploadadress",attrs:{title:"编辑发票邮寄地址",visible:e.editinvoiceAddressVisible,width:"600px"},on:{"update:visible":function(i){e.editinvoiceAddressVisible=i}}},[t("el-form",{ref:"invoiceEidtAddressForm",staticClass:"demo-ruleForm",attrs:{model:e.invoiceEidtAddressForm,rules:e.rules3,"status-icon":"","label-width":"107px"}},[t("el-form-item",{attrs:{label:"收件人姓名：",prop:"userName"}},[t("el-input",{attrs:{placeholder:"请输入收件人姓名"},model:{value:e.invoiceEidtAddressForm.userName,callback:function(i){e.$set(e.invoiceEidtAddressForm,"userName",i)},expression:"invoiceEidtAddressForm.userName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"区域：",prop:"street"}},[t("el-select",{staticStyle:{width:"148px"},attrs:{placeholder:"省级地区"},on:{change:e.choseProvince2},model:{value:e.invoiceEidtAddressForm.province,callback:function(i){e.$set(e.invoiceEidtAddressForm,"province",i)},expression:"invoiceEidtAddressForm.province"}},e._l(e.province2,function(e){return t("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1),e._v(" "),t("el-select",{staticStyle:{width:"148px"},attrs:{placeholder:"市级地区"},on:{change:e.choseCity2},model:{value:e.invoiceEidtAddressForm.city,callback:function(i){e.$set(e.invoiceEidtAddressForm,"city",i)},expression:"invoiceEidtAddressForm.city"}},e._l(e.shi12,function(e){return t("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1),e._v(" "),t("el-select",{staticStyle:{width:"148px"},attrs:{placeholder:"区级地区"},on:{change:e.choseBlock2},model:{value:e.invoiceEidtAddressForm.area,callback:function(i){e.$set(e.invoiceEidtAddressForm,"area",i)},expression:"invoiceEidtAddressForm.area"}},e._l(e.qu12,function(e){return t("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"详细地址：",prop:"street"}},[t("el-input",{staticClass:"inputtxt",attrs:{placeholder:"请输入具体地址"},model:{value:e.invoiceEidtAddressForm.street,callback:function(i){e.$set(e.invoiceEidtAddressForm,"street",i)},expression:"invoiceEidtAddressForm.street"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"邮政编码：",prop:"zipCode"}},[t("el-input",{attrs:{placeholder:"请输入邮政编码"},model:{value:e.invoiceEidtAddressForm.zipCode,callback:function(i){e.$set(e.invoiceEidtAddressForm,"zipCode",i)},expression:"invoiceEidtAddressForm.zipCode"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号码：",prop:"mobile"}},[t("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.invoiceEidtAddressForm.mobile,callback:function(i){e.$set(e.invoiceEidtAddressForm,"mobile",i)},expression:"invoiceEidtAddressForm.mobile"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-top":"-10px","margin-bottom":"15px"}},[t("el-checkbox",{model:{value:e.checked2,callback:function(i){e.checked2=i},expression:"checked2"}},[e._v("设为默认地址")])],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitEidtInvoiceAddress}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(i){e.editinvoiceAddressVisible=!1}}},[e._v("取 消")])],1),e._v(" "),t("div",{staticClass:"clear"})],1)],1)},staticRenderFns:[function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"title_warp"},[i("h2",{staticClass:"title2"},[i("span",[this._v("财务管理")]),this._v(">发票寄送地址管理")])])}]};var d=t("C7Lr")(n,l,!1,function(e){t("zk8s")},"data-v-44c5d11d",null);i.default=d.exports},zk8s:function(e,i){}});