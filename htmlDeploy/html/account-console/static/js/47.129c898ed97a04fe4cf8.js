webpackJsonp([47],{UWDh:function(e,t){},cckR:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Ln58"),r={props:["roleId"],data:function(){return{addUserForm:{},deleteUserForm:{},editUserForm1:{type:0},editUserForm2:{type:1},table:{search:{keyword:""},pageObject:{page:1,sizes:20,total:100},dataList:[],dataListmodel:[]},visible:{editUserVisible1:!1,editUserVisible2:!1,addUserVisible:!1},rolepeople:{search:{keyword:"",roleid:"1"},pageObject:{page:1,sizes:20,total:0},roleId:"",dataList:[],dataListmodel:[]},curroleId:0}},methods:{back:function(){this.$router.go(-1)},addpeopleUpdate:function(e){var t=this,s=Number(this.roleId);1===e&&(this.rolepeople.pageObject.page=1),Object(a.k)({role_id:s,page:this.rolepeople.pageObject.page,size:this.rolepeople.pageObject.sizes,keyword:this.rolepeople.search.keyword}).then(function(e){e.data.code===t.$global.successCode&&(t.rolepeople.dataList=e.data.data.list,t.rolepeople.pageObject.total=e.data.data.total)})},getSapUserLists:function(e){var t=this,s=Number(this.roleId);this.curroleId=s,1===e&&(this.table.pageObject.page=1),Object(a.r)({role_id:s,page:this.table.pageObject.page,size:this.table.pageObject.sizes,keyword:this.table.search.keyword}).then(function(e){e.data.code===t.$global.successCode&&(t.table.dataList=e.data.data.list,t.table.pageObject.total=e.data.data.total)})},addDicbtn:function(){var e=this;this.addUserForm.userIdList=[],this.addUserForm.roleId=Number(this.roleId);var t=Number(this.roleId);this.visible.addUserVisible=!0,Object(a.k)({role_id:t,page:this.rolepeople.pageObject.page,size:this.rolepeople.pageObject.sizes}).then(function(t){t.data.code===e.$global.successCode&&(e.rolepeople.dataList=t.data.data.list,e.rolepeople.pageObject.total=t.data.data.total)})},handleSelectionChange:function(e){var t=this;this.addUserForm.userIdList=[],this.multipleSelection=e,this.multipleSelection.forEach(function(e){t.addUserForm.userIdList.push(e.userId)})},addUserSubmit:function(){var e=this;0==this.addUserForm.userIdList.length?this.$message({message:"请选择需要分配的人员",type:"warning"}):Object(a.d)(this.addUserForm).then(function(t){t.data.code===e.$global.successCode&&e.$message({message:"添加用户成功",type:"success"}),e.visible.addUserVisible=!1,e.getSapUserLists()})},editUser:function(e,t){0==t&&(this.visible.editUserVisible1=!0,this.editUserForm1=e),1==t&&(this.visible.editUserVisible2=!0,this.editUserForm2=e)},editUserSubmit:function(e){var t=this;0==e&&(this.editUserForm1.type=0,this.$refs.editUserForm1.validate(function(e){if(!e)return!1;Object(a.w)(t.editUserForm1).then(function(e){e.data.code===t.$global.successCode&&t.$message({message:"用户云条码配置成功",type:"success"}),t.visible.editUserVisible1=!1,t.getSapUserLists()})})),1==e&&(this.editUserForm2.type=1,this.$refs.editUserForm2.validate(function(e){if(!e)return!1;Object(a.w)(t.editUserForm2).then(function(e){e.data.code===t.$global.successCode&&t.$message({message:"用户SAP编号配置成功",type:"success"}),t.visible.editUserVisible2=!1,t.getSapUserLists()})}))},deleteUser:function(e){var t=this;this.deleteUserForm.roleId=this.curroleId,this.deleteUserForm.userId=e,this.$confirm("是否确定删除该用户","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.i)(t.deleteUserForm).then(function(e){e.data.code===t.$global.successCode&&t.$message({message:"删除用户成功",type:"success"}),t.getSapUserLists()})}).catch(function(){})},changePage:function(e){this.table.pageObject.page=e,this.getSapUserLists()},changePageSize:function(e){this.table.pageObject.sizes=e,this.getSapUserLists()},handleCurrentChange2:function(e){this.rolepeople.pageObject.page=e,this.addpeopleUpdate(this.roleaddpeople.roleId)},handleSizeChange2:function(e){this.rolepeople.pageObject.sizes=e,this.addpeopleUpdate(this.roleaddpeople.roleId)}},created:function(){this.getSapUserLists()}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"application_item",staticStyle:{height:"calc(100vh - 153px)",padding:"0px"}},[s("div",{staticClass:"common-setting-tab-content"},[s("div",{staticClass:"common-transverse-operation"},[s("el-button",{attrs:{type:"primary"},on:{click:e.addDicbtn}},[e._v("添加用户")]),e._v(" "),s("div",{staticClass:"search-input",staticStyle:{"margin-top":"-4px"}},[s("el-input",{attrs:{placeholder:"搜索 用户...","suffix-icon":"el-icon-search"},on:{change:function(t){return e.getSapUserLists(1)}},model:{value:e.table.search.keyword,callback:function(t){e.$set(e.table.search,"keyword",t)},expression:"table.search.keyword"}})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"添加用户",visible:e.visible.addUserVisible,width:"600px"},on:{"update:visible":function(t){return e.$set(e.visible,"addUserVisible",t)}}},[s("div",{staticStyle:{"margin-bottom":"20px"}},[s("el-input",{staticStyle:{float:"left",width:"480px"},attrs:{placeholder:"搜索人员名称","suffix-icon":"el-icon-search"},on:{change:function(t){return e.addpeopleUpdate(1)}},model:{value:e.rolepeople.search.keyword,callback:function(t){e.$set(e.rolepeople.search,"keyword",t)},expression:"rolepeople.search.keyword"}}),e._v(" "),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.addUserSubmit}},[e._v("分配")])],1),e._v(" "),s("div",[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolepeople.dataList,height:"300"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{staticStyle:{"text-align":"left"},attrs:{prop:"userName",label:"姓名"}}),e._v(" "),s("el-table-column",{staticStyle:{"text-align":"left"},attrs:{prop:"mobile",label:"电话"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{"current-page":e.rolepeople.pageObject.page,"page-sizes":[10,20,50,100],"page-size":e.rolepeople.pageObject.sizes,layout:"total, sizes, prev, pager, next, jumper",total:e.rolepeople.pageObject.total},on:{"size-change":e.handleSizeChange2,"current-change":e.handleCurrentChange2}})],1)])]),e._v(" "),s("el-dialog",{attrs:{title:"云条码配置",visible:e.visible.editUserVisible1,width:"600px"},on:{"update:visible":function(t){return e.$set(e.visible,"editUserVisible1",t)}}},[s("el-form",{ref:"editUserForm1",attrs:{model:e.editUserForm1,"label-width":"110px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"userName",rules:[{required:!0,message:"请输入用户名称",trigger:"blur"}]}},[s("el-input",{attrs:{size:"medium",placeholder:"请输入用户名称"},model:{value:e.editUserForm1.userName,callback:function(t){e.$set(e.editUserForm1,"userName",t)},expression:"editUserForm1.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"SAP姓名",prop:"sapWorkName",rules:[{required:!0,message:"请输入SAP姓名",trigger:"blur"}]}},[s("el-input",{attrs:{size:"medium",placeholder:"请输入SAP姓名"},model:{value:e.editUserForm1.sapWorkName,callback:function(t){e.$set(e.editUserForm1,"sapWorkName",t)},expression:"editUserForm1.sapWorkName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"SAP工号",prop:"sapWorkNumber",rules:[{required:!0,message:"请输入SAP工号",trigger:"blur"}]}},[s("el-input",{attrs:{size:"medium",placeholder:"请输入SAP工号"},model:{value:e.editUserForm1.sapWorkNumber,callback:function(t){e.$set(e.editUserForm1,"sapWorkNumber",t)},expression:"editUserForm1.sapWorkNumber"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"Dbwork工号",prop:"dworkId",rules:[{required:!0,message:"请输入SAP工号",trigger:"blur"}]}},[s("el-input",{attrs:{size:"medium",placeholder:"请输入Dbwork工号"},model:{value:e.editUserForm1.dworkId,callback:function(t){e.$set(e.editUserForm1,"dworkId",t)},expression:"editUserForm1.dworkId"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.editUserSubmit(0)}}},[e._v("确 定")]),e._v(" "),s("el-button",{attrs:{size:"medium"},on:{click:function(t){e.visible.editUserVisible1=!1}}},[e._v("取 消")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"SAP编号配置",visible:e.visible.editUserVisible2,width:"600px"},on:{"update:visible":function(t){return e.$set(e.visible,"editUserVisible2",t)}}},[s("el-form",{ref:"editUserForm2",attrs:{model:e.editUserForm2,"label-width":"110px"}},[s("el-form-item",{attrs:{label:"用户名",prop:"userName",rules:[{required:!0,message:"请输入用户名称",trigger:"blur"}]}},[s("el-input",{attrs:{size:"medium",placeholder:"请输入用户名称"},model:{value:e.editUserForm2.userName,callback:function(t){e.$set(e.editUserForm2,"userName",t)},expression:"editUserForm2.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"SAP用户编号",prop:"sapUserId",rules:[{required:!0,message:"请输入SAP用户编号",trigger:"blur"}]}},[s("el-input",{attrs:{size:"medium",placeholder:"请输入SAP用户编号"},model:{value:e.editUserForm2.sapUserId,callback:function(t){e.$set(e.editUserForm2,"sapUserId",t)},expression:"editUserForm2.sapUserId"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.editUserSubmit(1)}}},[e._v("确 定")]),e._v(" "),s("el-button",{attrs:{size:"medium"},on:{click:function(t){e.visible.editUserVisible2=!1}}},[e._v("取 消")])],1)],1),e._v(" "),s("div",{staticClass:"common-table"},[s("el-table",{ref:"postsTable",attrs:{data:e.table.dataList,height:"100%"}},[s("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),s("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{prop:"mobile",label:"电话",width:"130"}}),e._v(" "),s("el-table-column",{attrs:{prop:"sapWorkName",label:"SAP姓名",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{prop:"sapWorkNumber",label:"SAP工号",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{prop:"dworkId",label:"Dbwork工号",width:"120"}}),e._v(" "),s("el-table-column",{attrs:{prop:"sapUserId",label:"SAP用户编号",width:"120"}}),e._v(" "),s("el-table-column"),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){return e.editUser(t.row,0)}}},[e._v("云条码配置")]),e._v(" "),s("b",[e._v("|")]),e._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(s){return e.editUser(t.row,1)}}},[e._v("SAP编号配置")]),e._v(" "),s("b",[e._v("|")]),e._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(s){return e.deleteUser(t.row.userId)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),s("div",{staticClass:"common-paging-content"},[s("el-pagination",{attrs:{"current-page":e.table.pageObject.page,"page-sizes":[10,20,50,100],"page-size":e.table.pageObject.sizes,layout:"total, sizes, prev, pager, next, jumper",total:e.table.pageObject.total},on:{"size-change":e.changePageSize,"current-change":e.changePage}})],1)],1)])},staticRenderFns:[]};var l=s("C7Lr")(r,i,!1,function(e){s("UWDh")},"data-v-317a64e1",null);t.default=l.exports}});