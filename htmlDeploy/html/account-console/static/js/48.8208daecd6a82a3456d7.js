webpackJsonp([48],{"+ohi":function(t,s){},"wr/M":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("5MsS"),r=e("ryJa"),i=e.n(r),o={name:"QuestionInfo",data:function(){return{replylength:0,questionOrder:{},replyList:[],NewTableData:[],replyForm:{content:"",cqoId:0,cqorId:0},contentText:""}},created:function(){this.getQuestionInfos()},methods:{dateFormat:function(t,s){var e=t[s.property];return void 0===e?"":i()(e).format("YYYY-MM-DD HH:mm:ss")},dateFrm:function(t){return i()(t).format("YYYY-MM-DD HH:mm:ss")},getQuestionInfos:function(){var t=this,s=Number(this.$route.params.cqoId);Object(a.c)(s).then(function(s){s.data.code===t.$global.successCode&&(t.questionOrder=s.data.data.questionOrder,t.replyList=s.data.data.replyList,t.NewTableData=s.data.data.replyList,t.replylength=t.replyList.length,t.replyForm.cqoId=t.questionOrder.cqoId)},function(t){console.log("请求工单数据失败",t)})},onScreeoutNew:function(){var t=this,s=-1;this.NewTableData.forEach(function(e){var a=e.cqorOrder,r=Number(a);s<r&&(s=r,t.replyForm.cqorId=e.cqorId)})},onSubmitReply:function(){var t=this;if(this.onScreeoutNew(),""!=this.contentText){this.replyForm.content=this.contentText;var s=this.replyForm;Object(a.f)(s).then(function(s){s.data.code===t.$global.successCode&&(t.$message({message:"添加回复信息数据成功！",type:"success"}),t.getQuestionInfos())},function(t){console.log("添加回复信息数据失败",t)})}}}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"main"},[e("div",{staticClass:"title_warp"},[e("h2",{staticClass:"title2"},[e("router-link",{attrs:{to:{name:"workorderviewLink"}}},[t._v("我的工单")]),t._v(">工单详情")],1)]),t._v(" "),e("div",{staticClass:"clear"}),t._v(" "),e("div",{staticClass:"application_item",staticStyle:{height:"calc(100vh - 200px)"}},[e("div",{staticClass:"questionwarp"},[e("ul",{staticClass:"comment-list",attrs:{date:t.questionOrder}},[e("li",{staticClass:"comment-wrap cf"},[e("div",{staticClass:"card-wrap fl"},[e("img",{staticStyle:{width:"40px",height40:"px","border-radius":"50%"},attrs:{src:t.questionOrder.userImage,alt:""}})]),t._v(" "),e("div",{staticClass:"post"},[e("div",{staticClass:"post-hover"},[e("p",{staticClass:"auther"},[e("a",{staticClass:"blue b"},[t._v(t._s(t.questionOrder.userName))])]),t._v(" "),e("p",{staticClass:"post-body"},[t._v(t._s(t.questionOrder.content))]),t._v(" "),e("div",{staticClass:"post-info dib-wrap cf"},[e("span",{staticClass:"mr20"},[t._v("工单初始提交于：")]),t._v(" "),e("span",{staticClass:"mr20"},[t._v(t._s(t.dateFrm(t.questionOrder.createTime)))])])])])])]),t._v(" "),e("div",{staticStyle:{height:"calc(100vh - 580px)",overflow:"auto"}},t._l(t.replyList,function(s){return e("ul",{key:t.replyList.cqorId,staticClass:"comment-list"},[e("li",{staticClass:"comment-wrap cf"},[e("div",{staticClass:"card-wrap fl"},[e("img",{staticClass:"head-img",staticStyle:{width:"40px",height:"40px","border-radius":"50%"},attrs:{src:s.fromUserImage,alt:""}})]),t._v(" "),e("div",{staticClass:"post"},[e("div",{staticClass:"post-hover"},[e("p",{staticClass:"auther"},[e("a",{staticClass:"blue b"},[t._v(t._s(s.fromUserName))])]),t._v(" "),e("p",{staticClass:"post-body"},[t._v(t._s(s.content))]),t._v(" "),e("div",{staticClass:"post-info dib-wrap cf"},[e("span",{staticClass:"mr20"},[t._v(t._s(s.cqorOrder)+"楼")]),t._v(" "),e("span",{staticClass:"mr20"},[t._v(t._s(t.dateFrm(s.updateTime)))])])])])])])}),0),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:0!=this.replylength,expression:"this.replylength != 0"}],staticClass:"comment-input-box",attrs:{date:t.questionOrder}},[e("div",{staticClass:"user-info cf bg"},[e("img",{staticStyle:{width:"40px","border-radius":"50%"},attrs:{src:t.questionOrder.userImage,alt:""}}),t._v(" "),e("b",[t._v(t._s(t.questionOrder.userName))])]),t._v(" "),e("form",{staticClass:"send-commont"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.contentText,expression:"contentText"}],attrs:{placeholder:"发表回复"},domProps:{value:t.contentText},on:{input:function(s){s.target.composing||(t.contentText=s.target.value)}}}),t._v(" "),e("div",{staticClass:"bar cf"},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.onSubmitReply}},[t._v("提交")])],1)])])])])])},staticRenderFns:[]};var c=e("C7Lr")(o,n,!1,function(t){e("+ohi")},"data-v-2f5185d2",null);s.default=c.exports}});