webpackJsonp([52],{"7TAt":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s("pcot"),o={name:"SecuritySetting",data:function(){var e=this;return{inputPwd:null,psdmegtxt:"弱",sendAuthCode:!0,auth_time:0,sendAuthCode1:!0,auth_time1:0,sendAuthCode2:!0,auth_time2:0,visible:{updatesecretpost:!1,updateemailpost:!1,updateemailpost1:!1,updatemobilepost:!1,updatemobilepost1:!1},users:{mobile:"",email:""},UserEmailForm1:{email:""},UserEmailForm2:{emailCode:"",email:""},UserOldMobileForm:{mobileCode:""},UserNewMobileForm1:{mobile:""},UserNewMobileForm2:{mobile:"",mobileCode:""},UserSecretForm:{newPassword:"",oldPassword:"",checkPassword:""},rules:{mobile:[{required:!0,message:"手机不能为空",trigger:"blur"},{validator:function(e,t,s){""!==t&&(/^1[3456789]\d{9}$/.test(t)||s(new Error("请输入有效的手机号码")));s()},trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"},{validator:function(e,t,s){""!==t&&(/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(t)||s(new Error("请输入有效的邮箱")));s()},trigger:"blur"}],mobileCode:[{required:!0,message:"验证码不能为空",trigger:"blur"}],emailCode:[{required:!0,message:"验证码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}],oldPassword:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"}],checkPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{min:6,max:30,message:"长度在 6 到 30 个字符",trigger:"blur"},{validator:function(t,s,l){s!==e.UserSecretForm.newPassword?l(new Error("两次输入密码不一致!")):l()},trigger:"blur"}]},password:{value:1}}},watch:{},mounted:function(){this.getUser()},methods:{changePwd:function(e){/[a-zA-Z]+/.test(e)&&/[0-9]+/.test(e)&&/\W+\D+/.test(e)?(this.password.value=100,this.psdmegtxt="强"):(/[a-zA-Z]+/.test(e)||/[0-9]+/.test(e)||/\W+\D+/.test(e))&&(/[a-zA-Z]+/.test(e)&&/[0-9]+/.test(e)?(this.password.value=60,this.psdmegtxt="中"):/\[a-zA-Z]+/.test(e)&&/\W+\D+/.test(e)?(this.password.value=60,this.psdmegtxt="中"):/[0-9]+/.test(e)&&/\W+\D+/.test(e)?(this.password.value=60,this.psdmegtxt="中"):(this.password.value=30,this.psdmegtxt="弱"))},getUser:function(){var e=this;Object(l.o)().then(function(t){t.data.code===e.$global.successCode&&(e.users=t.data.data,e.users.userPosts=t.data.data.userPosts)},function(e){console.log("请求所有基本资料数据失败",e)})},onSubmitSecret:function(){var e=this;this.$refs.UserSecretForm.validate(function(t){if(t){var s=e.UserSecretForm;Object(l.y)(s).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"密码修改成功！",type:"success"}),e.visible.updatesecretpost=!1)},function(e){console.log("请求密码数据失败",e)})}})},getOldMobileCode:function(){var e=this;Object(l.t)().then(function(t){if(t.data.code===e.$global.successCode){e.sendAuthCode=!1,e.auth_time=60;var s=setInterval(function(){e.auth_time--,e.auth_time<=0&&(e.sendAuthCode=!0,clearInterval(s))},1e3)}},function(e){console.log("请求旧手机验证码失败",e)})},validateOldMobileCodes:function(){var e=this;Object(l.A)().then(function(t){if(t.data.code===e.$global.successCode){e.sendAuthCode=!1,e.auth_time=60;var s=setInterval(function(){e.auth_time--,e.auth_time<=0&&(e.sendAuthCode=!0,clearInterval(s))},1e3)}},function(e){console.log("请求旧手机验证码失败",e)}),this.$refs.UserOldMobileForm.validate(function(t){if(t){var s=e.UserOldMobileForm;Object(l.A)(s).then(function(t){t.data.code===e.$global.successCode&&(console.log("验证原手机验证码成功",t),e.visible.updatemobilepost=!1,e.visible.updatemobilepost1=!0)},function(e){console.log("验证原手机验证码失败",e)})}})},getNewMobileCode:function(){var e=this;this.$refs.UserNewMobileForm1.validate(function(t){if(t){var s=e.UserNewMobileForm1;Object(l.s)(s).then(function(t){if(t.data.code===e.$global.successCode){e.sendAuthCode1=!1,e.auth_time1=60;var s=setInterval(function(){e.auth_time1--,e.auth_time1<=0&&(e.sendAuthCode1=!0,clearInterval(s))},1e3)}},function(e){console.log("请求新手机验证码失败",e)})}})},onSubmitMobile:function(){var e=this;this.$refs.UserNewMobileForm2.validate(function(t){if(t){e.UserNewMobileForm2.mobile=e.UserNewMobileForm1.mobile;var s=e.UserNewMobileForm2;Object(l.w)(s).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"绑定手机修改成功！",type:"success"}),e.visible.updatemobilepost=!1,e.visible.updatemobilepost1=!1,e.getUser())},function(e){console.log("请求手机号码数据失败",e)})}})},getEmailCode:function(){var e=this;this.$refs.UserEmailForm1.validate(function(t){if(t){var s=e.UserEmailForm1;Object(l.r)(s).then(function(t){if(t.data.code===e.$global.successCode){console.log("请求邮箱验证码成功",t),e.sendAuthCode2=!1,e.auth_time2=60;var s=setInterval(function(){e.auth_time2--,e.auth_time2<=0&&(e.sendAuthCode2=!0,clearInterval(s))},1e3)}},function(e){console.log("请求邮箱验证码失败",e)})}})},onSubmitEmail:function(){var e=this;this.$refs.UserEmailForm2.validate(function(t){if(t){e.UserEmailForm2.email=e.UserEmailForm1.email;var s=e.UserEmailForm2;Object(l.v)(s).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"绑定邮箱修改成功！",type:"success"}),e.visible.updateemailpost=!1)},function(e){console.log("请求邮箱账号失败",e)})}})}}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main"},[e._m(0),e._v(" "),s("div",{staticClass:"clear"}),e._v(" "),s("div",{staticClass:"authentication_item application_item"},[s("ul",{staticClass:"securitysetting",attrs:{data:e.users}},[s("li",[s("label",[e._v("密码管理")]),e._v(" "),s("p",[e._v("安全性高的密码可以使帐号更安全。建议您定期更换密码，设置一个包含字母，符号或数字中至少两项且长度超过6位的密码。")]),e._v(" "),s("div",{staticClass:"securitybtn"},[e._m(1),e._v(" "),s("b",[e._v("| ")]),e._v(" "),s("a",{staticClass:"edittxt",on:{click:function(t){e.visible.updatesecretpost=!0}}},[e._v("修改")])])]),e._v(" "),s("li",[s("label",[e._v("手机管理")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:null==e.users.mobile,expression:"users.mobile == null"}]},[e._v("您还没有绑定手机，请绑定手机[您的手机号可以直接用于登录、找回密码等]")]),e._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.mobile,expression:"users.mobile != null"}]},[e._v("您已绑定了手机"),s("span",[e._v(e._s(e.users.mobile))]),e._v("[您的手机号可以直接用于登录、找回密码等]")]),e._v(" "),s("div",{staticClass:"securitybtn"},[s("span",{directives:[{name:"show",rawName:"v-show",value:null==e.users.mobile,expression:"users.mobile == null"}],staticClass:"state2"},[s("i",{staticClass:"icon iconfont icon-jinggao"}),e._v("  未设置")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.mobile,expression:"users.mobile != null"}],staticClass:"state1"},[s("i",{staticClass:"el-icon-circle-check-outline"}),e._v("  已设置")]),e._v(" "),s("b",[e._v("| ")]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.mobile,expression:"users.mobile != null"}],staticClass:"edittxt",on:{click:function(t){e.visible.updatemobilepost=!0}}},[e._v("修改")]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:null==e.users.mobile,expression:"users.mobile == null"}],staticClass:"edittxt",on:{click:function(t){e.visible.updatemobilepost1=!0}}},[e._v("绑定")])])]),e._v(" "),s("li",[s("label",[e._v("邮箱管理")]),e._v(" "),s("p",[e._v("邮箱绑定后可用来接收发送的各类系统、营销、服务通知。")]),e._v(" "),s("div",{staticClass:"securitybtn"},[s("span",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.email,expression:"users.email != null"}],staticClass:"state1"},[s("i",{staticClass:"el-icon-circle-check-outline"}),e._v("  已设置")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:null==e.users.email,expression:"users.email == null"}],staticClass:"state2"},[s("i",{staticClass:"icon iconfont icon-jinggao"}),e._v("  未设置")]),e._v(" "),s("b",[e._v("| ")]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.email,expression:"users.email != null"}],staticClass:"edittxt",on:{click:function(t){e.visible.updateemailpost1=!0}}},[e._v("编辑")]),e._v(" "),s("a",{directives:[{name:"show",rawName:"v-show",value:null==e.users.email,expression:"users.email == null"}],staticClass:"edittxt",on:{click:function(t){e.visible.updateemailpost=!0}}},[e._v("绑定")])])])])]),e._v(" "),s("el-dialog",{attrs:{title:"修改密码",visible:e.visible.updatesecretpost,width:"500px"},on:{"update:visible":function(t){return e.$set(e.visible,"updatesecretpost",t)}}},[s("el-form",{ref:"UserSecretForm",staticClass:"demo-ruleForm",attrs:{model:e.UserSecretForm,rules:e.rules,"label-width":"93px"}},[s("el-form-item",{attrs:{label:"原密码：",prop:"oldPassword"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入原密码",autocomplete:"off"},model:{value:e.UserSecretForm.oldPassword,callback:function(t){e.$set(e.UserSecretForm,"oldPassword",t)},expression:"UserSecretForm.oldPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"新密码：",prop:"newPassword"}},[s("el-input",{attrs:{placeholder:"请输入新密码",type:"password"},on:{change:e.changePwd},model:{value:e.UserSecretForm.newPassword,callback:function(t){e.$set(e.UserSecretForm,"newPassword",t)},expression:"UserSecretForm.newPassword"}})],1),e._v(" "),s("p",{staticClass:"pwdtxt",staticStyle:{"margin-top":"-9px"}},[e._v("当前系统密码强度要求为："),s("span",{staticClass:"s1"},[e._v(e._s(e.psdmegtxt))]),s("br"),e._v("由单一数字，字母，字符组成。")]),e._v(" "),s("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"密码强度："}},[s("el-slider",{staticStyle:{width:"367px"},attrs:{step:30,"show-tooltip":!1},model:{value:e.password.value,callback:function(t){e.$set(e.password,"value",t)},expression:"password.value"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码：",prop:"checkPassword"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入确认密码",autocomplete:"off"},model:{value:e.UserSecretForm.checkPassword,callback:function(t){e.$set(e.UserSecretForm,"checkPassword",t)},expression:"UserSecretForm.checkPassword"}})],1),e._v(" "),s("p",{staticClass:"pwdtxt",staticStyle:{"margin-bottom":"20px"}},[e._v("登录密码（6-50个字符，区分英文大小写）")])],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitSecret}},[e._v("确 定")]),e._v(" "),s("el-button",{on:{click:function(t){e.visible.updatesecretpost=!1}}},[e._v("取 消")])],1)],1),e._v(" "),s("el-dialog",{attrs:{data:e.users,title:"修改手机号码",visible:e.visible.updatemobilepost,width:"500px"},on:{"update:visible":function(t){return e.$set(e.visible,"updatemobilepost",t)}}},[s("el-form",{ref:"UserOldMobileForm",staticClass:"demo-ruleForm",attrs:{model:e.UserOldMobileForm,rules:e.rules,"label-width":"100px"}},[s("p",{staticStyle:{"margin-bottom":"15px"}},[e._v("为了保证您的帐号安全，更换手机前请先进行安全验证")]),e._v(" "),s("el-form-item",{attrs:{label:"手机："}},[s("span",{staticStyle:{float:"left"}},[e._v(e._s(e.users.mobile))]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.sendAuthCode,expression:"sendAuthCode"}],staticClass:"auth_text auth_text_blue",staticStyle:{"margin-left":"10px"},on:{click:e.getOldMobileCode}},[e._v("获取验证码")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.sendAuthCode,expression:"!sendAuthCode"}],staticClass:"auth_text auth_text_blue auth_text_gray",staticStyle:{"margin-left":"10px"}},[e._v(" "+e._s(e.auth_time)+" S")])]),e._v(" "),s("el-form-item",{attrs:{label:"验证码：",prop:"mobileCode","label-width":"79px"}},[s("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.UserOldMobileForm.mobileCode,callback:function(t){e.$set(e.UserOldMobileForm,"mobileCode",t)},expression:"UserOldMobileForm.mobileCode"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.validateOldMobileCodes}},[e._v("下一步")]),e._v(" "),s("el-button",{on:{click:function(t){e.visible.updatemobilepost=!1}}},[e._v("取 消")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"绑定手机",visible:e.visible.updatemobilepost1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.visible,"updatemobilepost1",t)}}},[s("el-form",{ref:"UserNewMobileForm1",staticClass:"demo-ruleForm",attrs:{model:e.UserNewMobileForm1,rules:e.rules,"label-width":"79px"}},[s("p",{staticStyle:{"margin-bottom":"15px"}},[e._v("为了保证您的帐号安全，更换手机前请先进行安全验证")]),e._v(" "),s("el-form-item",{attrs:{label:"手机：",prop:"mobile"}},[s("el-input",{staticStyle:{float:"left",width:"273px","margin-right":"5px"},attrs:{type:"mobile",autocomplete:"off"},model:{value:e.UserNewMobileForm1.mobile,callback:function(t){e.$set(e.UserNewMobileForm1,"mobile",t)},expression:"UserNewMobileForm1.mobile"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.sendAuthCode1,expression:"sendAuthCode1"}],staticClass:"auth_text auth_text_blue",on:{click:e.getNewMobileCode}},[e._v("获取验证码")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.sendAuthCode1,expression:"!sendAuthCode1"}],staticClass:"auth_text  auth_text_blue auth_text_gray"},[e._v(e._s(e.auth_time1)+"S")])],1)],1),e._v(" "),s("el-form",{ref:"UserNewMobileForm2",staticClass:"demo-ruleForm",attrs:{model:e.UserNewMobileForm2,rules:e.rules,"label-width":"79px"}},[s("el-form-item",{attrs:{label:"验证码：",prop:"mobileCode"}},[s("el-input",{staticStyle:{width:"381px"},attrs:{placeholder:"请输入验证码"},model:{value:e.UserNewMobileForm2.mobileCode,callback:function(t){e.$set(e.UserNewMobileForm2,"mobileCode",t)},expression:"UserNewMobileForm2.mobileCode"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitMobile}},[e._v("确 定")]),e._v(" "),s("el-button",{on:{click:function(t){e.visible.updatemobilepost1=!1}}},[e._v("取 消")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"绑定邮箱",visible:e.visible.updateemailpost,width:"500px"},on:{"update:visible":function(t){return e.$set(e.visible,"updateemailpost",t)}}},[s("el-form",{ref:"UserEmailForm1",staticClass:"demo-ruleForm",attrs:{model:e.UserEmailForm1,rules:e.rules,"label-width":"79px"}},[s("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[s("el-input",{staticStyle:{float:"left",width:"273px","margin-right":"5px"},attrs:{type:"email",placeholder:"请输入邮箱",autocomplete:"off"},model:{value:e.UserEmailForm1.email,callback:function(t){e.$set(e.UserEmailForm1,"email",t)},expression:"UserEmailForm1.email"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.sendAuthCode2,expression:"sendAuthCode2"}],staticClass:"auth_text auth_text_blue",on:{click:e.getEmailCode}},[e._v("获取验证码")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.sendAuthCode2,expression:"!sendAuthCode2"}],staticClass:"auth_text auth_text_blue auth_text_gray"},[e._v(" "+e._s(e.auth_time2)+"S")])],1)],1),e._v(" "),s("el-form",{ref:"UserEmailForm2",staticClass:"demo-ruleForm",attrs:{model:e.UserEmailForm2,rules:e.rules,"label-width":"79px"}},[s("el-form-item",{attrs:{label:"验证码：",prop:"emailCode"}},[s("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.UserEmailForm2.emailCode,callback:function(t){e.$set(e.UserEmailForm2,"emailCode",t)},expression:"UserEmailForm2.emailCode"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitEmail}},[e._v("确 定")]),e._v(" "),s("el-button",{on:{click:function(t){e.visible.updateemailpost=!1}}},[e._v("取 消")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"编辑邮箱",visible:e.visible.updateemailpost1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.visible,"updateemailpost1",t)}}},[s("el-form",{ref:"UserEmailForm1",staticClass:"demo-ruleForm",attrs:{model:e.UserEmailForm1,rules:e.rules,"label-width":"79px"}},[s("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[s("el-input",{staticStyle:{float:"left",width:"273px","margin-right":"5px"},attrs:{type:"email",placeholder:"请输入邮箱",autocomplete:"off"},model:{value:e.UserEmailForm1.email,callback:function(t){e.$set(e.UserEmailForm1,"email",t)},expression:"UserEmailForm1.email"}}),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.sendAuthCode2,expression:"sendAuthCode2"}],staticClass:"auth_text auth_text_blue",on:{click:e.getEmailCode}},[e._v("获取验证码")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.sendAuthCode2,expression:"!sendAuthCode2"}],staticClass:"auth_text auth_text_blue auth_text_gray"},[e._v(" "+e._s(e.auth_time2)+"S")])],1)],1),e._v(" "),s("el-form",{ref:"UserEmailForm2",staticClass:"demo-ruleForm",attrs:{model:e.UserEmailForm2,rules:e.rules,"label-width":"79px"}},[s("el-form-item",{attrs:{label:"验证码：",prop:"emailCode"}},[s("el-input",{attrs:{placeholder:"请输入验证码"},model:{value:e.UserEmailForm2.emailCode,callback:function(t){e.$set(e.UserEmailForm2,"emailCode",t)},expression:"UserEmailForm2.emailCode"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitEmail}},[e._v("确 定")]),e._v(" "),s("el-button",{on:{click:function(t){e.visible.updateemailpost1=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_warp"},[t("h2",{staticClass:"title1"},[this._v("个人设置")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"state1"},[t("i",{staticClass:"el-icon-circle-check-outline"}),this._v("  已设置")])}]};var i=s("C7Lr")(o,a,!1,function(e){s("a4oc")},"data-v-284940e4",null);t.default=i.exports},a4oc:function(e,t){}});