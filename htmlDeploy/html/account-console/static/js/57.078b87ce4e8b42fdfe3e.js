webpackJsonp([57],{Fdkq:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("pcot"),i=t("ryJa"),l=t.n(i),r=t("uAC3"),o=t.n(r),n={name:"BasicInformation",data:function(){return{items:[0],items2:{index:0,title:"",phone:""},ele:"",visible:{updatenamepost:!1,updateImagepost:!1},users:{departId:"",departName:"",departPath:"",email:"",entryTime:null,image:null,jobNumber:null,jobStatus:0,mobile:"",registerTime:null,sex:null,userId:"",userName:"",userPosts:[{userPostid:""},{userPostname:""}]},imageUrl:"",UserNameForm:{},UserImageForm:{},contactsForm:{contacts:[]}}},created:function(){this.getUser(),this.getContacts()},computed:{fileUploadUrl:function(){return this.$global.baseUrl+"/user/upload-image"},requestHeader:function(){return{"console-user-token":o.a.get("console-user-token")}}},methods:{dateFrm:function(e){return l()(e).format("YYYY-MM-DD")},addExceptPrice:function(){this.ele<5?(this.ele++,this.items2.index=this.ele,this.items2.phone="",this.items2.title="",this.contactsForm.contacts.push(this.items2)):this.$message({message:"最多只能添加5组联系方式！",type:"warning"})},onSubmitContacts:function(){var e=this,s=this.contactsForm;Object(a.a)(s).then(function(s){s.data.code===e.$global.successCode&&(e.$message({message:"添加联系方式成功！",type:"success"}),e.getContacts())},function(e){console.log("添加联系方式失败",e)})},deleteExceptPrice:function(e,s,t){var i=this;""!=t?this.$confirm("是否确定删除该组联系方式","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.c)({index:s}).then(function(s){s.data.code===i.$global.successCode&&(i.$message({message:"删除联系改组联系方式成功！",type:"success"}),i.ele--,i.contactsForm.contacts.splice(e,1))},function(e){console.log("删除联系方式数据失败",e)})}).catch(function(){}):(this.ele--,this.contactsForm.contacts.splice(e,1))},getUser:function(){var e=this;Object(a.o)().then(function(s){s.data.code===e.$global.successCode&&(e.users=s.data.data,e.users.userPosts=s.data.data.userPosts)},function(e){console.log("请求所有基本资料数据失败",e)})},getContacts:function(){var e=this;Object(a.f)().then(function(s){s.data.code===e.$global.successCode&&(e.contactsForm.contacts=s.data.data,e.ele=e.contactsForm.contacts.length)},function(e){console.log("请求联系方式数据失败",e)})},onSubmitUserName:function(){var e=this;this.$refs.UserNameForm_rules.validate(function(s){if(s){var t=e.UserNameForm;Object(a.z)(t).then(function(s){s.data.code===e.$global.successCode&&(e.$message({message:"用户名修改成功！",type:"success"}),e.visible.updatenamepost=!1,e.getUser())},function(e){console.log("请求用户名数据失败",e)})}})},onSubmitImage:function(){this.getUser(),this.$message({message:"头像修改成功！",type:"success"}),this.visible.updateImagepost=!1},handleAvatarSuccess:function(e,s){this.imageUrl=e.data},beforeAvatarUpload:function(e){var s="image/jpeg"===e.type,t=e.size/1024/1024<2;return s||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),s&&t}}},c={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"main"},[e._m(0),e._v(" "),t("div",{staticClass:"clear"}),e._v(" "),t("div",{staticClass:"basic_information",attrs:{data:e.users}},[t("div",{staticClass:"item_list item_listpic",staticStyle:{height:"40px"}},[t("label",[e._v("头像：")]),e._v(" "),t("div",{staticClass:"txt"},[t("img",{attrs:{src:e.users.image,alt:""}})]),t("span",{staticStyle:{"margin-top":"-2px",float:"left"},on:{click:function(s){e.visible.updateImagepost=!0}}},[e._v("修改"),t("i",{staticClass:"icon iconfont icon-bianji"})])]),e._v(" "),t("div",{staticClass:"item_list"},[t("label",[e._v("姓名：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.userName,expression:"users.userName != null"}]},[t("div",{staticClass:"txt"},[e._v(e._s(e.users.userName))]),t("span",{staticStyle:{"margin-top":"-1px",float:"left","margin-left":"5px"},on:{click:function(s){e.visible.updatenamepost=!0}}},[e._v("修改"),t("i",{staticClass:"icon iconfont icon-bianji"})])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null==e.users.userName,expression:"users.userName == null"}],staticClass:"txt txt2"},[e._v("暂无")])]),e._v(" "),t("div",{staticClass:"item_list"},[t("label",[e._v("注册时间：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.registerTime,expression:"users.registerTime != null"}],staticClass:"txt"},[e._v(e._s(e.dateFrm(e.users.registerTime)))]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null==e.users.registerTime,expression:"users.registerTime == null"}],staticClass:"txt txt2"},[e._v("暂无")])]),e._v(" "),t("div",{staticClass:"item_list"},[t("label",[e._v("手机：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null==e.users.mobile,expression:"users.mobile == null"}],staticClass:"txt txt2"},[e._v("暂无")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.mobile,expression:"users.mobile != null"}],staticClass:"txt"},[e._v(e._s(e.users.mobile))])]),e._v(" "),t("div",{staticClass:"item_list"},[t("label",[e._v("邮箱：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null==e.users.email,expression:"users.email == null"}],staticClass:"txt txt2"},[e._v("暂无")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.email,expression:"users.email != null"}],staticClass:"txt"},[e._v(e._s(e.users.email))])])]),e._v(" "),t("div",{staticClass:"clear"}),e._v(" "),t("h2",{staticClass:"title2"},[e._v("基本资料")]),e._v(" "),t("div",{staticClass:"clear"}),e._v(" "),t("div",{staticClass:"basic_information",attrs:{data:e.users}},[t("div",{staticClass:"item_list"},[t("label",[e._v("入职时间：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null==e.users.entryTime,expression:"users.entryTime == null"}],staticClass:"txt txt2"},[e._v("暂无")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.entryTime,expression:"users.entryTime != null"}],staticClass:"txt"},[e._v(e._s(e.dateFrm(e.users.entryTime)))])]),e._v(" "),t("div",{staticClass:"item_list"},[t("label",[e._v("工号：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null==e.users.jobNumber,expression:"users.jobNumber == null"}],staticClass:"txt txt2"},[e._v("暂无")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.jobNumber,expression:"users.jobNumber != null"}],staticClass:"txt"},[e._v(e._s(e.users.jobNumber))])]),e._v(" "),t("div",{staticClass:"item_list"},[t("label",[e._v("性别：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null==e.users.sex,expression:"users.sex == null"}],staticClass:"txt txt2"},[e._v("暂无")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.sex,expression:"users.sex != null"}],staticClass:"txt"},[e._v(e._s(e.users.sex))])]),e._v(" "),t("div",{staticClass:"item_list"},[t("label",[e._v("部门：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null==e.users.departName,expression:"users.departName == null"}],staticClass:"txt txt2"},[e._v("暂无")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.departName,expression:"users.departName != null"}],staticClass:"txt"},[e._v(e._s(e.users.departName))])]),e._v(" "),t("div",{staticClass:"item_list"},[t("label",[e._v("职位：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.users.userPosts.length,expression:"users.userPosts.length == 0"}],staticClass:"txt txt2"},[e._v("暂无")]),e._v(" "),e._l(e.users.userPosts,function(s){return t("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.users.userPosts.length,expression:"users.userPosts.length != 0"}],staticClass:"txt"},[e._v("\n        "+e._s(s.userPostname)+"\n      ")])})],2),e._v(" "),t("div",{staticClass:"item_list"},[t("label",[e._v("隶属机构：")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null==e.users.departPath,expression:"users.departPath == null"}],staticClass:"txt txt2"},[e._v("暂无")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:null!=e.users.departPath,expression:"users.departPath != null"}],staticClass:"txt"},[e._v(e._s(e.users.departPath))])]),e._v(" "),e._m(1)]),e._v(" "),t("div",{staticClass:"clear"}),e._v(" "),t("h2",{staticClass:"title2"},[e._v("联系方式")]),e._v(" "),t("div",{staticClass:"clear"}),e._v(" "),t("div",{staticClass:"basic_information",attrs:{data:e.users}},[t("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"93px"},model:{value:e.contactsForm,callback:function(s){e.contactsForm=s},expression:"contactsForm"}},[t("ul",{staticStyle:{"margin-left":"20px","margin-top":"20px"}},e._l(e.contactsForm.contacts,function(s,a){return t("li",{key:a,staticStyle:{"margin-top":"10px"}},[t("span",{staticStyle:{float:"left"},model:{value:e.items[a],callback:function(s){e.$set(e.items,a,s)},expression:"items[index]"}},[t("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入部门"},model:{value:s.title,callback:function(t){e.$set(s,"title",t)},expression:"item.title"}}),e._v(" ：\n                "),t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入电话号码"},model:{value:s.phone,callback:function(t){e.$set(s,"phone",t)},expression:"item.phone"}})],1),e._v(" "),t("i",{staticClass:"el-icon-remove iconremove",staticStyle:{float:"left","margin-top":"10px"},on:{click:function(t){return e.deleteExceptPrice(a,s.index,s.title)}}}),e._v(" "),t("div",{staticClass:"clear"})])}),0)]),e._v(" "),t("div",{staticClass:"clear"}),e._v(" "),t("div",{staticStyle:{"margin-top":"20px","margin-left":"150px"}},[t("el-button",{staticClass:"el-icon-plus",attrs:{type:"text"},on:{click:e.addExceptPrice}},[e._v("添加联系方式")])],1)],1),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitContacts}},[e._v("保存")]),e._v(" "),t("el-dialog",{attrs:{title:"修改用户名",visible:e.visible.updatenamepost,width:"500px"},on:{"update:visible":function(s){return e.$set(e.visible,"updatenamepost",s)}}},[t("el-form",{ref:"UserNameForm_rules",staticClass:"demo-ruleForm",attrs:{model:e.UserNameForm,"label-width":"93px"}},[t("el-form-item",{attrs:{label:"新用户名：",prop:"userName",rules:[{required:!0,message:"新用户名为空",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"请输入新用户名"},model:{value:e.UserNameForm.userName,callback:function(s){e.$set(e.UserNameForm,"userName",s)},expression:"UserNameForm.userName"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitUserName}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(s){e.visible.updatenamepost=!1}}},[e._v("取 消")])],1)],1),e._v(" "),t("el-dialog",{staticClass:"touxiang",attrs:{title:"上传头像",visible:e.visible.updateImagepost,width:"500px"},on:{"update:visible":function(s){return e.$set(e.visible,"updateImagepost",s)}}},[t("el-upload",{staticClass:"avatar-uploader",staticStyle:{"text-align":"center","padding-bottom":"20px"},attrs:{name:"image","show-file-list":!1,action:e.fileUploadUrl,headers:e.requestHeader,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?t("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitImage}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(s){e.visible.updateImagepost=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"title_warp"},[s("h2",{staticClass:"title1"},[this._v("用户信息")])])},function(){var e=this.$createElement,s=this._self._c||e;return s("div",{staticClass:"item_list"},[s("label",[this._v("角色：")]),this._v(" "),s("div",{staticClass:"txt txt2"},[this._v("暂无")])])}]};var u=t("C7Lr")(n,c,!1,function(e){t("orL4")},"data-v-12e1df8b",null);s.default=u.exports},orL4:function(e,s){}});