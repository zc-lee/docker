webpackJsonp([59],{DI9B:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Ln58"),l={props:["mentId","linkId","externalDataSourseName","companyCode"],data:function(){return{modal:{visible:!1,mentId:""},table:{search:{keyword:""},pageObject:{page:1,sizes:20,total:100},dataList:[]},mentList:[]}},methods:{tabOperation:function(t,e,a,n){this.$emit("taboperation",{mentId:t,linkId:e,externalDataSourseName:a,type:n})},getMent:function(){var t=this;Object(n.l)({}).then(function(e){e.data.code===t.$global.successCode&&(t.mentList=e.data.data)})},getSapTableData:function(t){var e=this;1===t&&(this.table.pageObject.page=1),Object(n.q)({page:this.table.pageObject.page,size:this.table.pageObject.sizes,keyword:this.table.search.keyword}).then(function(t){t.data.code===e.$global.successCode&&(e.table.dataList=t.data.data.list,e.table.pageObject.total=t.data.data.total)})},addForm:function(){var t=this;Object(n.b)({id:this.modal.mentId}).then(function(e){e.data.code===t.$global.successCode?(t.$message({message:"添加SAP表单成功",type:"success"}),t.modal.visible=!1,t.getSapTableData()):t.$message({message:"表单已存在",type:"error"})})},deleteForm:function(t){var e=this;this.$confirm("是否确定删除该表单","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.g)({id:t.row.mentId}).then(function(t){t.data.code===e.$global.successCode&&e.$message({message:"删除字典成功",type:"success"})})}).catch(function(){e.$message("取消删除操作")})},handleCurrentChange:function(t){this.table.pageObject.page=t,this.getSapTableData()},handleSizeChange:function(t){this.table.pageObject.sizes=t,this.getSapTableData()}},created:function(){this.getSapTableData(),this.getMent()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"application_item",staticStyle:{height:"calc(100vh - 153px)",padding:"0"}},[a("div",{staticClass:"common-setting-tab-content"},[a("div",{staticClass:"common-transverse-operation"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.modal.visible=!0}}},[t._v("添加表单")]),t._v(" "),a("div",{staticClass:"search-input"},[a("el-input",{attrs:{placeholder:"搜索...","suffix-icon":"el-icon-search"},on:{change:function(e){return t.getSapTableData(1)}},model:{value:t.table.search.keyword,callback:function(e){t.$set(t.table.search,"keyword",e)},expression:"table.search.keyword"}})],1)],1),t._v(" "),a("el-dialog",{staticStyle:{"font-weight":"bold"},attrs:{title:"添加表单",visible:t.modal.visible},on:{"update:visible":function(e){return t.$set(t.modal,"visible",e)}}},[a("el-form",{staticClass:"common-modal-input"},[a("el-form-item",{attrs:{label:"SAP表单","label-width":"78px"}},[a("el-select",{model:{value:t.modal.mentId,callback:function(e){t.$set(t.modal,"mentId",e)},expression:"modal.mentId"}},t._l(t.mentList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addForm()}}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.modal.visible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),a("div",{staticClass:"common-table"},[a("el-table",{ref:"postsTable",attrs:{data:t.table.dataList,height:"100%"}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dbcName",label:"公司名称",width:"220"},on:{click:!0}}),t._v(" "),a("el-table-column",{attrs:{prop:"mentName",label:"表单名称",width:"200"}}),t._v(" "),a("el-table-column"),t._v(" "),a("el-table-column",{attrs:{width:"350",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.tabOperation(e.row.mentId,e.row.linkId,e.row.mentId,4)}}},[t._v("主表字段管理")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.tabOperation(e.row.mentId,e.row.linkId,e.row.mentId,5)}}},[t._v("子表字段管理")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.deleteForm(e)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"common-paging-content"},[a("el-pagination",{attrs:{"current-page":t.table.pageObject.page,"page-sizes":[10,20,50,100],"page-size":t.table.pageObject.sizes,layout:"total, sizes, prev, pager, next, jumper",total:t.table.pageObject.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var i=a("C7Lr")(l,o,!1,function(t){a("iexZ")},"data-v-0c1a371e",null);e.default=i.exports},iexZ:function(t,e){}});