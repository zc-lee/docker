webpackJsonp([11],{"2/kb":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("CovZ"),o=s.n(a),i=s("W+Ew"),n=s("G+Zt"),l=s("VnLn"),r={data:function(){return{value:"",tab:{actives:["1","2"]},table:{dataList:[]},subordinate:{dataList:[{name:"路人甲",headImage:o.a},{name:"路人甲",headImage:o.a},{name:"路人甲",headImage:o.a},{name:"路人甲",headImage:s("CovZ")}]},modal:{insert:{visible:!1,labelWith:"70px",region:[],form:{productName:"",remark:""}},update:{visible:!1,labelWith:"70px",region:[],form:{productId:"",productName:"",remark:""}}},oneselfCount:"",userModal:{visible:!1,loading:!1,userId:"",type:"",userList:[]},installmentUserModal:{visible:!1,loading:!1,userId:"",type:"",userList:[]},kickedDay:"",subordinates:{keyword:{key:0,value:""},subordinatesData:[],subordinatesId:""},sysUserName:""}},mounted:function(){this.getProduct(),this.getCount(),this.getSelsyn(),this.UsersList(),this.getinstallmentProcessUsers(),this.getCustkicked(),this.getSubordinatesUser()},methods:{updateCustKickedOut:function(){var t=this;""!==this.kickedDay&&this.$confirm("是否确定设置强踢时间","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.c)({kickedDay:t.kickedDay}).then(function(e){e.data.code===t.$global.successCode&&(t.$message({message:"设置成功",type:"success"}),t.getCustkicked())}).catch(function(t){})}).catch(function(){})},getCustkicked:function(){var t=this;Object(i.i)().then(function(e){t.kickedDay=e.data.data.setvalue}).catch(function(t){})},getSelsyn:function(){var t=this;Object(i.I)().then(function(e){"0"===e.data.data.setvalue?t.value=!1:t.value=!0}).catch(function(t){})},isSelsyn:function(){var t=this,e=0,s="";!1===this.value?(e=0,s="关闭同步企点"):(e=1,s="开启同步企点"),Object(i.H)({type:e}).then(function(e){e.data.code===t.$global.successCode&&(t.$message({message:s+"成功",type:"success"}),t.getSelsyn())}).catch(function(t){})},getProduct:function(){var t=this;Object(i.m)().then(function(e){t.table.dataList=e.data.data}).catch(function(t){})},addProduct:function(){this.modal.insert.visible=!0,this.modal.insert.form.productName="",this.modal.insert.form.remark=""},addProductSubmit:function(){var t=this;Object(i.u)(this.modal.insert.form).then(function(e){e.data.code===t.$global.successCode&&(t.$message({message:"添加成功",type:"success"}),t.getProduct(),t.modal.insert.visible=!1)}).catch(function(t){})},updateProduct:function(t){this.modal.update.visible=!0,this.modal.update.form.productId=t.productId,this.modal.update.form.productName=t.productName,this.modal.update.form.remark=t.remark},updateProductSubmit:function(){var t=this;Object(i.g)(this.modal.update.form).then(function(e){e.data.code===t.$global.successCode&&(t.$message({message:"修改成功",type:"success"}),t.getProduct(),t.modal.update.visible=!1)}).catch(function(t){})},deleteProduct:function(t){var e=this;this.$confirm("是否确定删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.B)({productId:t}).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"删除",type:"success"}),e.getProduct())}).catch(function(t){})}).catch(function(){})},getCount:function(){var t=this;Object(i.j)({userId:this.subordinates.subordinatesId}).then(function(e){t.oneselfCount=e.data.data,t.sysUserName=e.data.data.sysUserName}).catch(function(t){})},getUserList:function(t){var e=this;""!==t?Object(n.g)({userName:t}).then(function(s){var a=s.data.data;e.userModal.loading=!0,setTimeout(function(){e.userModal.loading=!1,e.userModal.userList=a.filter(function(e){return e.label.toLowerCase().indexOf(t.toLowerCase())>-1})},200)}).catch(function(t){}):this.userModal.userList=[]},custTransfer:function(){var t=this;this.$confirm("是否确定转交所有客户","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.userModal.userList=[],t.userModal.userId="",t.userModal.type=2,t.userModal.visible=!0}).catch(function(){})},orderTransfer:function(){var t=this;this.$confirm("是否确定转交所有订单","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.userModal.userList=[],t.userModal.type=1,t.userModal.userId="",t.userModal.visible=!0}).catch(function(){})},allTransfer:function(){var t=this;this.$confirm("是否确定一键转交","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.userModal.userList=[],t.userModal.type=0,t.userModal.userId="",t.userModal.visible=!0}).catch(function(){})},allTransferSubmit:function(){var t=this;Object(i.J)({userId:this.subordinates.subordinatesId,toUserId:this.userModal.userId,type:this.userModal.type}).then(function(e){e.data.code===t.$global.successCode&&(t.$message({message:"转交成功",type:"success"}),t.getCount(),t.userModal.visible=!1)}).catch(function(t){})},getinstallmentProcessUsers:function(){var t=this;Object(i.n)().then(function(e){t.installmentUserModal.userId=e.data.data.userId}).catch(function(t){})},UsersList:function(){var t=this;Object(n.h)().then(function(e){var s=e.data.data;t.installmentUserModal.loading=!0,t.installmentUserModal.userList=s}).catch(function(t){})},addInstallmentProcessUser:function(){var t=this;Object(i.r)({userId:this.installmentUserModal.userId}).then(function(e){e.data.code===t.$global.successCode&&(t.$message({message:"设置成功",type:"success"}),t.getCount(),t.userModal.visible=!1)}).catch(function(t){})},getSubordinatesUser:function(t){var e=this;Object(l.B)(t).then(function(t){e.subordinates.subordinatesData=t.data.data}).catch(function(t){})},doUserSearch:function(){this.subordinates.keyword.key=1,this.getSubordinatesUser({keyword:this.subordinates.keyword.value})},subordinatesCount:function(t){this.subordinates.subordinatesId=t,this.getCount()},myCount:function(){this.subordinates.subordinatesId="",this.getCount()}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main-content"},[s("div",{staticClass:"first-item-box"},[s("div",{staticClass:"item-box-title"},[s("span",{staticClass:"title-text"},[t._v("销售产品")]),t._v(" "),s("el-button",{staticClass:"item-box-button",attrs:{type:"text"},on:{click:t.addProduct}},[t._v("添加产品")])],1),t._v(" "),s("div",{staticClass:"item-box-content"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.table.dataList,height:"100%"}},[s("el-table-column",{attrs:{type:"index",width:"43"}}),t._v(" "),s("el-table-column",{attrs:{prop:"productName",label:"产品名称","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":""}}),t._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.updateProduct(e.row)}}},[t._v("编辑")]),t._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){return t.deleteProduct(e.row.productId)}}},[t._v("删除")])]}}])})],1)],1)]),t._v(" "),s("div",{staticClass:"second-item-box"},[s("div",{staticClass:"item-box-title"},[s("span",{staticClass:"title-text"},[t._v("一键转交")]),t._v(" "),s("div",{staticClass:"item-box-button"},[s("el-popover",{attrs:{placement:"bottom-start",width:"210",trigger:"hover"}},[0!==t.subordinates.subordinatesData.length||0!==t.subordinates.keyword.key?s("div",{staticClass:"box-user"},[s("div",{staticClass:"search-header"},[s("div",{staticClass:"search-header-input"},[s("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容","suffix-icon":"el-icon-search"},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.doUserSearch(e)}},model:{value:t.subordinates.keyword.value,callback:function(e){t.$set(t.subordinates.keyword,"value",e)},expression:"subordinates.keyword.value"}})],1),t._v(" "),s("div",{staticClass:"search-header-button"},[s("el-button",{attrs:{type:"text"},on:{click:t.myCount}},[t._v("重置")])],1)]),t._v(" "),t._l(t.subordinates.subordinatesData,function(e){return s("div",{staticClass:"aaaa"},[s("div",{staticClass:"subordinate",on:{click:function(s){return t.subordinatesCount(e.userId)}}},[s("div",{staticClass:"subordinate-img"},[s("img",{attrs:{src:e.userPhoto}})]),t._v(" "),s("div",{staticClass:"subordinate-text"},[s("el-button",{staticStyle:{"margin-top":"-13px",color:"#000"},attrs:{type:"text"}},[t._v(t._s(e.userName))]),t._v(" "),s("div",{staticClass:"subordinate-text-line",staticStyle:{"font-size":"7px"}},[t._v(t._s(e.postName))])],1)])])})],2):s("div",[t._v("暂无下属")]),t._v(" "),s("el-button",{staticClass:"first-button",attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v(t._s(t.sysUserName))])],1),t._v(" "),s("b",[t._v("|")]),t._v(" "),s("el-button",{attrs:{type:"text"},on:{click:t.custTransfer}},[t._v("转交客户")]),t._v(" "),s("b",[t._v("|")]),t._v(" "),s("el-button",{attrs:{type:"text"},on:{click:t.orderTransfer}},[t._v("转交订单")]),t._v(" "),s("b",[t._v("|")]),t._v(" "),s("el-button",{attrs:{type:"text"},on:{click:t.allTransfer}},[t._v("一键转交")])],1)]),t._v(" "),s("div",{staticClass:"item-box-content"},[s("div",[t._v("我的私海客户共有: "+t._s(t.oneselfCount.pCount))]),t._v(" "),s("div",[t._v("我的商机客户共有: "+t._s(t.oneselfCount.bCount))]),t._v(" "),s("div",[t._v("我的正式客户共有: "+t._s(t.oneselfCount.fCount))]),t._v(" "),s("div",[t._v("我的销售订单共有: "+t._s(t.oneselfCount.oCount))]),t._v(" "),s("div",[t._v("我的服务订单共有: "+t._s(t.oneselfCount.sCount))])])]),t._v(" "),s("div",{staticClass:"second-item-box"},[t._m(0),t._v(" "),s("div",{staticClass:"item-box-content"},[s("div",{staticStyle:{"padding-top":"15px"}},[s("el-switch",{attrs:{"active-text":"同步到企点","inactive-text":"不同步到企点"},on:{change:t.isSelsyn},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),s("div",{staticStyle:{"padding-top":"15px"}},[s("span",{staticStyle:{"font-size":"14px",color:"#303133"}},[t._v("付款审核人：")]),t._v(" "),s("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:t.addInstallmentProcessUser},model:{value:t.installmentUserModal.userId,callback:function(e){t.$set(t.installmentUserModal,"userId",e)},expression:"installmentUserModal.userId"}},t._l(t.installmentUserModal.userList,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("div",{staticStyle:{"padding-top":"15px"}},[s("label",{staticStyle:{"font-size":"14px",color:"rgb(48, 49, 51)",float:"left","margin-top":"10px"}},[t._v("私海强踢时间(天)：")]),t._v(" "),s("div",{staticStyle:{width:"250px",float:"left","margin-left":"10px"}},[s("el-input",{attrs:{type:"number",placeholder:"请输入到期提醒天数"},on:{change:t.updateCustKickedOut},model:{value:t.kickedDay,callback:function(e){t.kickedDay=e},expression:"kickedDay"}})],1)])])]),t._v(" "),s("el-dialog",{staticClass:"custom-dialog",attrs:{title:"添加产品",visible:t.modal.insert.visible},on:{"update:visible":function(e){return t.$set(t.modal.insert,"visible",e)}}},[s("el-form",[s("el-form-item",{attrs:{label:"产品名称","label-width":t.modal.insert.labelWith}},[s("el-input",{model:{value:t.modal.insert.form.productName,callback:function(e){t.$set(t.modal.insert.form,"productName",e)},expression:"modal.insert.form.productName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"备注","label-width":t.modal.insert.labelWith}},[s("el-input",{model:{value:t.modal.insert.form.remark,callback:function(e){t.$set(t.modal.insert.form,"remark",e)},expression:"modal.insert.form.remark"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.addProductSubmit}},[t._v("确 定")]),t._v(" "),s("el-button",{on:{click:function(e){t.modal.insert.visible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{staticClass:"custom-dialog",attrs:{title:"编辑产品",visible:t.modal.update.visible},on:{"update:visible":function(e){return t.$set(t.modal.update,"visible",e)}}},[s("el-form",[s("el-form-item",{attrs:{label:"产品名称","label-width":t.modal.update.labelWith}},[s("el-input",{model:{value:t.modal.update.form.productName,callback:function(e){t.$set(t.modal.update.form,"productName",e)},expression:"modal.update.form.productName"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"备注","label-width":t.modal.update.labelWith}},[s("el-input",{model:{value:t.modal.update.form.remark,callback:function(e){t.$set(t.modal.update.form,"remark",e)},expression:"modal.update.form.remark"}})],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.updateProductSubmit}},[t._v("确 定")]),t._v(" "),s("el-button",{on:{click:function(e){t.modal.update.visible=!1}}},[t._v("取 消")])],1)],1),t._v(" "),s("el-dialog",{staticClass:"custom-dialog",attrs:{title:"转交",visible:t.userModal.visible},on:{"update:visible":function(e){return t.$set(t.userModal,"visible",e)}}},[s("el-form",[s("el-form-item",[s("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入姓名","remote-method":t.getUserList,loading:t.userModal.loading},model:{value:t.userModal.userId,callback:function(e){t.$set(t.userModal,"userId",e)},expression:"userModal.userId"}},t._l(t.userModal.userList,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[s("span",{staticStyle:{float:"left"}},[t._v(t._s(e.label))]),t._v(" "),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-left":"180px"}},[t._v(t._s(e.postName))]),t._v("  \n                        "),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.mobile))])])}),1)],1)],1),t._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.allTransferSubmit}},[t._v("确 定")]),t._v(" "),s("el-button",{on:{click:function(e){t.userModal.visible=!1}}},[t._v("取 消")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-box-title"},[e("span",{staticClass:"title-text"},[this._v("系统设置")]),this._v(" "),e("div",{staticClass:"item-box-button"})])}]};var u=s("C7Lr")(r,c,!1,function(t){s("VUOz")},"data-v-8c8f3770",null);e.default=u.exports},VUOz:function(t,e){}});