webpackJsonp([6],{LgCK:function(e,t){},SmjQ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("xzFr"),a=s("W+Ew"),o=s("G+Zt"),c={data:function(){return{data:[{id:1,label:"销售订单审批流配置"},{id:2,label:"服务订单审批流配置"}],input:"",table:{loading:!1,dataList:[]},pageObject:{page:this.$global.pageParam.page,size:this.$global.pageParam.size,total:this.$global.pageParam.total},modal:{type:"",insert:{visible:!1,labelWith:"100px",form:{type:"",processId:"",processName:"",processKey:"",processStep:""}},update:{visible:!1,labelWith:"100px",form:{type:"",processId:"",processName:"",processKey:"",processStep:""}},user:{userList:[],visible:!1,labelWith:"100px",userName:"",insert:{visible:!1,labelWith:"100px",dataUser:[],form:{type:"",userId:[],processId:""}}}},editor:{process:{visible:!1}},radio:"1",userDataList:[],process:{processId:1,processKey:"",processName:"",processStep:"",type:"",userIdList:[]}}},mounted:function(){this.type=1,this.getProcessList(1),this.getUserList()},methods:{addProcessss:function(){if(console.log(this.table.dataList.length),this.table.dataList.length>=10)return this.$message({message:"审批流程不得大于10步",type:"warning"});this.process.processId="",this.process.processKey="",this.process.processName="",this.process.processStep=null,this.process.userIdList=[],this.process.type=this.type,this.table.dataList.push(this.process)},deleteprocesssss:function(e){var t=this;0!==e&&9998!==e?this.$confirm("是否确定删除该流程","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.table.dataList.splice(e,1)}).catch(function(){}):this.$message({message:"该流程暂不能删除",type:"warning"})},editorProcess:function(){this.editor.process.visible=!0},clickMenu:function(e,t,s){this.type=e.id,this.getProcessList(e.id)},getProcessList:function(e){var t=this;this.table.loading=!0,Object(a.k)({type:e}).then(function(e){var s=e.data.data;t.table.dataList=s,t.table.loading=!1}).catch(function(e){t.table.loading=!1})},addProcess:function(){void 0!==this.type?(this.modal.insert.visible=!0,this.modal.insert.form.processName="",this.modal.insert.form.processKey="",this.modal.insert.form.processStep="",this.modal.insert.form.type=this.type):this.$message({message:"请选择需要配置的订单类型",type:"warning"})},addProcessSubmit:function(){var e=this;Object(a.s)(this.table.dataList).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"保存成功",type:"success"}),e.getProcessList(e.type),e.modal.insert.visible=!1)}).catch(function(e){})},updateProcess:function(e){this.modal.update.visible=!0,this.modal.update.form.processId=e.processId,this.modal.update.form.processName=e.processName,this.modal.update.form.processKey=e.processKey,this.modal.update.form.processStep=e.processStep,this.modal.update.form.type=this.type},updateProcessSubmit:function(){var e=this;Object(a.f)(this.modal.update.form).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"修改流程成功",type:"success"}),e.getProcessList(e.type),e.modal.update.visible=!1)}).catch(function(e){})},deleteProcessSubmit:function(e){var t=this;this.$confirm("是否确定删除该流程","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.z)({type:t.type,processKey:e.processKey}).then(function(e){e.data.code===t.$global.successCode&&(t.$message({message:"删除流程成功",type:"success"}),t.getProcessList(t.type))}).catch(function(e){})}).catch(function(){})},doSearch:function(){this.pageObject.page=1,this.pageObject.size=20,this.getUser()},handleChange:function(){this.getUser()},userList:function(e){this.modal.user.visible=!0,this.modal.user.userName="",this.modal.user.insert.form.processId=e,this.pageObject.page=1,this.pageObject.size=20,this.getUser()},getUser:function(){var e=this;Object(a.l)({opKey:this.modal.user.insert.form.processId,type:this.type,keyword:this.modal.user.userName,page:this.pageObject.page,size:this.pageObject.size}).then(function(t){var s=t.data.data;e.modal.user.userList=s.list,e.pageObject.total=s.total,e.table.loading=!1}).catch(function(e){})},getUserList:function(e){var t=this;Object(o.h)(e).then(function(e){var s=e.data.data;t.userDataList=s}).catch(function(e){})},addUser:function(){this.modal.user.insert.visible=!0,this.getUserList()},filterMethod:function(e,t){return t.label.indexOf(e)>-1},addUserSubmit:function(){var e=this;Object(a.t)({opKey:this.modal.user.insert.form.processId,userIdList:this.modal.user.insert.form.userId,type:this.type}).then(function(t){t.data.code===e.$global.successCode&&(e.$message({message:"添加用户成功",type:"success"}),e.getUser(),e.modal.user.insert.visible=!1)}).catch(function(e){})},deleteUserSubmit:function(e){var t=this;this.$confirm("是否确定删除该流程","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.A)({opKey:t.modal.user.insert.form.processId,userId:e.userId,type:t.type}).then(function(e){e.data.code===t.$global.successCode&&(t.$message({message:"删除用户成功",type:"success"}),t.getUser())}).catch(function(e){})}).catch(function(){})}},components:{pagination:i.a}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-list order-setting",staticStyle:{"overflow-y":"hidden"}},[s("div",[s("el-row",{staticClass:"setting"},[s("el-col",{staticClass:"setting-col1",attrs:{span:4}},[s("div",{staticClass:"header-button"},[s("span",{staticStyle:{"margin-left":"23px"}},[e._v("订单流程")])]),e._v(" "),s("el-tree",{attrs:{data:e.data,"highlight-current":!0},on:{"node-click":e.clickMenu}})],1),e._v(" "),s("el-col",{staticClass:"setting-col2",attrs:{span:20}},[s("div",{staticClass:"header-button"},[s("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.addProcessSubmit}},[e._v("保 存")]),e._v(" "),s("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.addProcessss}},[e._v("添加流程")])],1),e._v(" "),s("div",{staticClass:"common-table common-table-step"},[s("el-form",e._l(e.table.dataList,function(t,i){return 9999!=t.processStep&&0!=t.processStep?s("div",{staticClass:"process-list"},[s("div",{staticClass:"process-name"},[s("span",{staticStyle:{"margin-left":"18px"}},[e._v("第"+e._s(i+1)+"步骤"+e._s(t.processName))]),e._v(" "),s("i",{staticClass:"el-icon-close",staticStyle:{float:"right","margin-right":"5px","margin-top":"8px"},on:{click:function(t){return e.deleteprocesssss(i)}}})]),e._v(" "),s("div",{staticClass:"process-content"},[s("div",{staticStyle:{float:"left",width:"50%",height:"50px","margin-top":"3px"}},[s("el-form-item",{attrs:{label:"流程名称：","label-width":e.modal.update.labelWith}},[0===t.processStep||9999===t.processStep?s("el-input",{attrs:{disabled:!0},model:{value:t.processName,callback:function(s){e.$set(t,"processName",s)},expression:"item1.processName"}}):s("el-input",{model:{value:t.processName,callback:function(s){e.$set(t,"processName",s)},expression:"item1.processName"}})],1)],1),e._v(" "),s("div",{staticStyle:{float:"left",width:"50%",height:"50px","margin-top":"3px"}},[s("el-form-item",{attrs:{label:"排序：","label-width":e.modal.update.labelWith}},[0===t.processStep||9999===t.processStep?s("el-input",{attrs:{disabled:!0},model:{value:t.processStep,callback:function(s){e.$set(t,"processStep",s)},expression:"item1.processStep"}}):s("el-input",{model:{value:t.processStep,callback:function(s){e.$set(t,"processStep",s)},expression:"item1.processStep"}})],1)],1)]),e._v(" "),s("div",{staticClass:"process-content"},[s("div",{staticStyle:{width:"100%",height:"50px"}},[s("el-form-item",{attrs:{label:"审批人员：","label-width":e.modal.update.labelWith}},[s("div",[s("el-select",{attrs:{filterable:"",multiple:"",placeholder:"执行人员"},model:{value:t.userIdList,callback:function(s){e.$set(t,"userIdList",s)},expression:"item1.userIdList"}},e._l(e.userDataList,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)])],1)])]):e._e()}),0)],1)])],1)],1)])},staticRenderFns:[]};var n=s("C7Lr")(c,r,!1,function(e){s("g/eT"),s("l1ef"),s("LgCK")},"data-v-097813fd",null);t.default=n.exports},"g/eT":function(e,t){},l1ef:function(e,t){}});