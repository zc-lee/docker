(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-331bb70f"],{"193e":function(e,t,a){},a03a:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main",attrs:{id:"flowbox-outer"}},[a("div",{staticClass:"headerbox"},[a("span",{staticStyle:{"font-weight":"700","font-style":"normal","font-size":"16px"}},[e._v("工作流列表")]),a("a-modal",{staticClass:"addworkflow-modal motify-modal",attrs:{title:"新增工作流"},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form",{attrs:{form:e.formadd},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"工作流名称：","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["workflowName",{rules:[{required:!0,message:"新工作流名称为空"}]}],expression:"[\n                'workflowName',\n                {rules: [{ required: true, message: '新工作流名称为空' }]}\n              ]"}],staticClass:"motify-modal-input",attrs:{placeholder:"请输入工作流名称"},on:{blur:function(t){return t.preventDefault(),e.addchangeInput()}}})],1),a("a-form-item",{attrs:{label:"备注：","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["workflowRemark",{rules:[{required:!0,message:"备注为空"}]}],expression:"[\n                'workflowRemark',\n                {rules: [{ required: true, message: '备注为空' }]}\n              ]"}],attrs:{placeholder:"请输入备注内容"},on:{blur:function(t){return t.preventDefault(),e.addchangeTextarea()}}})],1),a("a-form-item",{attrs:{label:"是否允许中断:","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["checkedswitch"],expression:"[\n                'checkedswitch',\n              ]"}],attrs:{checked:Boolean(this.workFlowAdd.interrupt)},on:{change:e.onChangecheckedswitch}},[a("a-icon",{attrs:{slot:"checkedChildren",type:"check"},slot:"checkedChildren"}),a("a-icon",{attrs:{slot:"unCheckedChildren",type:"close"},slot:"unCheckedChildren"})],1)],1)],1)],1),a("a-modal",{staticClass:"Connection-modal motify-modal",attrs:{title:"关联菜单",footer:null},model:{value:e.visibleRole,callback:function(t){e.visibleRole=t},expression:"visibleRole"}},[a("div",[a("div",{staticStyle:{overflow:"hidden"}},[a("a-button",{staticClass:"role-modal-add-btn",attrs:{type:"primary"},on:{click:e.OpenNewmeun}},[e._v("添加参数")])],1),a("a-table",{attrs:{rowKey:"roleId",bordered:e.showBorder,dataSource:e.ConnectionModaldata,columns:e.columnsConnectionModal,pagination:e.showPagination,scroll:{y:200}},scopedSlots:e._u([{key:"roleName",fn:function(t,o){return[a("a",{staticStyle:{"text-decoration":"none",color:"#00aaee"},attrs:{href:"javascript:;"},on:{click:function(t){return e.ReviseRole(o)}}},[e._v(e._s(t))])]}},{key:"operation",fn:function(t,o){return[e.ConnectionModaldata.length?a("a-popconfirm",{staticClass:"operation-choose",attrs:{title:"确定要删除吗?"},on:{confirm:function(){return e.onDeleteConnectionmenu(o)}}},[a("a",{staticStyle:{"text-decoration":"none",color:"#00aaee"},attrs:{href:"javascript:;"}},[e._v("删除")])]):e._e()]}}])})],1)]),a("a-modal",{staticClass:"addworkflow-modal motify-modal",attrs:{title:"修改角色"},on:{ok:e.handleOkRole},model:{value:e.visibleRolename,callback:function(t){e.visibleRolename=t},expression:"visibleRolename"}},[a("a-form",{attrs:{form:e.formRole},on:{submit:e.handleSubmitRole}},[a("a-form-item",{attrs:{label:"角色名称：","label-col":{span:6},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleName",{rules:[{required:!0,message:"新角色名称为空"}]}],expression:"[\n                'roleName',\n                {rules: [{ required: true, message: '新角色名称为空' }]}\n              ]"}],staticClass:"motify-modal-input",attrs:{placeholder:"请输入角色名称"},on:{blur:function(t){return t.preventDefault(),e.addchangeInput()}}})],1),a("a-form-item",{attrs:{label:"角色标识：","label-col":{span:6},"wrapper-col":{span:12}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleMark",{rules:[{required:!0,message:"角色标识为空"}]}],expression:"[\n                'roleMark',\n                {rules: [{ required: true, message: '角色标识为空' }]}\n              ]"}],attrs:{placeholder:"请输入角色标识"},on:{blur:function(t){return t.preventDefault(),e.addchangeTextarea()}}})],1)],1)],1),a("a-modal",{staticClass:"Connection-modal-NewMeun motify-modal",attrs:{title:"添加菜单"},on:{ok:e.handleOkaddmeun},model:{value:e.visibleAddmeun,callback:function(t){e.visibleAddmeun=t},expression:"visibleAddmeun"}},[a("a-form",{attrs:{form:e.formaddmenu},on:{submit:e.handleSubmitaddmenu}},[a("a-form-item",{attrs:{label:"角色名称：","label-col":{span:4},"wrapper-col":{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["workflowName",{rules:[{required:!0,message:"角色名称为空"}]}],expression:"[\n                'workflowName',\n                {rules: [{ required: true, message: '角色名称为空' }]}\n              ]"}],staticClass:"motify-modal-input",attrs:{placeholder:"请输入角色名称"},on:{blur:function(t){return t.preventDefault(),e.addNewMeunlogochangeInput()}}})],1),a("a-form-item",{attrs:{label:"角色标识：","label-col":{span:4},"wrapper-col":{span:16}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["workflowRemark",{rules:[{required:!0,message:"角色标识为空"}]}],expression:"[\n                'workflowRemark',\n                {rules: [{ required: true, message: '角色标识为空' }]}\n              ]"}],attrs:{placeholder:"请输入角色标识"},on:{blur:function(t){return t.preventDefault(),e.addNewMeunNamechange()}}})],1)],1)],1),a("div",{staticClass:"right"},[a("a-button",{staticClass:"workflow-add-btn",attrs:{type:"primary"},on:{click:e.showModal}},[e._v("添加工作流")]),a("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"搜索模块描述"},on:{search:e.onSearch}})],1)],1),a("a-modal",{staticClass:"revise-workflow-modal motify-modal",attrs:{title:"修改工作流"},on:{ok:e.handleOkReviseworkflow},model:{value:e.visibleReviseworkflow,callback:function(t){e.visibleReviseworkflow=t},expression:"visibleReviseworkflow"}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmitReviseworkflow}},[a("a-form-item",{attrs:{label:"工作流名称：","label-col":{span:4.5},"wrapper-col":{span:12}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["workflowName",{rules:[{required:!0,message:"新工作流名称为空"}]}],expression:"[\n                'workflowName',\n                 {\n                  rules: [{ required: true, message: '新工作流名称为空' }]\n                 }\n              ]"}],ref:"workflowName",staticClass:"motify-modal-input",attrs:{placeholder:"请输入工作流名称"}})],1),a("a-form-item",{attrs:{label:"备注：","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["workflowRemark",{rules:[{required:!0,message:"备注为空"}]}],expression:"[\n                'workflowRemark',\n                {rules: [{ required: true, message: '备注为空' }]}\n              ]"}],attrs:{placeholder:"请输入备注内容"}})],1),a("a-form-item",{attrs:{label:"是否允许中断:","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["workSwitch"],expression:"[\n                'workSwitch',\n              ]"}],attrs:{checked:Boolean(this.fields.workSwitch.value)},on:{change:e.onChangeAddcheckedswitch}},[a("a-icon",{attrs:{slot:"checkedChildren",type:"check"},slot:"checkedChildren"}),a("a-icon",{attrs:{slot:"unCheckedChildren",type:"close"},slot:"unCheckedChildren"})],1)],1)],1)],1),a("a-table",{staticStyle:{height:"calc(100vh - 220px)"},attrs:{rowKey:"wftId",bordered:e.showBorder,dataSource:e.dataSource,columns:e.columns,scroll:{y:330},pagination:e.showPagination},scopedSlots:e._u([{key:"interrupt",fn:function(e){return[a("a",{staticStyle:{"text-decoration":"none",color:"#333"},attrs:{href:"javascript:;"}},[a("a-icon",e?{staticStyle:{color:"green"},attrs:{type:"check"}}:{attrs:{type:"close"}})],1)]}},{key:"order",fn:function(t){return[a("a",{staticStyle:{"text-decoration":"none",color:"#333"},attrs:{href:"javascript:;"}},[e._v(e._s(t))])]}},{key:"wftName",fn:function(t,o){return[a("a",{staticStyle:{"text-decoration":"none",cursor:"pointer",color:"#00aaee"},attrs:{href:"javascript:;"},on:{click:function(t){return e.flownameclick(o)}}},[e._v(e._s(t))])]}},{key:"operation",fn:function(t,o){return[a("a",{staticStyle:{"text-decoration":"none",color:"#00aaee","padding-left":"5px"},attrs:{href:"javascript:;"},on:{click:function(t){return e.editTemp(o.wftId)}}},[e._v("设计")]),e.dataSource.length?a("a-popconfirm",{staticClass:"operation-choose",attrs:{title:"确定要删除吗?"},on:{confirm:function(){return e.onDelete(o)}}},[a("a",{staticStyle:{"text-decoration":"none",color:"#00aaee"},attrs:{href:"javascript:;"}},[e._v("删除")])]):e._e()]}}])}),a("div",{staticClass:"pagination-box"},[a("a-pagination",{attrs:{pageSizeOptions:e.pageSizeOptions,total:e.total,showTotal:function(e){return"共 "+e+" 条"},showSizeChanger:"",showQuickJumper:"",pageSize:e.pageSize},on:{change:e.onChange,showSizeChange:e.onShowSizeChange},scopedSlots:e._u([{key:"buildOptionText",fn:function(t){return["50"!==t.value?a("span",[e._v(e._s(t.value)+"条/页")]):e._e(),"50"===t.value?a("span",[e._v("全部")]):e._e()]}}]),model:{value:e.current,callback:function(t){e.current=t},expression:"current"}})],1)],1)},r=[],n=(a("d4d5"),a("35fb")),i=(a("f763"),a("7364"),a("2d80")),l=a("6bf2"),s=a.n(l),d=a("1bab"),c={components:{Dynamicspage:d["default"]},data:function(){return{Rolerevise:{roleName:"",roleMark:"",roleId:0},fieldsRole:{roleName:{value:""},roleMark:{value:""}},fields:{workflowName:{value:""},workflowRemark:{value:""},workSwitch:{value:0}},visibleRolename:!1,visibleRole:!1,showBorder:!1,showPagination:!1,visibleReviseworkflow:!1,ConnectionNewMeundatacolumns:[{title:"菜单",dataIndex:"menu",width:"200px",align:"left"}],count:2,dataSource:[],columns:[{title:"#",dataIndex:"order",width:"50px",align:"center",scopedSlots:{customRender:"order"}},{title:"工作流名称",dataIndex:"wftName",scopedSlots:{customRender:"wftName"},width:"200px",align:"center"},{title:"创建时间",dataIndex:"createTime",width:"200px",align:"center"},{title:"更新时间",dataIndex:"updateTime",width:"200px",align:"center"},{title:"是否启用",dataIndex:"interrupt",scopedSlots:{customRender:"interrupt"},width:"100px",align:"center"},{title:"备注",dataIndex:"remark",width:"200px",align:"center"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},align:"center",width:"100px"}],columnsConnectionModal:[{title:"角色名称",dataIndex:"roleName",scopedSlots:{customRender:"roleName"},width:"30%",align:"center"},{title:"角色标识",dataIndex:"roleMark",align:"center"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},width:"20%",align:"center"}],ConnectionModaldata:[],pageSizeOptions:["10","20","30","40","50"],current:1,pageSize:10,pageNumber:1,total:0,keyword:"",visible:!1,visibleAddmeun:!1,visibleDesignConfirm:!1,formLayout:"horizontal",form:this.$form.createForm(this),formRole:this.$form.createForm(this),formadd:this.$form.createForm(this),formaddmenu:this.$form.createForm(this),workFlowAdd:{remark:"",wftName:"",interrupt:1},workFlowRevise:{wftId:0,remark:"",wftName:"",interrupt:1},workflowRectStart:{wftId:0,viewNode:{rect:[{nodeId:1,nodeName:"开始",nodeType:0,x:0,y:0,width:100,height:100}],line:[{lineId:1,lineName:"线的名称",fromNodeId:1,toNodeId:9999}]}},workSwitch:0,cacheData:[],Deletedata:{roleId:0,roleMark:""}}},mounted:function(){this.getListdata()},methods:{editTemp:function(e){if("tabs"==this.$route.name)return this.$store.dispatch("workflowListEditTemp",e);var t=this.$router.resolve({name:"edit",query:{wft_id:e,access_token:this.$global.requestToken}});window.open(t.href,"_blank")},getListdata:function(){var e=this,t=this.pageNumber,a=this.pageSize,o=this.keyword,r=this.$global.requestToken;Object(i["h"])(t,a,o,r).then((function(t){e.dataSource=t.data.records;var a=t.data.records;e.total=t.data.total,a.forEach((function(t,a){e.dataSource[a].updateTime=s()(t.updateTime).format("YYYY-MM-DD HH:mm:ss"),e.dataSource[a].createTime=s()(t.createTime).format("YYYY-MM-DD HH:mm:ss")})),e.dataSource.map((function(e,t){e.order=t+1}))})).catch((function(e){throw e}))},onDelete:function(e){var t=this,a=e.wftId,o=Object(n["a"])(this.dataSource);Object(i["d"])({wftId:e.wftId}).then((function(e){"success"==e.data.message&&(t.dataSource=o.filter((function(e){return e.wftId!==a})),t.$message.success("删除工作流成功"),t.getListdata())}))},dynamic:function(e){},onSearch:function(e){this.pageNumber=1,this.keyword=e,this.getListdata()},onShowSizeChange:function(e,t){this.pageSize=t,this.getListdata()},onChange:function(e){this.pageNumber=e,this.getListdata()},showModal:function(){var e=this;this.visible=!0,this.formadd=this.$form.createForm(this),this.workFlowAdd.interrupt=1,setTimeout((function(){e.formadd.setFieldsValue({workflowName:"",workflowRemark:"",checkedswitch:e.workFlowAdd.interrupt})}),0)},handleOk:function(e){this.handleSubmit(e)},handleSubmit:function(e){var t=this;e.preventDefault(),this.formadd.validateFields((function(e,a){e||(t.visible=!1,t.workFlowAdd.wftName=a.workflowName,t.workFlowAdd.remark=a.workflowRemark,t.workFlowAdd.interrupt=Number(a.checkedswitch),Object(i["e"])(t.workFlowAdd).then((function(e){t.$message.success("添加工作流成功"),t.getListdata()})))}))},onChangeAddcheckedswitch:function(e){this.fields.workSwitch.value=Number(e)},onChangecheckedswitch:function(e){this.workFlowAdd.interrupt=Number(e)},handleSubmitReviseworkflow:function(e){},handleSelectChange:function(e){this.form.setFieldsValue({note:"Hi, ".concat("male"===e?"man":"lady","!")})},getRoleListData:function(){var e=this;Object(i["g"])().then((function(t){e.ConnectionModaldata=t.data}))},showRoleModal:function(){this.visibleRole=!0,this.getRoleListData()},OpenNewmeun:function(){this.visibleAddmeun=!0,this.formaddmenu=this.$form.createForm(this)},onDeleteConnectionmenu:function(e){var t=this,a=e.roleId,o=Object(n["a"])(this.ConnectionModaldata);this.ConnectionModaldata=o.filter((function(e){return e.roleId!==a})),this.Deletedata.roleId=e.roleId,this.Deletedata.roleMark=e.roleMark,Object(i["a"])(this.Deletedata).then((function(e){"success"==e.data.message&&(t.$message.success("删除角色成功"),t.getRoleListData())}))},handleOkaddmeun:function(e){this.handleSubmitaddmenu(e),this.visibleAddmeun=!1},handleSubmitaddmenu:function(e){var t=this;e.preventDefault(),this.formaddmenu.validateFields((function(e,a){e||Object(i["c"])({roleName:a.workflowName,roleMark:a.workflowRemark}).then((function(e){"success"==e.data.message&&(t.$message.success("添加角色成功"),t.getRoleListData())}))}))},confirm:function(){this.$confirm({title:"提示",content:"是否确定禁用该工作流",okText:"确认",cancelText:"取消"})},flownameclick:function(e){var t=this;e.wftId&&(this.visibleReviseworkflow=!0,Object(i["i"])(e.wftId).then((function(e){t.fields.workflowName.value=e.data.wftName,t.fields.workflowRemark.value=e.data.remark,t.fields.workSwitch.value=e.data.interrupt,t.switchtest=e.data.interrupt,setTimeout((function(){t.form.setFieldsValue({workflowName:t.fields.workflowName.value,workflowRemark:t.fields.workflowRemark.value,workSwitch:t.fields.workSwitch.value})}),0)})),this.form=this.$form.createForm(this,{onFieldsChange:function(e,a){t.$emit("change",a)},mapPropsToFields:function(){return{workflowName:t.$form.createFormField({value:t.fields.workflowName.value}),workflowRemark:t.$form.createFormField({value:t.fields.workflowRemark.value}),workSwitch:t.$form.createFormField({value:t.fields.workSwitch.value})}},onValuesChange:function(a,o){t.workFlowRevise.wftId=e.wftId}}))},handleOkReviseworkflow:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,a){e||(t.workFlowRevise.remark=a.workflowRemark,t.workFlowRevise.wftName=a.workflowName,t.workFlowRevise.interrupt=1==a.workSwitch?1:0,t.visibleReviseworkflow=!1,Object(i["f"])(t.workFlowRevise).then((function(e){t.$message.success("修改工作流成功"),t.getListdata()})))}))},ReviseRole:function(e){var t=this;this.visibleRolename=!0,e.roleId&&(this.Rolerevise.roleId=e.roleId,this.fieldsRole.roleName.value=e.roleName,this.fieldsRole.roleMark.value=e.roleMark,setTimeout((function(){t.formRole.setFieldsValue({roleName:t.fieldsRole.roleName.value,roleMark:t.fieldsRole.roleMark.value})}),0),this.formRole=this.$form.createForm(this,{onFieldsChange:function(e,a){t.$emit("change",a)},mapPropsToFields:function(){return{roleName:t.$form.createFormField({value:t.fieldsRole.roleName.value}),roleMark:t.$form.createFormField({value:t.fieldsRole.roleMark.value})}},onValuesChange:function(e,t){}}))},handleOkRole:function(e){this.handleSubmitRole(e)},handleSubmitRole:function(e){var t=this;e.preventDefault(),this.formRole.validateFields((function(e,a){e||(t.Rolerevise.roleName=a.roleName,t.Rolerevise.roleMark=a.roleMark,t.visibleRolename=!1,Object(i["b"])(t.Rolerevise).then((function(e){"success"==e.data.message&&(t.$message.success("修改角色成功"),t.getRoleListData())})))}))},userNameError:function(){},addchangeInput:function(){this.formadd.validateFields(["workflowName"],(function(e,t){}))},addchangeTextarea:function(){this.formadd.validateFields(["workflowRemark"],(function(e,t){}))},addNewMeunlogochangeInput:function(){this.formaddmenu.validateFields(["workflowName"],(function(e,t){}))},addNewMeunNamechange:function(){this.formaddmenu.validateFields(["workflowRemark"],(function(e,t){}))},onEdit:function(e,t){this[t](e)},dynamicAdd:function(e){this.$store.dispatch("workflowListdynamicAdd",e)}}},u=c,m=(a("b9d6"),a("6691")),f=Object(m["a"])(u,o,r,!1,null,"4e67ff4c",null);t["default"]=f.exports},b9d6:function(e,t,a){"use strict";var o=a("193e"),r=a.n(o);r.a}}]);
//# sourceMappingURL=chunk-331bb70f.b7751fe1.js.map