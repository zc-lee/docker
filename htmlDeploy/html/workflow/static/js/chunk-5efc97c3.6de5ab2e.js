(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5efc97c3"],{"0a2e":function(t,e,n){"use strict";var i=n("6a7b"),r=n.n(i);r.a},"0e5f":function(t,e,n){var i,r,o;(function(n,s){r=[e,t],i=s,o="function"===typeof i?i.apply(e,r):i,void 0===o||(t.exports=o)})(0,(function(t,e){"use strict";var n={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function i(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function r(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}function s(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=t,a=e.timeout||n.timeout,c=e.jsonpCallback||n.jsonpCallback,l=void 0;return new Promise((function(n,u){var d=e.jsonpCallbackFunction||i(),h=c+"_"+d;window[d]=function(t){n({ok:!0,json:function(){return Promise.resolve(t)}}),l&&clearTimeout(l),o(h),r(d)},s+=-1===s.indexOf("?")?"?":"&";var p=document.createElement("script");p.setAttribute("src",""+s+c+"="+d),e.charset&&p.setAttribute("charset",e.charset),p.id=h,document.getElementsByTagName("head")[0].appendChild(p),l=setTimeout((function(){u(new Error("JSONP request to "+t+" timed out")),r(d),o(h),window[d]=function(){r(d)}}),a),p.onerror=function(){u(new Error("JSONP request to "+t+" failed")),r(d),o(h),l&&clearTimeout(l)}}))}e.exports=s}))},"19c8":function(t,e,n){"use strict";var i=n("dcbb"),r=n.n(i);r.a},"1e2d":function(t,e){t.exports="data:image/gif;base64,R0lGODlhEAAQALMAAD8/Xz9fP7+/f9/fn39/X9/fv9+/P//78N+/f79/P59/X7+ff39fX////////wAAACH5BAEAAA4ALAAAAAAQABAAAARo0MlJqwwMh81ZDtcRNCR5FANwAOF4vOcxBADrBGIDF/K82DhXbDAQBH4hho5HFAgAyNuBQaw6n1GcAcDZ1AzZA2JMJoOBh21tvQ5vFQR4oFCAordxQmJejzLSAHAJe3R2E2yIbBaLFBEAOw=="},"2bb8":function(t,e,n){"use strict";var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"===typeof t?o(s(t),(function(s){var a=encodeURIComponent(i(s))+n;return r(t[s])?o(t[s],(function(t){return a+encodeURIComponent(i(t))})).join(e):a+encodeURIComponent(i(t[s]))})).join(e):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i));return n}var s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},"478d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{margin:"24px"}},[i("header",[i("div",{staticClass:"title"},[t._v("选择导航元件开始设计")]),i("div",{staticClass:"btns"},[i("div",{staticClass:"btn",attrs:{id:"add"},on:{click:function(e){return t.add()}}},[i("img",{attrs:{src:n("ef69")}}),t._v("\n        任务\n      ")]),i("div",{staticClass:"btn",class:{select:"connect"==t.canvas.btnState},on:{click:function(e){return t.connect()}}},[i("img",{attrs:{src:n("9833")}}),t._v("\n        画线\n      ")]),i("div",{staticClass:"btn",class:{select:"choose"==t.canvas.btnState},on:{click:function(e){return t.choose()}}},[i("img",{attrs:{src:n("77fe")}}),t._v("\n        选择\n      ")]),i("div",{staticClass:"btn",class:{select:"delete"==t.canvas.btnState},on:{click:function(e){return t.del()}}},[i("img",{attrs:{src:n("86e6")}}),t._v("\n        删除\n      ")]),i("div",{staticClass:"btn",on:{click:t.saveFlow}},[i("img",{attrs:{src:n("1e2d")}}),t._v("\n        保存\n      ")])])]),i("div",{attrs:{id:t.boxId}}),i("a-modal",{ref:"flowmodal",staticClass:"modal-info",attrs:{width:t.item.lineId?"500px":"750px",title:"工作流",visible:t.visible,okText:"确定"},on:{cancel:function(e){t.visible=!1},ok:t.saveNode}},[t.item.lineId?i("line-info",{ref:"line",staticClass:"line-info",attrs:{item:t.item,id:"line-info"}}):i("rect-info",{ref:"rect",staticClass:"rect-info",attrs:{item:t.item}})],1)],1)},r=[];function o(t){if(Array.isArray(t))return t}function s(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done);i=!0)if(n.push(s.value),e&&n.length===e)break}catch(c){r=!0,o=c}finally{try{i||null==a["return"]||a["return"]()}finally{if(r)throw o}}return n}}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(t,e){return o(t)||s(t,e)||a()}n("f763"),n("21de"),n("cde0"),n("63ff");var l=n("cec5");n("0857"),n("7364");class u{init(){this.createCanvasDom(),this.draw(),this.options.edit&&this.addMethodToWindow()}addMethodToWindow(){let t={add:"addItem",delete:"deleteItem",connect:"connectItem",choose:"chooseOne"},{This:e,options:n}=this;for(let[i,r]of Object.entries(this.methodsName))e[r]=this[t[i]].bind(this),n.useBtn&&e!=window&&(window[r]=this[t[i]].bind(this));window.onkeydown=t=>{this.dialog||"Delete"!=t.key&&"Backspace"!=t.key||this.delete(null)}}checkAddMethodToWindow(t){let{This:e}=this;return Object.keys(e).some(e=>e==t)}createCanvasDom(){this.cid=this.createRandomId();let{cid:t}=this,{width:e,height:n,cssText:i,textBaseline:r,textAlign:o,font:s}=this.style,{type:a,useBtn:c,edit:l,addId:u}=this.options,d='\n            <div style="display: flex;justify-content: space-around;text-align: center;margin: 0px;background-color: rgb(255, 255, 255);width: 450px;padding: 3px;border: 1px solid #aaa;font-size: 12px;">\n            <span id=\'add\' class="canvas-btn" onclick="add()">add</span>\n            <span id=\'delete\' class="canvas-btn" onclick="del()">del</span>\n            <span id=\'connect\' class="canvas-btn" onclick="connect()">connect</span>\n            <span id=\'choose\' class="canvas-btn" onclick="choose()">choose</span>\n          </div>\n        ',h=`\n        <canvas id="${t}" width="${e}" height="${n}">\n            <p>浏览器不支持Canvas</p>\n        </canvas>\n        `,p=t=>{t.onmousedown=t=>{t.preventDefault(),this.dragAdd=!0},t.onmouseup=t=>{t.preventDefault(),this.dragAdd=!1}};if(this.DOM.innerHTML=l&&c?d+h:h,c){let t=document.getElementsByClassName("canvas-btn");for(let e=0;e<t.length;e++)t[e].style.cssText="border: 1px solid #808080;padding: 3px;width: 80px;cursor: pointer;",t[e].style.background=this.btnState==t[e].id?"#ccc":null,t[e].onmouseover=()=>{t[e].style.background="#ccc"},t[e].onmouseout=()=>{t[e].style.background=this.btnState==t[e].id?"#ccc":null},"add"==t[e].id&&p(t[e])}if(u){let t=document.getElementById(u);p(t)}let f=document.getElementById(t);if(!f.getContext)return console.error("你的浏览器不支持Canvas!");l&&["onmousedown","onmouseup","onmouseout","onmousemove","ondblclick"].forEach(t=>{f[t]=this[t].bind(this)}),f.style.cssText=i,this.canvas=f,this.ctx=this.canvas.getContext(a),Object.assign(this.ctx,{textBaseline:r,textAlign:o,font:s})}}var d={connect(t){this.choose(t);let{lineFrom:e,chooseItem:n}=this;if(!n||this.typeIsLine(n))return this.lineFrom=null;if(e){if(n.id==e.id)return;{let{toStart:t,to:e,alertWarn:i}=this.options.connectRule,{startId:r}=this.options,o="to can`t be start node!!!",s="to can`t match to rule!!!";if(!t&&n.id==r)return i?alert(o):console.warn(o);if(!e)return i?alert(s):console.warn(s);this.addLine(n.id),this.options.btnState.connect||this.chooseOne()}}else{let{fromEnd:t,from:e,alertWarn:i}=this.options.connectRule,{endId:r}=this.options,o="from can`t be end node!!!",s="from can`t match from rule!!!";if(!t&&n.id==r)return i?alert(o):console.warn(o);if(!e)return i?alert(s):console.warn(s);this.lineFrom=n}},choose(t){this._startXY=this.getPointerXY(t),this.chooseItem=this.isItem(...this._startXY),this.getControlType(...this._startXY),this.changePointer(t),this.draw(),this.chooseItem?(this.moveItemToEnd(),this.canMove=!0):this.options.clickEmptyInit&&"choose"!=this.btnState&&(this.btnState="choose")},async delete(t){t&&this.choose(t);let{chooseItem:e}=this,{beforeDelete:n}=this.methods,{deleteStartEnd:i,startId:r,endId:o}=this.options;if(e){if(!i&&!this.typeIsLine(e)&&(e.id==r||e.id==o))return console.warn("Pleace set options deleteStartEnd");n&&await n(e),this.delItem()}},addItem(){this.addRect()},deleteItem(){if(!this.options.btnState.delete)return this.delete();this.changeBtnState("delete")},connectItem(){this.changeBtnState("connect"),this.chooseItem=null,this.lineFrom=null,this.draw()},chooseOne(){this.changeBtnState("choose")},changeBtnState(t){this.btnState=t;let e=document.getElementsByClassName("canvas-btn");for(let n=0;n<e.length;n++){let i=e[n].id==t?"#ccc":null;e[n].style.background=i}}},h={addRect(t=this.options.flex,e=this.options.flex,n=this.style.rectWidth,i=this.style.rectHeight,r=this.rectId,o=this.options.title,s=this.options.text){let a={x:t,y:e,width:n,height:i,id:r,title:o,text:s};this.rects.push(a),this.rectId++,this.rectId==this.options.endId&&this.rectId++,this.chooseItem=a,this.draw()},delRect(t){let{lines:e,rects:n}=this;if(this.rects=n.filter(e=>e.id!=t.id),!e[0])return this.draw();e.forEach(e=>{this.isRectHaveLineRule(t,e)&&this.delLine(e)})},drawRect(){let{ctx:t,style:e,chooseItem:n}=this,{flex:i,endId:r}=this.options,{rectlineWidth:o}=this.style;t.lineWidth=o,this.rects.forEach(o=>{t.strokeStyle=e.rectColor,t.fillStyle=e.fillColor;let{x:s,y:a,width:c,height:l}=o;t.fillRect(s,a,c,l),t.strokeRect(s,a,c,l),o.title&&this.drawText(r==o.id?o.title:`${o.id}-`+o.title,o.x+o.width/2,o.y+i+12,o.width-2*i,1),o.text&&this.drawText(o.text,o.x+o.width/2,o.y+o.height/2,o.width-2*i,2),n&&!this.typeIsLine(n)&&n.id==o.id&&(t.strokeStyle=e.chooseColor,t.strokeRect(o.x-i,o.y-i,o.width+2*i,o.height+2*i))})},moveRect(t){let e=this.chooseItem,n=this._startXY,i=this.getPointerXY(t),r=[i[0]-n[0],i[1]-n[1]];this._startXY=i,Object.assign(e,{x:e.x+r[0],y:e.y+r[1]});let{lines:o}=this;o.some(t=>this.isRectHaveLineRule(e,t))&&this.moveLine(e),this.draw()},resizeRect(t){let{control:e,chooseItem:n,_startXY:i,lines:r}=this,o=this.getPointerXY(t),s=[o[0]-i[0],o[1]-i[1]];this._startXY=o;let a={x:/Left/.test(e)?n.x+s[0]:n.x,y:/Top/.test(e)?n.y+s[1]:n.y,width:/Left|Right/.test(e)?/Left/.test(e)?n.width-s[0]:n.width+s[0]:n.width,height:/Top|Bottom/.test(e)?/Top/.test(e)?n.height-s[1]:n.height+s[1]:n.height};a.width>0&&a.height>0&&(Object.assign(n,a),r.some(t=>this.isRectHaveLineRule(n,t))&&this.moveLine(n),this.draw())},isRect(){let t=(t,e)=>{let{flex:n}=this.options,[i,r,o,s]=[t.x-n,t.y-n,t.x+t.width+2*n,t.y+t.height+2*n],[a,c]=e;return a>i&&a<o&&c>r&&c<s},e=this.rects.filter(e=>t(e,arguments));return e.reverse()[0]}};let p=(t,e,n,i)=>{var r=(e[1]-t[1])*(i[0]-n[0])-(t[0]-e[0])*(n[1]-i[1]);if(0==r)return!1;var o=((e[0]-t[0])*(i[0]-n[0])*(n[1]-t[1])+(e[1]-t[1])*(i[0]-n[0])*t[0]-(i[1]-n[1])*(e[0]-t[0])*n[0])/r,s=-((e[1]-t[1])*(i[1]-n[1])*(n[0]-t[0])+(e[0]-t[0])*(i[1]-n[1])*t[1]-(i[0]-n[0])*(e[1]-t[1])*n[1])/r;return(o-t[0])*(o-e[0])<=0&&(s-t[1])*(s-e[1])<=0&&(o-n[0])*(o-i[0])<=0&&(s-n[1])*(s-i[1])<=0&&[Math.floor(o),Math.floor(s)]};var f=p,m=function(t){let{ctx:e}=this,{flex:n}=this.options,i=t.nodes[t.nodes.length-1],r=t.nodes[t.nodes.length-2],[o,s]=r,[a,c]=i,l=30,u=1.5*n,d=180*Math.atan2(s-c,o-a)/Math.PI,h=(d+l)*Math.PI/180,p=(d-l)*Math.PI/180,f=u*Math.cos(h),m=u*Math.sin(h),v=u*Math.cos(p),y=u*Math.sin(p);e.beginPath();var b=o-f,g=s-m;e.moveTo(b,g),e.moveTo(o,s),e.lineTo(a,c),b=a+f,g=c+m,e.moveTo(b,g),e.lineTo(a,c),b=a+v,g=c+y,e.lineTo(b,g),e.closePath(),e.fill(),e.stroke()},v=function(t,e,n,i,r,o){var s,a,c=t-n,l=e-i,u=r-n,d=o-i,h=c*u+l*d,p=u*u+d*d,f=-1;0!=p&&(f=h/p),f<0?(s=n,a=i):f>1?(s=r,a=o):(s=n+f*u,a=i+f*d);var m=t-s,v=e-a;return Math.sqrt(m*m+v*v)},y={linesInt:f,drawArrow:m,dotLineDistence:v,addLine(t){let e=this.lineFrom.id,n=this.lines;n.some(n=>n.from==e&&n.to==t||n.from==t&&n.to==e)?alert("line has exist!!!"):(this.lines.push({from:e,to:t,nodes:this.getInitLineNodes({from:e,to:t}),id:this.lineId}),this.lineId++),this.chooseItem=null,this.lineFrom=null,this.draw()},delLine(t){this.lines=this.lines.filter(e=>e.id!=t.id),this.draw()},getInitLineNodes(t){let{from:e,to:n}=t,{rects:i}=this,r=i.find(t=>t.id==e),o=i.find(t=>t.id==n);if(!r||!o)return[];let s=[r.x+r.width/2,r.y+r.height/2],a=[o.x+o.width/2,o.y+o.height/2];return[this.getRectLineInt(r,[s,a]),this.getRectLineInt(o,[s,a])]},getLineNodes(t,e="circle"){let n=[],i=t.nodes;return i.forEach((t,r)=>{if("all"==e?n.push(t):"center"!=e&&0!=r&&r!=i.length-1&&n.push(t),i[r+1]&&"nodes"!=e){let t=i[r],e=i[r+1];n.push([(t[0]+e[0])/2,(t[1]+e[1])/2])}}),n},drawLine(){let{ctx:t,lines:e,chooseItem:n,style:i,options:r}=this;t.lineWidth=i.lineWidth,t.lineJoin=i.lineJoin,t.lineCap=i.lineCap,e.forEach(e=>{e.nodes=e.nodes||this.getInitLineNodes(e);let o=n&&this.typeIsLine(n)&&e.id==n.id;e.nodes[0]&&(r.dragLine&&o&&(t.fillStyle=i.chooseColor,this.getLineNodes(e).forEach(e=>{t.beginPath(),t.arc(...e,2,0,2*Math.PI),t.fill(),t.stroke()})),t.strokeStyle=t.fillStyle=o?i.chooseColor:i.lineColor,t.beginPath(),e.nodes.forEach((e,n)=>{t[0==n?"moveTo":"lineTo"](...e)}),t.stroke(),this.drawArrow(e))})},getRectLineInt(t,e){let[n,i,r,o]=[t.x,t.x+t.width,t.y,t.y+t.height],s=this.linesInt(...e,[n,r],[i,r])||this.linesInt(...e,[n,o],[i,o])||this.linesInt(...e,[n,r],[n,o])||this.linesInt(...e,[i,r],[i,o]);return s},isDotInLine(t,e){let n=(t,e,n)=>{let[i,r]=t,[o,s]=e,[a,c]=n,{flex:l}=this.options,u=o<a?o:a,d=o>a?o:a,h=s<c?s:c,p=s>c?s:c,f=this.dotLineDistence(i,r,o,s,a,c);return u-l<i&&d+l>i&&h-l<r&&p+l>r&&f<l},[i,r]=e,o=t.nodes,s=o.find((t,e)=>{if(!o[e+1])return!1;let s=o[e],a=o[e+1];return n([i,r],s,a)});return s},isDotInCenterDot(t,e){if(!this.isDotInLine(...arguments))return;let n=this.getLineNodes(t),{flex:i}=this.options,[r,o]=e;return n.find(t=>{let e=t[0]-i,n=t[0]+i,s=t[1]-i,a=t[1]+i;return r>e&&r<n&&o>s&&o<a})},dragLine(t){let{chooseItem:e}=this,{flex:n}=this.options,i=this.getPointerXY(t),r=this._startXY,o=this.getLineNodes(e,"all"),s=this.getLineNodes(e,"center");if(!this.isDotInLine(e,i)){let t=o.findIndex(t=>t[0]==r[0]&&t[1]==r[1]);this._startXY=o[t]=i,o=o.filter(t=>!s.some(e=>e[0]==t[0]&&e[1]==t[1]));let a=t=>{for(let e=1;e<t.length-1;e++){let[i,r]=t[e-1],[o,s]=t[e],[c,l]=t[e+1];if(this.dotLineDistence(o,s,i,r,c,l)<n)return t.splice(e,1),a(t)}return t};e.nodes=a(o),this.draw()}},moveLine(t){let{lines:e}=this,n=e.filter(e=>this.isRectHaveLineRule(t,e)),i=e=>{let n=t.id==e.from;if(2==e.nodes.length)e.nodes=this.getInitLineNodes(e);else{let i=n?0:e.nodes.length-1,r=[t.x+t.width/2,t.y+t.height/2];e.nodes[i]=this.getRectLineInt(t,[r,e.nodes[n?1:e.nodes.length-2]])}};n.forEach(t=>i(t))},isLine(){let t=this.lines.filter(t=>this.isDotInLine(t,arguments));return t.reverse()[0]}},b={drawText(t,e,n,i,r=null){if(!t)return;let{ctx:o,style:s}=this,a=t.split(""),c="",l=[],u=16,d=t=>{return o.measureText(t).width};o.fillStyle=s.fontColor;for(let h=0;h<a.length;h++)d(c)<i&&d(c+a[h])<=i?c+=a[h]:(l.push(c),c=a[h]);l.push(c);for(let h=0;h<l.length;h++){let t=l[h];if(h+1==r)return l[h+1]&&(t=t.substring(0,t.length-3)+"..."),o.fillText(t,e,n+u*h);o.fillText(t,e,n+u*h)}}},g={...h,...y,...b,draw(){this.clearCanvas(),this.lines[0]&&this.drawLine(),this.rects[0]&&this.drawRect()},clearCanvas(){let{width:t,height:e}=this.style;this.ctx.clearRect(0,0,t,e)},isRectHaveLineRule(t,e){return e.from==t.id||e.to==t.id},dragging(t){let{chooseItem:e,rects:n,lines:i}=this,r=this.typeIsLine(e),o=r?i:n,s=o.find(t=>t.id==e.id);s&&(r?this.dragLine(t):this.moveRect(t))},isItem(){return this.isRect(...arguments)||this.isLine(...arguments)},typeIsLine(t){return Reflect.has(t,"nodes")},moveItemToEnd(){let{chooseItem:t}=this;if(!t)return;let e=this.typeIsLine(t)?"lines":"rects",n=this[e].findIndex(e=>e.id==t.id);this[e]=this[e].concat(this[e].splice(n,1))},delItem(t=this.chooseItem){this.typeIsLine(t)?this.delLine(t):this.delRect(t),this.draw()}},w={getControlType(t,e){let n=null,i=this.chooseItem;if(!i)return;let{flex:r}=this.options,[o,s,a,c]=[i.y,i.y+i.height,i.x,i.x+i.width];this.options.dragLine&&this.typeIsLine(i)?this.isDotInCenterDot(i,[t,e])&&(n="dragging",this._startXY=this.isDotInCenterDot(i,[t,e])):a-r<t&&t<a?o-r<e&&e<o?n="resizeToTopLeft":s<e&&e<s+r?n="resizeToBottomLeft":o<e<s&&(n="resizeToLeft"):c<t&&t<c+r?o-r<e&&e<o?n="resizeToTopRight":s<e&&e<s+r?n="resizeToBottomRight":o<e&&e<s&&(n="resizeToRight"):a<t&&t<c&&(e<o&&e>o-r?n="resizeToTop":s+r>e&&e>s?n="resizeToBottom":o<e&&e<s&&(n="dragging")),this.control=n},clearControl(){this.control=null,this.canMove=!1},changePointer(t){let e="default";"resizeToTop"==this.control||"resizeToBottom"==this.control?e="s-resize":"resizeToLeft"==this.control||"resizeToRight"==this.control?e="e-resize":"resizeToTopLeft"==this.control||"resizeToBottomRight"==this.control?e="se-resize":"resizeToBottomLeft"==this.control||"resizeToTopRight"==this.control?e="ne-resize":this.isItem(...this.getPointerXY(t))&&(e="pointer"),this.canvas.style.cursor=e},getPointerXY(t){let{canvas:e}=this,n=t.pageX-e.offsetLeft,i=t.pageY-e.offsetTop;return[n,i]},throttle(t,e=1e3/this.options.frame){return function(){var n=(new Date).getTime();n-this._lastTime>e&&(t.apply(this,arguments),this._lastTime=n)}.call(this)},createRandomId(){return(1e7*Math.random()).toString(16).substr(0,4)+"-"+(new Date).getTime()+"-"+Math.random().toString().substr(2,5)}},A={onmousedown(t){this[this.btnState](t)},onmouseup(t){this.clearControl(t)},onmouseout(t){this.onmouseup(t)},onmousemove(t){this.throttle(function(t){if(this.dragAdd){let[e,n]=this.getPointerXY(t);this._startXY=[e,n],this.addRect(e,n),this.canMove=!0,this.dragAdd=!1,this.control="dragging"}else this.chooseItem&&(this.canMove?"dragging"==this.control?this.dragging(t):this.resizeRect(t):this.getControlType(...this.getPointerXY(t)));this.changePointer(t)}.bind(this,t))},ondblclick(t){this.choose(t),this.clearControl();let{chooseItem:e}=this;if(!e)return;let{dbClick:n}=this.methods;if(!n)return console.warn("Pleace add params of dbClick method");n(e)}};class x extends u{constructor(){super(),Object.assign(this,g,d,w,A)}}class I extends x{constructor({id:t="Canvas",This:e=window,dialog:n=!1,style:i={},methodsName:r={},methods:o={dbClick:null,beforeDelete:null},options:s={},rects:a=[],lines:c=[]}){super();let l={width:1e3,height:800,cssText:null,rectWidth:100,rectHeight:100,rectColor:"#000",rectlineWidth:1,lineColor:"#808080",chooseColor:"#808080",fillColor:"#fff",lineWidth:1,lineCap:"round",lineJoin:"round",fontColor:"#808080",textBaseline:"middle",textAlign:"center",font:"12px arial"},u={type:"2d",useBtn:!0,clickEmptyInit:!0,btnState:{choose:!0,delete:!0,connect:!0},connectRule:{alertWarn:!1,fromEnd:!1,toStart:!1,from:()=>{return!0},to:()=>{return!0}},addId:null,dragLine:!0,edit:!0,frame:60,flex:6,deleteStartEnd:!1,startId:1,endId:999999999,title:"",text:""},d={add:"add",delete:"del",connect:"connect",choose:"choose"};Object.assign(l,i),Object.assign(u,s),Object.assign(d,r),Object.assign(this,{id:t,This:e,dialog:n,style:l,options:u,methodsName:d,methods:o,rects:a,lines:c,DOM:document.getElementById(t),chooseItem:null,control:null,isDragging:!1,dragAdd:!1,_lastTime:0,_startXY:[0,0],lineFrom:null,btnState:"choose",rectId:1,lineId:c[0]?Math.max(...c.map(t=>t.id))+1:1}),this.rectId=a[0]?Math.max(...a.map(t=>t.id).filter(t=>t!=this.options.endId))+1:1,this.init()}}var k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rect-modal-box-outer"},[n("a-form",{staticClass:"rect-modal-box",attrs:{layout:"inline"}},[n("div",{staticClass:"form-one-line"},[n("a-form-item",{staticStyle:{flex:"1"},attrs:{colon:"",label:"过程编号","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-input",{staticClass:"input-copy-ant input-height",staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:t.item.nodeId,callback:function(e){t.$set(t.item,"nodeId",e)},expression:"item.nodeId"}})],1),n("a-form-item",{staticStyle:{flex:"1"},attrs:{label:"过程名称","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-input",{staticClass:"input-copy-ant-text input-height",staticStyle:{width:"100%"},model:{value:t.item.nodeName,callback:function(e){t.$set(t.item,"nodeName",e)},expression:"item.nodeName"}})],1)],1),n("div",{staticClass:"form-one-line"},[n("a-form-item",{staticStyle:{flex:"1"},attrs:{label:"当前节点执行方式：","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-select",{staticClass:"input-height",on:{change:t.nowModechange},model:{value:t.item.nowMode,callback:function(e){t.$set(t.item,"nowMode",e)},expression:"item.nowMode"}},[n("a-select-option",{attrs:{value:1}},[t._v("必须执行")]),n("a-select-option",{attrs:{value:2}},[t._v("允许跳过")])],1)],1),n("a-form-item",{staticStyle:{flex:"1"},attrs:{label:"后续节点执行方式：","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-select",{staticClass:"input-height",staticStyle:{width:"120px"},model:{value:t.item.nextMode,callback:function(e){t.$set(t.item,"nextMode",e)},expression:"item.nextMode"}},[n("a-select-option",{attrs:{value:1}},[t._v("自动执行")]),n("a-select-option",{attrs:{value:2,disabled:1!=t.item.nowMode}},[t._v("手动选择")])],1)],1)],1),n("div",{staticClass:"form-one-line"},[n("a-form-item",{staticStyle:{flex:"1"},attrs:{colon:"",label:"执行周期(小时)：","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-input",{staticClass:"input-height",attrs:{type:"number",min:"0"},model:{value:t.item.period,callback:function(e){t.$set(t.item,"period",e)},expression:"item.period"}})],1),n("a-form-item",{staticStyle:{flex:"1"},attrs:{label:"最少执行人数：","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-input",{staticClass:"input-height",attrs:{type:"number",min:"0"},model:{value:t.item.minUser,callback:function(e){t.$set(t.item,"minUser",e)},expression:"item.minUser"}})],1)],1),n("div",{staticClass:"form-one-line rejectable"},[n("a-form-item",{staticStyle:{flex:"1"},attrs:{label:"可驳回过程：","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-select",{staticClass:"input-height",staticStyle:{width:"100%"},attrs:{mode:"tags",placeholder:"请选择可驳回过程",disabled:1==t.item.nodeId||9999==t.item.nodeId},model:{value:t.tempRejectNode,callback:function(e){t.tempRejectNode=e},expression:"tempRejectNode"}},t._l(t.rejectList,(function(e){return n("a-select-option",{key:String(e.nodeId),attrs:{value:e.nodeName}},[t._v(t._s(e.nodeName))])})),1)],1),n("a-form-item",{staticClass:"input-height",staticStyle:{flex:"1"},attrs:{label:"驳回提交方式：","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-select",{staticStyle:{width:"120px"},model:{value:t.item.rejectMode,callback:function(e){t.$set(t.item,"rejectMode",e)},expression:"item.rejectMode"}},[n("a-select-option",{attrs:{value:1}},[t._v("可选（默认）")]),n("a-select-option",{attrs:{value:2}},[t._v("只能到开始")]),n("a-select-option",{attrs:{value:3}},[t._v("只能到上一步")])],1)],1)],1),n("a-form-item",{staticClass:"Submit-suggestion",attrs:{label:"缺省提交意见：","label-col":{span:4},"wrapper-col":{span:10}}},[n("a-input",{staticClass:"input-height",model:{value:t.item.defOpinion,callback:function(e){t.$set(t.item,"defOpinion",e)},expression:"item.defOpinion"}})],1),n("br"),n("a-form-item",{staticClass:"Submit-suggestion",attrs:{label:"执行人:","label-col":{span:4},"wrapper-col":{span:10}}},[n("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请输入执行人",filterOption:!1,notFoundContent:t.fetching?void 0:null},on:{search:t.fetchUser,change:t.handleChange},model:{value:t.item.tempuserIdList,callback:function(e){t.$set(t.item,"tempuserIdList",e)},expression:"item.tempuserIdList"}},[t.fetching?n("a-spin",{attrs:{slot:"notFoundContent",size:"small"},slot:"notFoundContent"}):t._e(),t._l(t.data,(function(e){return n("a-select-option",{key:e.value},[t._v(t._s(e.text))])}))],2)],1),n("div",{staticClass:"form-one-line"},[n("a-form-item",{staticStyle:{flex:"1"},attrs:{label:"决策者：","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-select",{staticClass:"input-height",model:{value:t.item.decideUser,callback:function(e){t.$set(t.item,"decideUser",e)},expression:"item.decideUser"}},t._l(t.decideUserList,(function(e,i){return n("a-select-option",{key:i,attrs:{value:e.userId}},[t._v(t._s(e.userName))])})),1)],1),n("a-form-item",{staticStyle:{flex:"1"},attrs:{label:"过程类型：","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-select",{staticClass:"input-height",staticStyle:{width:"120px"},model:{value:t.item.nodeType,callback:function(e){t.$set(t.item,"nodeType",e)},expression:"item.nodeType"}},[n("a-select-option",{attrs:{value:3}},[t._v("普通")]),n("a-select-option",{attrs:{value:4}},[t._v("归档")]),n("a-select-option",{attrs:{value:5}},[t._v("会签")])],1)],1)],1),n("a-form-item",{staticClass:"Submit-suggestion",attrs:{label:"执行岗位:","label-col":{span:4},"wrapper-col":{span:10}}},[n("a-select",{staticClass:"input-height",staticStyle:{width:"100%"},attrs:{mode:"tags",placeholder:"请选择执行角色",disabled:9999==t.item.nodeId},on:{change:t.handleChangePost},model:{value:t.item.temppostIdList,callback:function(e){t.$set(t.item,"temppostIdList",e)},expression:"item.temppostIdList"}},t._l(t.rolelist,(function(e){return n("a-select-option",{key:String(e.postId),attrs:{value:e.postName}},[t._v(t._s(e.postName))])})),1)],1),n("br"),n("div",{staticStyle:{"padding-left":"130px"}},[n("a-checkbox-group",{attrs:{disabled:1==t.item.nodeId||9999==t.item.nodeId},model:{value:t.item.chooseval,callback:function(e){t.$set(t.item,"chooseval",e)},expression:"item.chooseval"}},t._l(t.plainOptions,(function(e,i){return n("a-checkbox",{key:i,staticClass:"filter-check-box",attrs:{value:e.value}},[t._v(t._s(e.value))])})),1)],1),n("br"),n("div",{staticClass:"form-one-line"},[n("a-form-item",{staticStyle:{flex:"1"},attrs:{label:"通知方式：","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-select",{staticClass:"input-height",staticStyle:{width:"120px"},model:{value:t.item.noticeWay,callback:function(e){t.$set(t.item,"noticeWay",e)},expression:"item.noticeWay"}},[n("a-select-option",{attrs:{value:0}},[t._v("一云通推送")]),n("a-select-option",{attrs:{value:1}},[t._v("邮件通知")])],1)],1),n("a-form-item",{staticStyle:{flex:"1"},attrs:{label:"通知类型：","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-select",{staticClass:"input-height",staticStyle:{width:"120px"},model:{value:t.item.noticeType,callback:function(e){t.$set(t.item,"noticeType",e)},expression:"item.noticeType"}},[n("a-select-option",{attrs:{value:0}},[t._v("立即通知")]),n("a-select-option",{attrs:{value:1}},[t._v("延时通知")])],1)],1)],1),n("div",{staticClass:"form-one-line"},[n("a-form-item",{staticStyle:{flex:"1"},attrs:{colon:"",label:"通知周期(小时)：","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}},[n("a-input",{staticClass:"input-height",attrs:{type:"number",min:"0"},model:{value:t.item.noticeCycle,callback:function(e){t.$set(t.item,"noticeCycle",e)},expression:"item.noticeCycle"}})],1),n("a-form-item",{staticStyle:{flex:"1"},attrs:{label:"","label-col":t.formItemLayout.labelCol,"wrapper-col":t.formItemLayout.wrapperCol}})],1),n("a-form-item",{staticClass:"Submit-suggestion",attrs:{label:"通知目标(用户):","label-col":{span:4},"wrapper-col":{span:10}}},[n("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请输入执行人",filterOption:!1,notFoundContent:t.fetching?void 0:null},on:{search:t.fetchUser,change:t.handleChange},model:{value:t.item.tempuserIdList,callback:function(e){t.$set(t.item,"tempuserIdList",e)},expression:"item.tempuserIdList"}},[t.fetching?n("a-spin",{attrs:{slot:"notFoundContent",size:"small"},slot:"notFoundContent"}):t._e(),t._l(t.data,(function(e){return n("a-select-option",{key:e.value},[t._v(t._s(e.text))])}))],2)],1),n("a-form-item",{staticClass:"Submit-suggestion",attrs:{label:"到达时执行语句：","label-col":{span:4},"wrapper-col":{span:10}}},[n("a-textarea",{model:{value:t.item.arriveFunc,callback:function(e){t.$set(t.item,"arriveFunc",e)},expression:"item.arriveFunc"}})],1),n("br"),n("a-form-item",{staticClass:"Submit-suggestion",attrs:{label:"提交完成时语句：","label-col":{span:4},"wrapper-col":{span:10}}},[n("a-textarea",{model:{value:t.item.submitFunc,callback:function(e){t.$set(t.item,"submitFunc",e)},expression:"item.submitFunc"}})],1),n("br"),n("a-form-item",{staticClass:"Submit-suggestion",attrs:{label:"驳回成功后语句：","label-col":{span:4},"wrapper-col":{span:10}}},[n("a-textarea",{model:{value:t.item.rejectFunc,callback:function(e){t.$set(t.item,"rejectFunc",e)},expression:"item.rejectFunc"}})],1)],1)],1)},C=[],L=(n("d4d5"),n("608b"),n("0e5f"),n("5ee4"),n("12b1")),j=n.n(L),R=n("51a4"),T=n("2d80"),N=/^http[s]?:\/\/[\da-zA-Z][\da-zA-Z.-]*(:\d+)?[\da-zA-Z\/#&\+=%~]?/,P={props:["item"],data:function(){return this.lastFetchId=0,this.fetchUser=j()(this.fetchUser,800),{plainOptions:[{label:"reject",value:"是否禁止驳回"},{label:"beReject",value:"是否禁止被驳回"},{label:"dynamic",value:"是否可动态转交"}],valueuserIdList:[],data:[],personvalue:[],PositionValue:[],fetching:!1,dataposition:[],formItemLayout:{labelCol:{span:9},wrapperCol:{span:15}},roleName:[],rolelist:[],rejectList:[],tempRejectNode:[],canvasData:{},nowModeDisabled:!0,userList:[],decideUserList:[],keyArrlength:0}},mounted:function(){},methods:{validItem:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.item,n=!1,""!=e.nodeId){t.next=4;break}return this.$message.error("error info"),t.abrupt("return",n);case 4:if(""!=e.nodeName){t.next=7;break}return this.$message.error("节点名称不能为空"),t.abrupt("return",n);case 7:if(""!=e.nodeType){t.next=10;break}return this.$message.error("节点类型不能为空"),t.abrupt("return",n);case 10:if(""!=e.nowMode){t.next=13;break}return this.$message.error("当前过程执行方式不能为空"),t.abrupt("return",n);case 13:if(""!=e.nextMode){t.next=16;break}return this.$message.error("下一过程执行方式不能为空"),t.abrupt("return",n);case 16:if(""!=e.nodeType){t.next=19;break}return this.$message.error("节点类型不能为空"),t.abrupt("return",n);case 19:if(e.rejectMode){t.next=22;break}return this.$message.error("请选择驳回提交方式"),t.abrupt("return",n);case 22:if(!this.tempRejectNode){t.next=26;break}e.rejectNode=this.getRejectList(!1),t.next=28;break;case 26:return this.$message.error("可驳回过程error"),t.abrupt("return",n);case 28:if(!e.arriveFunc||N.test(e.arriveFunc)){t.next=31;break}return this.$message.error("到达时执行语句域名不正确"),t.abrupt("return",n);case 31:if(!e.submitFunc||N.test(e.submitFunc)){t.next=34;break}return this.$message.error("提交完成时语句域名不正确"),t.abrupt("return",n);case 34:if(!e.rejectFunc||N.test(e.rejectFunc)){t.next=37;break}return this.$message.error("驳回成功后语句域名不正确"),t.abrupt("return",n);case 37:return t.next=39,this.getRolelistmethod(e.temppostIdList,!1);case 39:return e.postIdList=t.sent,t.next=42,this.getUserlistmethod(e.tempuserIdList,!1);case 42:return e.userIdList=t.sent,this.validatecheckbox(),t.abrupt("return",this.item);case 45:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getRolelistmethod:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:[],n=!(o.length>1&&void 0!==o[1])||o[1],t.prev=2,!n){t.next=13;break}return t.next=6,Object(T["n"])();case 6:if(i=t.sent,i.data){t.next=9;break}return t.abrupt("return",[]);case 9:return this.rolelist=i.data,t.abrupt("return",e.map((function(t){return i.data.find((function(e){return e.postId==t})).postName})));case 13:return t.abrupt("return",e.map((function(t){return r.rolelist.find((function(e){return e.postName==t})).postId})));case 14:t.next=18;break;case 16:t.prev=16,t.t0=t["catch"](2);case 18:case"end":return t.stop()}}),t,this,[[2,16]])})));function e(){return t.apply(this,arguments)}return e}(),getUserlistmethod:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=o.length>0&&void 0!==o[0]?o[0]:[],n=!(o.length>1&&void 0!==o[1])||o[1],t.prev=2,!n){t.next=13;break}return t.next=6,Object(T["m"])();case 6:if(i=t.sent,i.data){t.next=9;break}return t.abrupt("return",[]);case 9:return this.userList=i.data,t.abrupt("return",e.map((function(t){return i.data.find((function(e){return e.userId==t})).userName})));case 13:return t.abrupt("return",e.map((function(t){return r.userList.find((function(e){return e.userName==t})).userId})));case 14:t.next=18;break;case 16:t.prev=16,t.t0=t["catch"](2);case 18:case"end":return t.stop()}}),t,this,[[2,16]])})));function e(){return t.apply(this,arguments)}return e}(),getDecideUserList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.decideUserList,i=this.userList;n=i.filter((function(t){return e.some((function(e){return e==t.userName}))})),n.some((function(e){return e.userId==t.item.decideUser}))||(this.item.decideUser=null),this.decideUserList=n},getRejectList:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.canvasData,n=e.lines,i=e.rects;if(!t)return this.tempRejectNode.map((function(t){return i.find((function(e){return e.nodeName==t})).nodeId}));var r=this.item.id,o=[],s=function t(e){if(n.some((function(t){return t.toNodeId==e}))){var r=n.find((function(t){return t.toNodeId==e})).fromNodeId;o.push({nodeId:r,nodeName:i.find((function(t){return t.nodeId==r})).nodeName||null}),t(r)}};s(r),this.rejectList=o,this.item.rejectNode?this.tempRejectNode=this.item.rejectNode.map((function(t){return i.find((function(e){return e.nodeId==t})).nodeName})):this.tempRejectNode=[]},onChangereject:function(t){this.item.reject=Number(t.target.checked)},onChangebeReject:function(t){this.item.beReject=Number(t.target.checked)},onChangedynamic:function(t){this.item.dynamic=Number(t.target.checked)},checkbox:function(t){var e=[];return t.map((function(t){1==t.reject&&e.push(t.name),1==t.beReject&&e.push(t.name),1==t.dynamic&&e.push(t.name)})),e},validatecheckbox:function(){var t=this,e=[];this.item.chooseval.map((function(n){t.plainOptions.map((function(t){t.value==n&&e.push({label:t.label,choose:1})}))})),e.find((function(t){return"dynamic"==t.label}))?this.item.dynamic=1:this.item.dynamic=0,e.find((function(t){return"reject"==t.label}))?this.item.reject=1:this.item.reject=0,e.find((function(t){return"beReject"==t.label}))?this.item.beReject=1:this.item.beReject=0},nowModechange:function(t){this.nowModeDisabled=2==t},fetchUser:function(t){var e=this;this.lastFetchId+=1;this.lastFetchId;this.data=[],this.fetching=!0,Object(T["l"])(t).then((function(t){var n=t.data;n=n.map((function(t){return{text:t.userName,value:t.userId}})),e.data=n,e.fetching=!1}))},handleChange:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object.assign(this,{value:e,data:[],fetching:!1}),this.long=e.length,!(this.item.len<=e.length)){t.next=14;break}return this.item.len++,n=e.length-1,e=e[e.length-1],this.item.tempuserIdList.splice(n),t.next=9,Object(T["m"])();case 9:i=t.sent,this.keyArr=i.data.find((function(t){return t.userId==e})).userName,this.item.tempuserIdList.push(this.keyArr),t.next=16;break;case 14:this.item.len--,this.item.tempuserIdList=e;case 16:this.getDecideUserList(this.item.tempuserIdList);case 17:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleChangePost:function(t){}}},S=P,O=(n("6821"),n("6691")),E=Object(O["a"])(S,k,C,!1,null,"1ac8aecc",null),B=E.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-form",{staticClass:"line-form"},[n("a-form-item",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,label:"分支编号："}},[n("input",{staticClass:"input-copy-ant line-input-height",staticStyle:{width:"100%"},attrs:{disabled:""},domProps:{value:t.item.lineId}})]),n("a-form-item",{staticClass:"required",attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,label:"分支名称："}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.item.lineName,expression:"item.lineName",modifiers:{trim:!0}}],staticClass:"input-copy-ant-text line-input-height",staticStyle:{width:"100%"},domProps:{value:t.item.lineName},on:{input:function(e){e.target.composing||t.$set(t.item,"lineName",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),n("a-form-item",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,label:"来源过程："}},[n("input",{staticClass:"input-copy-ant line-input-height",staticStyle:{width:"100%"},attrs:{disabled:""},domProps:{value:t.item.fromNodeId}})]),n("a-form-item",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,label:"目标过程："}},[n("input",{staticClass:"input-copy-ant line-input-height",staticStyle:{width:"100%"},attrs:{disabled:""},domProps:{value:t.item.toNodeId}})]),n("a-form-item",{attrs:{"label-col":t.labelCol,"wrapper-col":t.wrapperCol,label:"执行条件："}},[n("a-textarea",{staticStyle:{width:"100%",height:"60px"},attrs:{rows:4},model:{value:t.item.conditions,callback:function(e){t.$set(t.item,"conditions",e)},expression:"item.conditions"}})],1)],1)],1)},D=[],U=/^http[s]?:\/\/[\da-zA-Z][\da-zA-Z.-]*(:\d+)?[\da-zA-Z\/#&\+=%~]?/,z={props:["item"],data:function(){return{labelCol:{xs:{span:10},sm:{span:4}},wrapperCol:{xs:{span:20},sm:{span:20}}}},methods:{validItem:function(){return this.item.lineNode?(this.$message.error("请输入分支名称！"),!1):this.item.conditions&&!U.test(this.item.conditions)?(this.$message.error("执行条件域名不正确"),!1):this.item}}},F=z,X=(n("19c8"),Object(O["a"])(F,M,D,!1,null,"5c6eb916",null)),Q=X.exports,H=n("2f36"),Y=n("f48a").default,W=Y.getFlow,J=Y.saveFlow,Z=Y.getNode,V=Y.getLine,G=Y.putNode,_=Y.delNode,q=Y.putLine,K=Y.delLine,$={name:"edit",components:{rectInfo:B,lineInfo:Q},props:["wftId"],data:function(){return{id:null,boxId:null,canvas:{},item:{},visible:!1}},watch:{visible:function(){this.canvas.dialog=this.visible}},mounted:function(){"edit"==this.$route.name?this.init(this.$route.query.wft_id):this.init(this.wftId)},methods:{init:function(t){this.id=t,this.boxId=(1e7*Math.random()).toString(16).substr(0,4)+"-"+t+(new Date).getTime()+"-"+t+Math.random().toString().substr(2,5)+t,this.getFlow()},dbClick:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var n,i,r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=e.from?V:Z,i=e.from?{id:e.id,wftId:this.id,lineId:e.id,lineName:e.lineName,fromNodeId:e.from,toNodeId:e.to,conditions:null}:{id:e.id,wftId:this.id,nodeId:e.id,nodeName:e.text,nodeType:e.nodeType||3,nowMode:2,nextMode:1,period:0,reject:0,beReject:0,rejectNode:[],rejectMode:1,dynamic:1,decideUser:null,noticeWay:0,noticeType:0,noticeTarget:null,noticeCycle:0,wfmId:null,minUser:0,defOpinion:"同意",submitFunc:null,rejectFunc:null,arriveFunc:null,postIdList:[],temppostIdList:[],userIdList:[],tempuserIdList:[],len:0,chooseval:[]},this.item=i,this.visible=!0,t.next=6,n(this.id,e.id);case 6:if(r=t.sent,o=Object.assign(i,r.data||{}),e.from){t.next=24;break}return s=[],s.push({reject:o.reject,name:"是否禁止驳回"}),s.push({beReject:o.beReject,name:"是否禁止被驳回"}),s.push({dynamic:o.dynamic,name:"是否可动态转交"}),t.next=15,this.$refs.rect.getRolelistmethod(o.postIdList||[]);case 15:return o.temppostIdList=t.sent,t.next=18,this.$refs.rect.getUserlistmethod(o.userIdList||[]);case 18:o.tempuserIdList=t.sent,this.$refs.rect.getDecideUserList(o.tempuserIdList),o.chooseval=this.$refs.rect.checkbox(s||[]),this.item=o,this.$refs.rect.canvasData=this.formatParams(),this.$refs.rect.getRejectList();case 24:this.item.len=this.item.userIdList?this.item.userIdList.length:0,t.next=30;break;case 27:throw t.prev=27,t.t0=t["catch"](0),t.t0;case 30:case"end":return t.stop()}}),t,this,[[0,27]])})));function e(e){return t.apply(this,arguments)}return e}(),saveNode:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,o,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=this.item,t.next=4,this.$refs[e.lineId?"line":"rect"].validItem();case 4:if(n=t.sent,n){t.next=7;break}return t.abrupt("return");case 7:return i=G,r=-1,o=this.formatParams(),s=o.rects,a=o.lines,e.lineId?(i=q,r=a.findIndex((function(t){return t.lineId==e.lineId})),a[r].lineName=e.lineName):(r=s.findIndex((function(t){return t.nodeId==e.nodeId})),s[r].nodeName=n.nodeName),t.next=11,i(this.id,{rect:s,line:a},n);case 11:t.sent,this.getFlow(),this.$message.success("修改成功！"),this.visible=!1,t.next=20;break;case 17:throw t.prev=17,t.t0=t["catch"](0),t.t0;case 20:case"end":return t.stop()}}),t,this,[[0,17]])})));function e(){return t.apply(this,arguments)}return e}(),deleteNode:function(t){var e=this;return new R["Promise"]((function(n,i){H["a"].confirm({centered:!0,title:"删除",content:"确认删除？",okText:"确定",onOk:function(){var i=Object(l["a"])(regeneratorRuntime.mark((function i(){var r,o,s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,r=t.from?K:_,o=e.formatParams(),s=o.rects,a=o.lines,t.from?a=a.filter((function(e){return e.lineId!=t.id})):(s=s.filter((function(e){return e.nodeId!=t.id})),a=a.filter((function(e){return e.fromNodeId!=t.id&&e.toNodeId!=t.id}))),i.next=5,r(e.id,t.id,{rect:s,line:a});case 5:i.sent,n(),i.next=12;break;case 9:throw i.prev=9,i.t0=i["catch"](0),i.t0;case 12:case"end":return i.stop()}}),i,null,[[0,9]])})));function r(){return i.apply(this,arguments)}return r}()})}))},formatParams:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.canvas.rects,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.canvas.lines,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={nodeId:"id",nodeName:"text",nodeType:"nodeType",x:"x",y:"y",width:"width",height:"height"},r={lineId:"id",lineName:"lineName",fromNodeId:"from",toNodeId:"to"},o=function(t,e){return t.map((function(t){for(var i={},r=0,o=Object.entries(e);r<o.length;r++){var s=c(o[r],2),a=s[0],l=s[1];n?i[l]=t[a]:i[a]=t[l]}return i.nodeId&&(i.nodeType=i.nodeType||3,i.nodeName=i.nodeName||t.id),i.lineId&&(i.lineName=i.lineName||t.id),i}))};return t=o(t,i),e=o(e,r),{rects:t,lines:e}},getFlow:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n,i,r,o,s,a,c=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:this.id,t.prev=1,t.next=4,W(e);case 4:n=t.sent,i={id:this.boxId,This:this,style:{width:"1680",heigh:"1095",lineWidth:3,rectlineWidth:.5},options:{useBtn:!1,addId:"add",dragLine:!1,startId:1,endId:9999},methods:{dbClick:this.dbClick,beforeDelete:this.deleteNode}},r={},n.data?(o=n.data,s=o.line,a=o.rect,r=this.formatParams(a,s,!0)):r={rects:[{x:200,y:200,width:100,height:100,id:1,nodeType:1,title:"",text:"开始"},{x:500,y:200,width:100,height:100,id:9999,nodeType:2,title:"",text:"结束"}]},Object.assign(i,r),this.canvas=new I(i),t.next=15;break;case 12:throw t.prev=12,t.t0=t["catch"](1),t.t0;case 15:case"end":return t.stop()}}),t,this,[[1,12]])})));function e(){return t.apply(this,arguments)}return e}(),saveFlow:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e=this.formatParams(),n=e.rects,i=e.lines,t.next=4,J({wftId:this.id,viewNode:{rect:n,line:i}});case 4:t.sent,this.$message.success("保存成功！"),t.next=11;break;case 8:throw t.prev=8,t.t0=t["catch"](0),t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()}},tt=$,et=(n("0a2e"),Object(O["a"])(tt,i,r,!1,null,"ca99955e",null));e["default"]=et.exports},"51a4":function(t,e,n){(function(e){
/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
(function(e){"use strict";"function"===typeof bootstrap?bootstrap("promise",e):t.exports=e()})((function(){"use strict";var t=!1;try{throw new Error}catch(dt){t=!!dt.stack}var n,i=L(),r=function(){},o=function(){var t={task:void 0,next:null},n=t,i=!1,r=void 0,s=!1,a=[];function c(){var e,n;while(t.next)t=t.next,e=t.task,t.task=void 0,n=t.domain,n&&(t.domain=void 0,n.enter()),l(e,n);while(a.length)e=a.pop(),l(e);i=!1}function l(t,e){try{t()}catch(dt){if(s)throw e&&e.exit(),setTimeout(c,0),e&&e.enter(),dt;setTimeout((function(){throw dt}),0)}e&&e.exit()}if(o=function(t){n=n.next={task:t,domain:s&&e.domain,next:null},i||(i=!0,r())},"object"===typeof e&&"[object process]"===e.toString()&&e.nextTick)s=!0,r=function(){e.nextTick(c)};else if("function"===typeof setImmediate)r="undefined"!==typeof window?setImmediate.bind(window,c):function(){setImmediate(c)};else if("undefined"!==typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=function(){r=d,u.port1.onmessage=c,c()};var d=function(){u.port2.postMessage(0)};r=function(){setTimeout(c,0),d()}}else r=function(){setTimeout(c,0)};return o.runAfter=function(t){a.push(t),i||(i=!0,r())},o}(),s=Function.call;function a(t){return function(){return s.apply(t,arguments)}}var c,l=a(Array.prototype.slice),u=a(Array.prototype.reduce||function(t,e){var n=0,i=this.length;if(1===arguments.length)do{if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}while(1);for(;n<i;n++)n in this&&(e=t(e,this[n],n));return e}),d=a(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),h=a(Array.prototype.map||function(t,e){var n=this,i=[];return u(n,(function(r,o,s){i.push(t.call(e,o,s,n))}),void 0),i}),p=Object.create||function(t){function e(){}return e.prototype=t,new e},f=Object.defineProperty||function(t,e,n){return t[e]=n.value,t},m=a(Object.prototype.hasOwnProperty),v=Object.keys||function(t){var e=[];for(var n in t)m(t,n)&&e.push(n);return e},y=a(Object.prototype.toString);function b(t){return t===Object(t)}function g(t){return"[object StopIteration]"===y(t)||t instanceof c}c="undefined"!==typeof ReturnValue?ReturnValue:function(t){this.value=t};var w="From previous event:";function A(e,n){if(t&&n.stack&&"object"===typeof e&&null!==e&&e.stack){for(var i=[],r=n;r;r=r.source)r.stack&&(!e.__minimumStackCounter__||e.__minimumStackCounter__>r.stackCounter)&&(f(e,"__minimumStackCounter__",{value:r.stackCounter,configurable:!0}),i.unshift(r.stack));i.unshift(e.stack);var o=i.join("\n"+w+"\n"),s=x(o);f(e,"stack",{value:s,configurable:!0})}}function x(t){for(var e=t.split("\n"),n=[],i=0;i<e.length;++i){var r=e[i];C(r)||I(r)||!r||n.push(r)}return n.join("\n")}function I(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function k(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(t);return i?[i[1],Number(i[2])]:void 0}function C(t){var e=k(t);if(!e)return!1;var r=e[0],o=e[1];return r===n&&o>=i&&o<=ut}function L(){if(t)try{throw new Error}catch(dt){var e=dt.stack.split("\n"),i=e[0].indexOf("@")>0?e[1]:e[2],r=k(i);if(!r)return;return n=r[0],r[1]}}function j(t,e,n){return function(){return"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function R(t){return t instanceof O?t:D(t)?_(t):G(t)}R.resolve=R,R.nextTick=o,R.longStackSupport=!1;var T=1;function N(){var e,n=[],i=[],r=p(N.prototype),o=p(O.prototype);if(o.promiseDispatch=function(t,r,o){var s=l(arguments);n?(n.push(s),"when"===r&&o[1]&&i.push(o[1])):R.nextTick((function(){e.promiseDispatch.apply(e,s)}))},o.valueOf=function(){if(n)return o;var t=B(e);return M(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},R.longStackSupport&&t)try{throw new Error}catch(dt){o.stack=dt.stack.substring(dt.stack.indexOf("\n")+1),o.stackCounter=T++}function s(r){e=r,R.longStackSupport&&t&&(o.source=r),u(n,(function(t,e){R.nextTick((function(){r.promiseDispatch.apply(r,e)}))}),void 0),n=void 0,i=void 0}return r.promise=o,r.resolve=function(t){e||s(R(t))},r.fulfill=function(t){e||s(G(t))},r.reject=function(t){e||s(V(t))},r.notify=function(t){e||u(i,(function(e,n){R.nextTick((function(){n(t)}))}),void 0)},r}function P(t){if("function"!==typeof t)throw new TypeError("resolver must be a function.");var e=N();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function S(t){return P((function(e,n){for(var i=0,r=t.length;i<r;i++)R(t[i]).then(e,n)}))}function O(t,e,n){void 0===e&&(e=function(t){return V(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var i=p(O.prototype);if(i.promiseDispatch=function(n,r,o){var s;try{s=t[r]?t[r].apply(i,o):e.call(i,r,o)}catch(a){s=V(a)}n&&n(s)},i.inspect=n,n){var r=n();"rejected"===r.state&&(i.exception=r.reason),i.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?i:t.value}}return i}function E(t,e,n,i){return R(t).then(e,n,i)}function B(t){if(M(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function M(t){return t instanceof O}function D(t){return b(t)&&"function"===typeof t.then}function U(t){return M(t)&&"pending"===t.inspect().state}function z(t){return!M(t)||"fulfilled"===t.inspect().state}function F(t){return M(t)&&"rejected"===t.inspect().state}"object"===typeof e&&e&&Object({NODE_ENV:"production",BASE_URL:".\\/"})&&Object({NODE_ENV:"production",BASE_URL:".\\/"}).Q_DEBUG&&(R.longStackSupport=!0),R.defer=N,N.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(l(arguments,1)):t.resolve(n)}},R.Promise=P,R.promise=P,P.race=S,P.all=rt,P.reject=V,P.resolve=R,R.passByCopy=function(t){return t},O.prototype.passByCopy=function(){return this},R.join=function(t,e){return R(t).join(e)},O.prototype.join=function(t){return R([this,t]).spread((function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)}))},R.race=S,O.prototype.race=function(){return this.then(R.race)},R.makePromise=O,O.prototype.toString=function(){return"[object Promise]"},O.prototype.then=function(t,e,n){var i=this,r=N(),o=!1;function s(e){try{return"function"===typeof t?t(e):e}catch(n){return V(n)}}function a(t){if("function"===typeof e){A(t,i);try{return e(t)}catch(n){return V(n)}}return V(t)}function c(t){return"function"===typeof n?n(t):t}return R.nextTick((function(){i.promiseDispatch((function(t){o||(o=!0,r.resolve(s(t)))}),"when",[function(t){o||(o=!0,r.resolve(a(t)))}])})),i.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=c(t)}catch(dt){if(n=!0,!R.onerror)throw dt;R.onerror(dt)}n||r.notify(e)}]),r.promise},R.tap=function(t,e){return R(t).tap(e)},O.prototype.tap=function(t){return t=R(t),this.then((function(e){return t.fcall(e).thenResolve(e)}))},R.when=E,O.prototype.thenResolve=function(t){return this.then((function(){return t}))},R.thenResolve=function(t,e){return R(t).thenResolve(e)},O.prototype.thenReject=function(t){return this.then((function(){throw t}))},R.thenReject=function(t,e){return R(t).thenReject(e)},R.nearer=B,R.isPromise=M,R.isPromiseAlike=D,R.isPending=U,O.prototype.isPending=function(){return"pending"===this.inspect().state},R.isFulfilled=z,O.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},R.isRejected=F,O.prototype.isRejected=function(){return"rejected"===this.inspect().state};var X=[],Q=[],H=[],Y=!0;function W(){X.length=0,Q.length=0,Y||(Y=!0)}function J(t,n){Y&&("object"===typeof e&&"function"===typeof e.emit&&R.nextTick.runAfter((function(){-1!==d(Q,t)&&(e.emit("unhandledRejection",n,t),H.push(t))})),Q.push(t),n&&"undefined"!==typeof n.stack?X.push(n.stack):X.push("(no stack) "+n))}function Z(t){if(Y){var n=d(Q,t);-1!==n&&("object"===typeof e&&"function"===typeof e.emit&&R.nextTick.runAfter((function(){var i=d(H,t);-1!==i&&(e.emit("rejectionHandled",X[n],t),H.splice(i,1))})),Q.splice(n,1),X.splice(n,1))}}function V(t){var e=O({when:function(e){return e&&Z(this),e?e(t):this}},(function(){return this}),(function(){return{state:"rejected",reason:t}}));return J(e,t),e}function G(t){return O({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return v(t)}},void 0,(function(){return{state:"fulfilled",value:t}}))}function _(t){var e=N();return R.nextTick((function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}})),e.promise}function q(t){return O({isDef:function(){}},(function(e,n){return it(t,e,n)}),(function(){return R(t).inspect()}))}function K(t,e,n){return R(t).spread(e,n)}function $(t){return function(){function e(t,e){var o;if("undefined"===typeof StopIteration){try{o=n[t](e)}catch(s){return V(s)}return o.done?R(o.value):E(o.value,i,r)}try{o=n[t](e)}catch(s){return g(s)?R(s.value):V(s)}return E(o,i,r)}var n=t.apply(this,arguments),i=e.bind(e,"next"),r=e.bind(e,"throw");return i()}}function tt(t){R.done(R.async(t)())}function et(t){throw new c(t)}function nt(t){return function(){return K([this,rt(arguments)],(function(e,n){return t.apply(e,n)}))}}function it(t,e,n){return R(t).dispatch(e,n)}function rt(t){return E(t,(function(t){var e=0,n=N();return u(t,(function(i,r,o){var s;M(r)&&"fulfilled"===(s=r.inspect()).state?t[o]=s.value:(++e,E(r,(function(i){t[o]=i,0===--e&&n.resolve(t)}),n.reject,(function(t){n.notify({index:o,value:t})})))}),void 0),0===e&&n.resolve(t),n.promise}))}function ot(t){if(0===t.length)return R.resolve();var e=R.defer(),n=0;return u(t,(function(i,r,o){var s=t[o];function a(t){e.resolve(t)}function c(t){if(n--,0===n){var i=t||new Error(""+t);i.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+i.message,e.reject(i)}}function l(t){e.notify({index:o,value:t})}n++,E(s,a,c,l)}),void 0),e.promise}function st(t){return E(t,(function(t){return t=h(t,R),E(rt(h(t,(function(t){return E(t,r,r)}))),(function(){return t}))}))}function at(t){return R(t).allSettled()}function ct(t,e){return R(t).then(void 0,void 0,e)}function lt(t,e){return R(t).nodeify(e)}R.resetUnhandledRejections=W,R.getUnhandledReasons=function(){return X.slice()},R.stopUnhandledRejectionTracking=function(){W(),Y=!1},W(),R.reject=V,R.fulfill=G,R.master=q,R.spread=K,O.prototype.spread=function(t,e){return this.all().then((function(e){return t.apply(void 0,e)}),e)},R.async=$,R.spawn=tt,R["return"]=et,R.promised=nt,R.dispatch=it,O.prototype.dispatch=function(t,e){var n=this,i=N();return R.nextTick((function(){n.promiseDispatch(i.resolve,t,e)})),i.promise},R.get=function(t,e){return R(t).dispatch("get",[e])},O.prototype.get=function(t){return this.dispatch("get",[t])},R.set=function(t,e,n){return R(t).dispatch("set",[e,n])},O.prototype.set=function(t,e){return this.dispatch("set",[t,e])},R.del=R["delete"]=function(t,e){return R(t).dispatch("delete",[e])},O.prototype.del=O.prototype["delete"]=function(t){return this.dispatch("delete",[t])},R.mapply=R.post=function(t,e,n){return R(t).dispatch("post",[e,n])},O.prototype.mapply=O.prototype.post=function(t,e){return this.dispatch("post",[t,e])},R.send=R.mcall=R.invoke=function(t,e){return R(t).dispatch("post",[e,l(arguments,2)])},O.prototype.send=O.prototype.mcall=O.prototype.invoke=function(t){return this.dispatch("post",[t,l(arguments,1)])},R.fapply=function(t,e){return R(t).dispatch("apply",[void 0,e])},O.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},R["try"]=R.fcall=function(t){return R(t).dispatch("apply",[void 0,l(arguments,1)])},O.prototype.fcall=function(){return this.dispatch("apply",[void 0,l(arguments)])},R.fbind=function(t){var e=R(t),n=l(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(l(arguments))])}},O.prototype.fbind=function(){var t=this,e=l(arguments);return function(){return t.dispatch("apply",[this,e.concat(l(arguments))])}},R.keys=function(t){return R(t).dispatch("keys",[])},O.prototype.keys=function(){return this.dispatch("keys",[])},R.all=rt,O.prototype.all=function(){return rt(this)},R.any=ot,O.prototype.any=function(){return ot(this)},R.allResolved=j(st,"allResolved","allSettled"),O.prototype.allResolved=function(){return st(this)},R.allSettled=at,O.prototype.allSettled=function(){return this.then((function(t){return rt(h(t,(function(t){function e(){return t.inspect()}return t=R(t),t.then(e,e)})))}))},R.fail=R["catch"]=function(t,e){return R(t).then(void 0,e)},O.prototype.fail=O.prototype["catch"]=function(t){return this.then(void 0,t)},R.progress=ct,O.prototype.progress=function(t){return this.then(void 0,void 0,t)},R.fin=R["finally"]=function(t,e){return R(t)["finally"](e)},O.prototype.fin=O.prototype["finally"]=function(t){if(!t||"function"!==typeof t.apply)throw new Error("Q can't apply finally callback");return t=R(t),this.then((function(e){return t.fcall().then((function(){return e}))}),(function(e){return t.fcall().then((function(){throw e}))}))},R.done=function(t,e,n,i){return R(t).done(e,n,i)},O.prototype.done=function(t,n,i){var r=function(t){R.nextTick((function(){if(A(t,o),!R.onerror)throw t;R.onerror(t)}))},o=t||n||i?this.then(t,n,i):this;"object"===typeof e&&e&&e.domain&&(r=e.domain.bind(r)),o.then(void 0,r)},R.timeout=function(t,e,n){return R(t).timeout(e,n)},O.prototype.timeout=function(t,e){var n=N(),i=setTimeout((function(){e&&"string"!==typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)}),t);return this.then((function(t){clearTimeout(i),n.resolve(t)}),(function(t){clearTimeout(i),n.reject(t)}),n.notify),n.promise},R.delay=function(t,e){return void 0===e&&(e=t,t=void 0),R(t).delay(e)},O.prototype.delay=function(t){return this.then((function(e){var n=N();return setTimeout((function(){n.resolve(e)}),t),n.promise}))},R.nfapply=function(t,e){return R(t).nfapply(e)},O.prototype.nfapply=function(t){var e=N(),n=l(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},R.nfcall=function(t){var e=l(arguments,1);return R(t).nfapply(e)},O.prototype.nfcall=function(){var t=l(arguments),e=N();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},R.nfbind=R.denodeify=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var e=l(arguments,1);return function(){var n=e.concat(l(arguments)),i=N();return n.push(i.makeNodeResolver()),R(t).fapply(n).fail(i.reject),i.promise}},O.prototype.nfbind=O.prototype.denodeify=function(){var t=l(arguments);return t.unshift(this),R.denodeify.apply(void 0,t)},R.nbind=function(t,e){var n=l(arguments,2);return function(){var i=n.concat(l(arguments)),r=N();function o(){return t.apply(e,arguments)}return i.push(r.makeNodeResolver()),R(o).fapply(i).fail(r.reject),r.promise}},O.prototype.nbind=function(){var t=l(arguments,0);return t.unshift(this),R.nbind.apply(void 0,t)},R.nmapply=R.npost=function(t,e,n){return R(t).npost(e,n)},O.prototype.nmapply=O.prototype.npost=function(t,e){var n=l(e||[]),i=N();return n.push(i.makeNodeResolver()),this.dispatch("post",[t,n]).fail(i.reject),i.promise},R.nsend=R.nmcall=R.ninvoke=function(t,e){var n=l(arguments,2),i=N();return n.push(i.makeNodeResolver()),R(t).dispatch("post",[e,n]).fail(i.reject),i.promise},O.prototype.nsend=O.prototype.nmcall=O.prototype.ninvoke=function(t){var e=l(arguments,1),n=N();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},R.nodeify=lt,O.prototype.nodeify=function(t){if(!t)return this;this.then((function(e){R.nextTick((function(){t(null,e)}))}),(function(e){R.nextTick((function(){t(e)}))}))},R.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ut=L();return R}))}).call(this,n("4c39"))},"5ee4":function(t,e,n){"use strict";e.decode=e.parse=n("a2d3"),e.encode=e.stringify=n("2bb8")},6821:function(t,e,n){"use strict";var i=n("cab3"),r=n.n(i);r.a},"6a7b":function(t,e,n){},"77fe":function(t,e){t.exports="data:image/gif;base64,R0lGODlhEAAQANU1AHRwbXRxbPP0zPP0ynNwa3VwbPL0zPL1yvXzynJxbXJxb/XzzP3++HVwavv78/P0yHJyanVxbvb1yXNza/HwwHJycHJyaP37/HFwa/T0zvP2y/v7+f/++vz++/38+v39/3Rxav////L1yHNybfT1yfz58nVybfz7//Lzx3NwZ/v69vT1y/byzPf1zPP1xv368/r78/bzyvTyyXRxaHJxbP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADUALAAAAAAQABAAAAZtwJqwISwajzVAAMms0RCJ5hGQeUykRVqsMxhhawSXJySiYRUaDuMzUEghqJOK4TAsmZgW7FLaCA4zTBEDLwYOAgkFNClIACQsBQcLRE0gKwQVBBQCd0g0AEImMhIQTaBFEQ8LnVJPnF9CNBZHQQA7"},"86e6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAJdSURBVDjLpZP7S1NhGMf9W7YfogSJboSEUVCY8zJ31trcps6zTI9bLGJpjp1hmkGNxVz4Q6ildtXKXzJNbJRaRmrXoeWx8tJOTWptnrNryre5YCYuI3rh+8vL+/m8PA/PkwIg5X+y5mJWrxfOUBXm91QZM6UluUmthntHqplxUml2lciF6wrmdHriI0Wx3xw2hAediLwZRWRkCPzdDswaSvGqkGCfq8VEUsEyPF1O8Qu3O7A09RbRvjuIttsRbT6HHzebsDjcB4/JgFFlNv9MnkmsEszodIIY7Oaut2OJcSF68Qx8dgv8tmqEL1gQaaARtp5A+N4NzB0lMXxon/uxbI8gIYjB9HytGYuusfiPIQcN71kjgnW6VeFOkgh3XcHLvAwMSDPohOADdYQJdF1FtLMZPmslvhZJk2ahkgRvq4HHUoWHRDqTEDDl2mDkfheiDgt8pw340/EocuClCuFvboQzb0cwIZgki4KhzlaE6w0InipbVzBfqoK/qRH94i0rgokSFeO11iBkp8EdV8cfJo0yD75aE2ZNRvSJ0lZKcBXLaUYmQrCzDT6tDN5SyRqYlWeDLZAg0H4JQ+Jt6M3atNLE10VSwQsN4Z6r0CBwqzXesHmV+BeoyAUri8EyMfi2FowXS5dhd7doo2DVII0V5BAjigP89GEVAtda8b2ehodU4rNaAW+dGfzlFkyo89GTlcrHYCLpKD+V7yeeHNzLjkp24Uu1Ed6G8/F8qjqGRzlbl2H2dzjpMg1KdwsHxOlmJ7GTeZC/nesXbeZ6c9OYnuxUc3fmBuFft/Ff8xMd0s65SXIb/gAAAABJRU5ErkJggg=="},9833:function(t,e){t.exports="data:image/png;base64,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"},a2d3:function(t,e,n){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!==typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var c=1e3;o&&"number"===typeof o.maxKeys&&(c=o.maxKeys);var l=t.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var d,h,p,f,m=t[u].replace(a,"%20"),v=m.indexOf(n);v>=0?(d=m.substr(0,v),h=m.substr(v+1)):(d=m,h=""),p=decodeURIComponent(d),f=decodeURIComponent(h),i(s,p)?r(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},cab3:function(t,e,n){},dcbb:function(t,e,n){},ef69:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVZQTFRF5vP5z+TuyeDrurq61+nyyuHsy+Hs3u71zOLt3u315PH40uXv6fX62Ony6vb76PX60eXvzeLt1Ofx3e710ebv4fD34e/24/H40ubv1Ofw2Ory6/b7zuTu5vP61+ry4/L42+zz2+vz5PL41Ojx3e311Ojw2uzzyuHry+Hr2+v02uvz1efx4PD24e/32uv04PD31ejxzePt5vT5/v7+4fD22+z06fT66PT66PX7/Pz8+fn54O/36fX74/H3z+TtzOLszOPtzeLs1efw5PH35/P54O/2z+Pu9PT06fT77Ozs5+fn19fX2uz0zOPszs7OzuTt0ebwzePs6vb8vb296PT75/T50uXwzuPu0eXw+vr67Pf76/b8pcHOpsHPp8LP5PL3z+Pt5/P64/L31eXtxsbG6/f80+Tr1ejwyuDr0uPr0ubw3e325eXl9/f3kLDA7Pf8zMzM////AZjtUQAAA5xJREFUeNrcVWd34kYUlRIBQhIWRY0mCdF7B9MMBmNjG/e66+0l1Sa7//9L7oiNNief2OTknJzckWbeu8MdMTPvzVCfvxHU/0TQfLnaCC/7vSYRNF/8LIoL4VoQBPFaXCzQCEJnG/VQFMRORxgKi852VxR+eHHwrAlBb0VRVONtg6Li9oPqhqJuGnGbjlPxNUntUavHgx4E/ZXFcaPXhvpaHXGGwXGcas0M1VAtbgaGUzlV5YyRYXGr48M+BE8rpVWW5ZI8UGRZUZSSMiiX5uVqSVZKc6VUGoCsDuZyq7w6PXqyBV5PyJPyAF4g5A3BDnm8pEp5PSBQeUnv6tPjWpAvmPnlstKuJNrLQqawzCQy7UICbMJM5JeJfNusZDL5fMERMBGGYXyML6Izum0zTMQXiTA+cLpPX/u67nME4WC4lkRVDE/T0+mPyWQtXQvXwulksBaeJpPFIKwgXEeg8ZLG+3neT8Br9nsr+SW//5zXpHse3X7tXuMdAR2LxfZpOoZC79/RZzFi0/SbWIzeoYl9Bh6GIwjUA8A4sMuyJwF2wl6M2cDkhGXZeoAlPDup745ZduII3NncT26324WSy7ldWRcs+3HnXK4siCxY9DuC7zaEIyD6HIbCeGR4DJZ1o825cvY31gSer3PY3Z1cTC4wgfqErdfxdzEbUtXJtMb18QmmEmDrjuDNDn23j/WIkTU5I0tDFgnY2cHq7dN3tnP2dZXueU0jO3Hul3jpFot+y2vYAOyCxPPnkv8X7AQvSZojCCZrxfV+FmvJdDAYnNZqxSI2N1ycFtMIgHQQbDr8p1jSETQRRifBg7ghcYWwiuiRiO4jLoAoYxwBgtIsmJlKJZ/PICwrZgV+BQGbMNtmPtM2YWYSZsURINQR9qkUwh+NN/WrN5UKIQ1InqCDZEgohORwBPO5rMyrZaUqt+SyrJSr1UGp1SohCVvVAQj4ZWRlyxFw6mzEWarBWcZMtSxiGkhhbmYZI/RZSOx3qvWOcwRUwz4YcG7sxW8aVOOLH98DsYdDgxgEjkAUxW5nOBTQ4EAadkQcTN2uKA6vO93FtoCy3UVv1xFEL6PRLeBh6yEafdjasj28l3YbvbRrEI7gtw3xjwUf//Uv/A3B87+0G33h+X9hDq/eb/b7938Ijl5tdimurtYXSv/w+MPV9xvg6sP6yuodPB6fftoAp8frS7H57ODw6HEDHB2ur93PzV7/aSN8udi/Db8LMACeKnx/T6NWSgAAAABJRU5ErkJggg=="},f48a:function(t,e,n){"use strict";n.r(e);var i=n("da43"),r=n("b83d").default.requestToken;e["default"]={getFlow:function(t){return Object(i["a"])({url:"/template/view-node/".concat(t),params:{access_token:r}})},saveFlow:function(t){return Object(i["a"])({method:"PATCH",data:t,url:"/template/view-node/design",params:{access_token:r}})},getNode:function(t,e){return Object(i["a"])({url:"/node",params:{access_token:r,wft_id:t,node_id:e}})},putNode:function(t,e,n){return Object(i["a"])({method:"PATCH",data:{wftId:t,viewNode:e,wftProcess:n},url:"/node/add-or-edit",params:{access_token:r}})},delNode:function(t,e,n){return Object(i["a"])({method:"DELETE",data:{wftId:t,viewNode:n,wftProcess:{nodeId:e}},url:"/node/delete",params:{access_token:r}})},getLine:function(t,e){return Object(i["a"])({url:"/node-line",params:{access_token:r,wft_id:t,line_id:e}})},putLine:function(t,e,n){return Object(i["a"])({method:"PATCH",data:{wftId:t,viewNode:e,wftNodeLine:n},url:"/node-line/add-or-edit",params:{access_token:r}})},delLine:function(t,e,n){return Object(i["a"])({method:"DELETE",data:{wftId:t,wftNodeLine:{lineId:e},viewNode:n},url:"/node-line/delete",params:{access_token:r}})}}}}]);
//# sourceMappingURL=chunk-5efc97c3.6de5ab2e.js.map